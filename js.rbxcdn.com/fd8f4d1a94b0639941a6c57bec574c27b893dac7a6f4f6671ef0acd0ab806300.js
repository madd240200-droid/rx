!function(){var e={135:function(e,t,n){var r;e=n.nmd(e);var a=function(e){"use strict";var t=1e7,n=9007199254740992,r=p(n),o="0123456789abcdefghijklmnopqrstuvwxyz",i="function"==typeof BigInt;function l(e,t,n,r){return void 0===e?l[0]:void 0!==t&&(10!=+t||n)?B(e,t,n,r):Y(e)}function u(e,t){this.value=e,this.sign=t,this.isSmall=!1}function s(e){this.value=e,this.sign=e<0,this.isSmall=!0}function c(e){this.value=e}function d(e){return-n<e&&e<n}function p(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function f(e){h(e);var n=e.length;if(n<4&&D(e,r)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function h(e){for(var t=e.length;0===e[--t];);e.length=t+1}function v(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function y(e){return e>0?Math.floor(e):Math.ceil(e)}function m(e,n){var r,a,o=e.length,i=n.length,l=new Array(o),u=0,s=t;for(a=0;a<i;a++)u=(r=e[a]+n[a]+u)>=s?1:0,l[a]=r-u*s;for(;a<o;)u=(r=e[a]+u)===s?1:0,l[a++]=r-u*s;return u>0&&l.push(u),l}function E(e,t){return e.length>=t.length?m(e,t):m(t,e)}function g(e,n){var r,a,o=e.length,i=new Array(o),l=t;for(a=0;a<o;a++)r=e[a]-l+n,n=Math.floor(r/l),i[a]=r-n*l,n+=1;for(;n>0;)i[a++]=n%l,n=Math.floor(n/l);return i}function b(e,n){var r,a,o=e.length,i=n.length,l=new Array(o),u=0,s=t;for(r=0;r<i;r++)(a=e[r]-u-n[r])<0?(a+=s,u=1):u=0,l[r]=a;for(r=i;r<o;r++){if(!((a=e[r]-u)<0)){l[r++]=a;break}a+=s,l[r]=a}for(;r<o;r++)l[r]=e[r];return h(l),l}function C(e,n,r){var a,o,i=e.length,l=new Array(i),c=-n,d=t;for(a=0;a<i;a++)o=e[a]+c,c=Math.floor(o/d),o%=d,l[a]=o<0?o+d:o;return"number"==typeof(l=f(l))?(r&&(l=-l),new s(l)):new u(l,r)}function _(e,n){var r,a,o,i,l=e.length,u=n.length,s=v(l+u),c=t;for(o=0;o<l;++o){i=e[o];for(var d=0;d<u;++d)r=i*n[d]+s[o+d],a=Math.floor(r/c),s[o+d]=r-a*c,s[o+d+1]+=a}return h(s),s}function I(e,n){var r,a,o=e.length,i=new Array(o),l=t,u=0;for(a=0;a<o;a++)r=e[a]*n+u,u=Math.floor(r/l),i[a]=r-u*l;for(;u>0;)i[a++]=u%l,u=Math.floor(u/l);return i}function S(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function T(e,t){var n=Math.max(e.length,t.length);if(n<=30)return _(e,t);n=Math.ceil(n/2);var r=e.slice(n),a=e.slice(0,n),o=t.slice(n),i=t.slice(0,n),l=T(a,i),u=T(r,o),s=T(E(a,r),E(i,o)),c=E(E(l,S(b(b(s,l),u),n)),S(u,2*n));return h(c),c}function A(e,n,r){return new u(e<t?I(n,e):_(n,p(e)),r)}function N(e){var n,r,a,o,i=e.length,l=v(i+i),u=t;for(a=0;a<i;a++){r=0-(o=e[a])*o;for(var s=a;s<i;s++)n=o*e[s]*2+l[a+s]+r,r=Math.floor(n/u),l[a+s]=n-r*u;l[a+i]=r}return h(l),l}function w(e,t){var n,r,a,o,i=e.length,l=v(i);for(a=0,n=i-1;n>=0;--n)a=(o=1e7*a+e[n])-(r=y(o/t))*t,l[n]=0|r;return[l,0|a]}function L(e,n){var r,a=Y(n);if(i)return[new c(e.value/a.value),new c(e.value%a.value)];var o,d=e.value,m=a.value;if(0===m)throw new Error("Cannot divide by zero");if(e.isSmall)return a.isSmall?[new s(y(d/m)),new s(d%m)]:[l[0],e];if(a.isSmall){if(1===m)return[e,l[0]];if(-1==m)return[e.negate(),l[0]];var E=Math.abs(m);if(E<t){o=f((r=w(d,E))[0]);var g=r[1];return e.sign&&(g=-g),"number"==typeof o?(e.sign!==a.sign&&(o=-o),[new s(o),new s(g)]):[new u(o,e.sign!==a.sign),new s(g)]}m=p(E)}var C=D(d,m);if(-1===C)return[l[0],e];if(0===C)return[l[e.sign===a.sign?1:-1],l[0]];o=(r=d.length+m.length<=200?function(e,n){var r,a,o,i,l,u,s,c=e.length,d=n.length,p=t,h=v(n.length),y=n[d-1],m=Math.ceil(p/(2*y)),E=I(e,m),g=I(n,m);for(E.length<=c&&E.push(0),g.push(0),y=g[d-1],a=c-d;a>=0;a--){for(r=p-1,E[a+d]!==y&&(r=Math.floor((E[a+d]*p+E[a+d-1])/y)),o=0,i=0,u=g.length,l=0;l<u;l++)o+=r*g[l],s=Math.floor(o/p),i+=E[a+l]-(o-s*p),o=s,i<0?(E[a+l]=i+p,i=-1):(E[a+l]=i,i=0);for(;0!==i;){for(r-=1,o=0,l=0;l<u;l++)(o+=E[a+l]-p+g[l])<0?(E[a+l]=o+p,o=0):(E[a+l]=o,o=1);i+=o}h[a]=r}return E=w(E,m)[0],[f(h),f(E)]}(d,m):function(e,n){for(var r,a,o,i,l,u=e.length,s=n.length,c=[],d=[],p=t;u;)if(d.unshift(e[--u]),h(d),D(d,n)<0)c.push(0);else{o=d[(a=d.length)-1]*p+d[a-2],i=n[s-1]*p+n[s-2],a>s&&(o=(o+1)*p),r=Math.ceil(o/i);do{if(D(l=I(n,r),d)<=0)break;r--}while(r);c.push(r),d=b(d,l)}return c.reverse(),[f(c),f(d)]}(d,m))[0];var _=e.sign!==a.sign,S=r[1],T=e.sign;return"number"==typeof o?(_&&(o=-o),o=new s(o)):o=new u(o,_),"number"==typeof S?(T&&(S=-S),S=new s(S)):S=new u(S,T),[o,S]}function D(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function O(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function R(e,t){for(var n,r,o,i=e.prev(),l=i,u=0;l.isEven();)l=l.divide(2),u++;e:for(r=0;r<t.length;r++)if(!e.lesser(t[r])&&!(o=a(t[r]).modPow(l,e)).isUnit()&&!o.equals(i)){for(n=u-1;0!=n;n--){if((o=o.square().mod(e)).isUnit())return!1;if(o.equals(i))continue e}return!1}return!0}u.prototype=Object.create(l.prototype),s.prototype=Object.create(l.prototype),c.prototype=Object.create(l.prototype),u.prototype.add=function(e){var t=Y(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new u(g(n,Math.abs(r)),this.sign):new u(E(n,r),this.sign)},u.prototype.plus=u.prototype.add,s.prototype.add=function(e){var t=Y(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(d(n+r))return new s(n+r);r=p(Math.abs(r))}return new u(g(r,Math.abs(n)),n<0)},s.prototype.plus=s.prototype.add,c.prototype.add=function(e){return new c(this.value+Y(e).value)},c.prototype.plus=c.prototype.add,u.prototype.subtract=function(e){var t=Y(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?C(n,Math.abs(r),this.sign):function(e,t,n){var r;return D(e,t)>=0?r=b(e,t):(r=b(t,e),n=!n),"number"==typeof(r=f(r))?(n&&(r=-r),new s(r)):new u(r,n)}(n,r,this.sign)},u.prototype.minus=u.prototype.subtract,s.prototype.subtract=function(e){var t=Y(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new s(n-r):C(r,Math.abs(n),n>=0)},s.prototype.minus=s.prototype.subtract,c.prototype.subtract=function(e){return new c(this.value-Y(e).value)},c.prototype.minus=c.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},s.prototype.negate=function(){var e=this.sign,t=new s(-this.value);return t.sign=!e,t},c.prototype.negate=function(){return new c(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},s.prototype.abs=function(){return new s(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},u.prototype.multiply=function(e){var n,r,a,o=Y(e),i=this.value,s=o.value,c=this.sign!==o.sign;if(o.isSmall){if(0===s)return l[0];if(1===s)return this;if(-1===s)return this.negate();if((n=Math.abs(s))<t)return new u(I(i,n),c);s=p(n)}return r=i.length,a=s.length,new u(-.012*r-.012*a+15e-6*r*a>0?T(i,s):_(i,s),c)},u.prototype.times=u.prototype.multiply,s.prototype._multiplyBySmall=function(e){return d(e.value*this.value)?new s(e.value*this.value):A(Math.abs(e.value),p(Math.abs(this.value)),this.sign!==e.sign)},u.prototype._multiplyBySmall=function(e){return 0===e.value?l[0]:1===e.value?this:-1===e.value?this.negate():A(Math.abs(e.value),this.value,this.sign!==e.sign)},s.prototype.multiply=function(e){return Y(e)._multiplyBySmall(this)},s.prototype.times=s.prototype.multiply,c.prototype.multiply=function(e){return new c(this.value*Y(e).value)},c.prototype.times=c.prototype.multiply,u.prototype.square=function(){return new u(N(this.value),!1)},s.prototype.square=function(){var e=this.value*this.value;return d(e)?new s(e):new u(N(p(Math.abs(this.value))),!1)},c.prototype.square=function(e){return new c(this.value*this.value)},u.prototype.divmod=function(e){var t=L(this,e);return{quotient:t[0],remainder:t[1]}},c.prototype.divmod=s.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(e){return L(this,e)[0]},c.prototype.over=c.prototype.divide=function(e){return new c(this.value/Y(e).value)},s.prototype.over=s.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(e){return L(this,e)[1]},c.prototype.mod=c.prototype.remainder=function(e){return new c(this.value%Y(e).value)},s.prototype.remainder=s.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(e){var t,n,r,a=Y(e),o=this.value,i=a.value;if(0===i)return l[1];if(0===o)return l[0];if(1===o)return l[1];if(-1===o)return a.isEven()?l[1]:l[-1];if(a.sign)return l[0];if(!a.isSmall)throw new Error("The exponent "+a.toString()+" is too large.");if(this.isSmall&&d(t=Math.pow(o,i)))return new s(y(t));for(n=this,r=l[1];!0&i&&(r=r.times(n),--i),0!==i;)i/=2,n=n.square();return r},s.prototype.pow=u.prototype.pow,c.prototype.pow=function(e){var t=Y(e),n=this.value,r=t.value,a=BigInt(0),o=BigInt(1),i=BigInt(2);if(r===a)return l[1];if(n===a)return l[0];if(n===o)return l[1];if(n===BigInt(-1))return t.isEven()?l[1]:l[-1];if(t.isNegative())return new c(a);for(var u=this,s=l[1];(r&o)===o&&(s=s.times(u),--r),r!==a;)r/=i,u=u.square();return s},u.prototype.modPow=function(e,t){if(e=Y(e),(t=Y(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var n=l[1],r=this.mod(t);for(e.isNegative()&&(e=e.multiply(l[-1]),r=r.modInv(t));e.isPositive();){if(r.isZero())return l[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},c.prototype.modPow=s.prototype.modPow=u.prototype.modPow,u.prototype.compareAbs=function(e){var t=Y(e),n=this.value,r=t.value;return t.isSmall?1:D(n,r)},s.prototype.compareAbs=function(e){var t=Y(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},c.prototype.compareAbs=function(e){var t=this.value,n=Y(e).value;return(t=t>=0?t:-t)===(n=n>=0?n:-n)?0:t>n?1:-1},u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=Y(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:D(n,r)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,s.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=Y(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},s.prototype.compareTo=s.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,n=Y(e).value;return t===n?0:t>n?1:-1},c.prototype.compareTo=c.prototype.compare,u.prototype.equals=function(e){return 0===this.compare(e)},c.prototype.eq=c.prototype.equals=s.prototype.eq=s.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(e){return 0!==this.compare(e)},c.prototype.neq=c.prototype.notEquals=s.prototype.neq=s.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(e){return this.compare(e)>0},c.prototype.gt=c.prototype.greater=s.prototype.gt=s.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(e){return this.compare(e)<0},c.prototype.lt=c.prototype.lesser=s.prototype.lt=s.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},c.prototype.geq=c.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},c.prototype.leq=c.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return 0==(1&this.value[0])},s.prototype.isEven=function(){return 0==(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return 1==(1&this.value[0])},s.prototype.isOdd=function(){return 1==(1&this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},s.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=s.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},s.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=s.prototype.isNegative,u.prototype.isUnit=function(){return!1},s.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},s.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(e){var t=Y(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},c.prototype.isDivisibleBy=s.prototype.isDivisibleBy=u.prototype.isDivisibleBy,u.prototype.isPrime=function(t){var n=O(this);if(n!==e)return n;var r=this.abs(),o=r.bitLength();if(o<=64)return R(r,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var i=Math.log(2)*o.toJSNumber(),l=Math.ceil(!0===t?2*Math.pow(i,2):i),u=[],s=0;s<l;s++)u.push(a(s+2));return R(r,u)},c.prototype.isPrime=s.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(t,n){var r=O(this);if(r!==e)return r;for(var o=this.abs(),i=t===e?5:t,l=[],u=0;u<i;u++)l.push(a.randBetween(2,o.minus(2),n));return R(o,l)},c.prototype.isProbablePrime=s.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(e){for(var t,n,r,o=a.zero,i=a.one,l=Y(e),u=this.abs();!u.isZero();)t=l.divide(u),n=o,r=l,o=i,l=u,i=n.subtract(t.multiply(i)),u=r.subtract(t.multiply(u));if(!l.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===o.compare(0)&&(o=o.add(e)),this.isNegative()?o.negate():o},c.prototype.modInv=s.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var e=this.value;return this.sign?C(e,1,this.sign):new u(g(e,1),this.sign)},s.prototype.next=function(){var e=this.value;return e+1<n?new s(e+1):new u(r,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},u.prototype.prev=function(){var e=this.value;return this.sign?new u(g(e,1),!0):C(e,1,this.sign)},s.prototype.prev=function(){var e=this.value;return e-1>-n?new s(e-1):new u(r,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var P=[1];2*P[P.length-1]<=t;)P.push(2*P[P.length-1]);var x=P.length,M=P[x-1];function k(e){return Math.abs(e)<=t}function U(e,t,n){t=Y(t);for(var r=e.isNegative(),o=t.isNegative(),i=r?e.not():e,l=o?t.not():t,u=0,s=0,c=null,d=null,p=[];!i.isZero()||!l.isZero();)u=(c=L(i,M))[1].toJSNumber(),r&&(u=M-1-u),s=(d=L(l,M))[1].toJSNumber(),o&&(s=M-1-s),i=c[0],l=d[0],p.push(n(u,s));for(var f=0!==n(r?1:0,o?1:0)?a(-1):a(0),h=p.length-1;h>=0;h-=1)f=f.multiply(M).add(a(p[h]));return f}u.prototype.shiftLeft=function(e){var t=Y(e).toJSNumber();if(!k(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var n=this;if(n.isZero())return n;for(;t>=x;)n=n.multiply(M),t-=x-1;return n.multiply(P[t])},c.prototype.shiftLeft=s.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(e){var t,n=Y(e).toJSNumber();if(!k(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var r=this;n>=x;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=L(r,M))[1].isNegative()?t[0].prev():t[0],n-=x-1}return(t=L(r,P[n]))[1].isNegative()?t[0].prev():t[0]},c.prototype.shiftRight=s.prototype.shiftRight=u.prototype.shiftRight,u.prototype.not=function(){return this.negate().prev()},c.prototype.not=s.prototype.not=u.prototype.not,u.prototype.and=function(e){return U(this,e,(function(e,t){return e&t}))},c.prototype.and=s.prototype.and=u.prototype.and,u.prototype.or=function(e){return U(this,e,(function(e,t){return e|t}))},c.prototype.or=s.prototype.or=u.prototype.or,u.prototype.xor=function(e){return U(this,e,(function(e,t){return e^t}))},c.prototype.xor=s.prototype.xor=u.prototype.xor;var H=1<<30;function V(e){var n=e.value,r="number"==typeof n?n|H:"bigint"==typeof n?n|BigInt(H):n[0]+n[1]*t|1073758208;return r&-r}function G(e,t){if(t.compareTo(e)<=0){var n=G(e,t.square(t)),r=n.p,o=n.e,i=r.multiply(t);return i.compareTo(e)<=0?{p:i,e:2*o+1}:{p:r,e:2*o}}return{p:a(1),e:0}}function W(e,t){return e=Y(e),t=Y(t),e.greater(t)?e:t}function F(e,t){return e=Y(e),t=Y(t),e.lesser(t)?e:t}function q(e,t){if(e=Y(e).abs(),t=Y(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,a=l[1];e.isEven()&&t.isEven();)n=F(V(e),V(t)),e=e.divide(n),t=t.divide(n),a=a.multiply(n);for(;e.isEven();)e=e.divide(V(e));do{for(;t.isEven();)t=t.divide(V(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return a.isUnit()?e:e.multiply(a)}u.prototype.bitLength=function(){var e=this;return e.compareTo(a(0))<0&&(e=e.negate().subtract(a(1))),0===e.compareTo(a(0))?a(0):a(G(e,a(2)).e).add(a(1))},c.prototype.bitLength=s.prototype.bitLength=u.prototype.bitLength;var B=function(e,t,n,r){n=n||o,e=String(e),r||(e=e.toLowerCase(),n=n.toLowerCase());var a,i=e.length,l=Math.abs(t),u={};for(a=0;a<n.length;a++)u[n[a]]=a;for(a=0;a<i;a++){if("-"!==(d=e[a])&&(d in u&&u[d]>=l)){if("1"===d&&1===l)continue;throw new Error(d+" is not a valid digit in base "+t+".")}}t=Y(t);var s=[],c="-"===e[0];for(a=c?1:0;a<e.length;a++){var d;if((d=e[a])in u)s.push(Y(u[d]));else{if("<"!==d)throw new Error(d+" is not a valid character");var p=a;do{a++}while(">"!==e[a]&&a<e.length);s.push(Y(e.slice(p+1,a)))}}return j(s,t,c)};function j(e,t,n){var r,a=l[0],o=l[1];for(r=e.length-1;r>=0;r--)a=a.add(e[r].times(o)),o=o.times(t);return n?a.negate():a}function z(e,t){if((t=a(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var r=!1;if(e.isNegative()&&t.isPositive()&&(r=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:r};for(var o,i=[],l=e;l.isNegative()||l.compareAbs(t)>=0;){o=l.divmod(t),l=o.quotient;var u=o.remainder;u.isNegative()&&(u=t.minus(u).abs(),l=l.next()),i.push(u.toJSNumber())}return i.push(l.toJSNumber()),{value:i.reverse(),isNegative:r}}function K(e,t,n){var r=z(e,t);return(r.isNegative?"-":"")+r.value.map((function(e){return function(e,t){return e<(t=t||o).length?t[e]:"<"+e+">"}(e,n)})).join("")}function Z(e){if(d(+e)){var t=+e;if(t===y(t))return i?new c(BigInt(t)):new s(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var a=r[1];if("+"===a[0]&&(a=a.slice(1)),(a=+a)!==y(a)||!d(a))throw new Error("Invalid integer: "+a+" is not a valid exponent.");var o=r[0],l=o.indexOf(".");if(l>=0&&(a-=o.length-l-1,o=o.slice(0,l)+o.slice(l+1)),a<0)throw new Error("Cannot include negative exponent part for integers");e=o+=new Array(a+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(i)return new c(BigInt(n?"-"+e:e));for(var p=[],f=e.length,v=f-7;f>0;)p.push(+e.slice(v,f)),(v-=7)<0&&(v=0),f-=7;return h(p),new u(p,n)}function Y(e){return"number"==typeof e?function(e){if(i)return new c(BigInt(e));if(d(e)){if(e!==y(e))throw new Error(e+" is not an integer.");return new s(e)}return Z(e.toString())}(e):"string"==typeof e?Z(e):"bigint"==typeof e?new c(e):e}u.prototype.toArray=function(e){return z(this,e)},s.prototype.toArray=function(e){return z(this,e)},c.prototype.toArray=function(e){return z(this,e)},u.prototype.toString=function(t,n){if(t===e&&(t=10),10!==t)return K(this,t,n);for(var r,a=this.value,o=a.length,i=String(a[--o]);--o>=0;)r=String(a[o]),i+="0000000".slice(r.length)+r;return(this.sign?"-":"")+i},s.prototype.toString=function(t,n){return t===e&&(t=10),10!=t?K(this,t,n):String(this.value)},c.prototype.toString=s.prototype.toString,c.prototype.toJSON=u.prototype.toJSON=s.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,s.prototype.valueOf=function(){return this.value},s.prototype.toJSNumber=s.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var Q=0;Q<1e3;Q++)l[Q]=Y(Q),Q>0&&(l[-Q]=Y(-Q));return l.one=l[1],l.zero=l[0],l.minusOne=l[-1],l.max=W,l.min=F,l.gcd=q,l.lcm=function(e,t){return e=Y(e).abs(),t=Y(t).abs(),e.divide(q(e,t)).multiply(t)},l.isInstance=function(e){return e instanceof u||e instanceof s||e instanceof c},l.randBetween=function(e,n,r){e=Y(e),n=Y(n);var a=r||Math.random,o=F(e,n),i=W(e,n).subtract(o).add(1);if(i.isSmall)return o.add(Math.floor(a()*i));for(var u=z(i,t).value,s=[],c=!0,d=0;d<u.length;d++){var p=c?u[d]+(d+1<u.length?u[d+1]/t:0):t,f=y(a()*p);s.push(f),f<u[d]&&(c=!1)}return o.add(l.fromArray(s,t,!1))},l.fromArray=function(e,t,n){return j(e.map(Y),Y(t||10),n)},l}();e.hasOwnProperty("exports")&&(e.exports=a),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{getState:function(){return j},lock:function(){return K},unlock:function(){return z}});var t={};n.r(t),n.d(t,{getMetadata:function(){return X}});var r={};n.r(r),n.d(r,{getEmailConfiguration:function(){return oe},updateForCurrentUser:function(){return ae}});var a={};n.r(a),n.d(a,{getDetailsForUniverseIds:function(){return ce}});var o={};n.r(o),n.d(o,{changeForCurrentUser:function(){return Se},resetSendPrompted:function(){return Te},validate:function(){return Ae}});var i={};n.r(i),n.d(i,{getAllForCurrentUser:function(){return Ue},updateForCurrentUser:function(){return He}});var l={};n.r(l),n.d(l,{getPuzzle:function(){return ze},verifyPuzzle:function(){return Ke}});var u={};n.r(u),n.d(u,{generateToken:function(){return et}});var s={};n.r(s),n.d(s,{answerQuestion:function(){return st},getQuestion:function(){return ut}});var c={};n.r(c),n.d(c,{getIconsForUniverseIds:function(){return yt}});var d={};n.r(d),n.d(d,{queryAndOverwriteResourcesForNamespace:function(){return Tt}});var p={};n.r(p),n.d(p,{getMetadata:function(){return Ot},getSecurityKeyOptions:function(){return Vt},getUserConfiguration:function(){return Rt},sendEmailCode:function(){return Pt},sendSmsCode:function(){return Ut},verifyAuthenticatorCode:function(){return Mt},verifyEmailCode:function(){return xt},verifyRecoveryCode:function(){return kt},verifySecurityKeyCredential:function(){return Gt},verifySmsCode:function(){return Ht}});var f={};n.r(f),n.d(f,{recordMetric:function(){return Bt}});var h={};n.r(h),n.d(h,{ActionType:function(){return nn},ErrorCode:function(){return rn},renderChallenge:function(){return Cn}});var v={};n.r(v),n.d(v,{ErrorCode:function(){return An},renderChallenge:function(){return Hn}});var y={};n.r(y),n.d(y,{ErrorCode:function(){return xn},renderChallenge:function(){return yr}});var m={};n.r(m),n.d(m,{ErrorCode:function(){return Xn},renderChallenge:function(){return Gr}});var E={};n.r(E),n.d(E,{ErrorCode:function(){return Ar},renderChallenge:function(){return ya}});var g={};n.r(g),n.d(g,{ActionType:function(){return Xr},ErrorCode:function(){return ea},MediaType:function(){return $r},renderChallenge:function(){return Co}});var b={};n.r(b),n.d(b,{ChallengeError:function(){return ul},ChallengeErrorKind:function(){return Io},ChallengeType:function(){return So},interceptChallenge:function(){return sl},parseChallengeSpecificProperties:function(){return il},renderChallenge:function(){return ll}});var C={};n.r(C),n.d(C,{ChallengeType:function(){return So},HybridTarget:function(){return Wi},renderChallengeFromQueryParameters:function(){return Ol}});var _,I,S=Roblox,T=n.n(S),A=React,N=n.n(A),w=ReactDOM,L=CoreUtilities,D=function(e){return{isError:!1,value:e}},O=D,R=function(e){return{isError:!0,error:e}},P=function(e,t){return e.isError?e:D(t(e.value))},x=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},k=function(e){return"object"!=typeof e?null:function(e){var t=[];if(!e||"object"!=typeof e)return[];var n=e.errors;return n instanceof Array?(n.forEach((function(e){if(e&&"object"==typeof e){var n=e.code;"number"==typeof n&&t.push(n)}})),t):[]}(e.data)[0]||null},U=function(e,t){return null==e?null:Object.values(e).includes(t)?t:null},H=function(e,t){return x(void 0,void 0,Promise,(function(){var n,r,a;return M(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e];case 1:return n=o.sent(),[2,O(n.data)];case 2:return r=o.sent(),a=k(r),[2,R(U(t,a))];case 3:return[2]}}))}))},V=null!==(_=S.EnvironmentUrls.authApi)&&void 0!==_?_:"URL_NOT_FOUND";!function(e){e[e.NO_ACCOUNT_PIN=1]="NO_ACCOUNT_PIN",e[e.ACCOUNT_LOCKED=2]="ACCOUNT_LOCKED",e[e.FLOODED=3]="FLOODED",e[e.INCORRECT_PIN=4]="INCORRECT_PIN"}(I||(I={}));var G,W,F={withCredentials:!0,url:V+"/v1/account/pin",timeout:1e4},q={withCredentials:!0,url:V+"/v1/account/pin/unlock",timeout:1e4},B={withCredentials:!0,url:V+"/v1/account/pin/lock",timeout:1e4},j=function(){return H(L.httpService.get(F),I)},z=function(e){return H(L.httpService.post(q,{pin:e}),I)},K=function(){return H(L.httpService.post(B),I)},Z=(null!==(G=S.EnvironmentUrls.apiGatewayCdnUrl)&&void 0!==G?G:"URL_NOT_FOUND")+"/captcha";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(W||(W={}));var Y,Q,J={url:Z+"/v1/metadata",timeout:1e4},X=function(){return H(L.httpService.get(J,{}),W)},$=null!==(Y=S.EnvironmentUrls.accountSettingsApi)&&void 0!==Y?Y:"URL_NOT_FOUND";!function(e){e[e.FEATURE_DISABLED=2]="FEATURE_DISABLED",e[e.TOO_MANY_ACCOUNTS_ON_EMAIL=3]="TOO_MANY_ACCOUNTS_ON_EMAIL",e[e.TOO_MANY_ATTEMPTS_TO_UPDATE_EMAIL=6]="TOO_MANY_ATTEMPTS_TO_UPDATE_EMAIL",e[e.INVALID_EMAIL_ADDRESS=9]="INVALID_EMAIL_ADDRESS"}(Q||(Q={}));var ee,te,ne={withCredentials:!0,url:$+"/v1/email",timeout:1e4},re={withCredentials:!0,url:$+"/v1/email",timeout:1e4},ae=function(e){return H(L.httpService.post(ne,{emailAddress:e,skipVerificationEmail:!0}),Q)},oe=function(){return H(L.httpService.get(re),Q)},ie=null!==(ee=S.EnvironmentUrls.gamesApi)&&void 0!==ee?ee:"URL_NOT_FOUND";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(te||(te={}));var le,ue,se={url:ie+"/v1/games",timeout:1e4},ce=function(e){return H(L.httpService.get(se,{universeIds:e}),te)},de=null!==(le=S.EnvironmentUrls.authApi)&&void 0!==le?le:"URL_NOT_FOUND";!function(e){e[e.FLOODED=2]="FLOODED",e[e.INVALID_PASSWORD=7]="INVALID_PASSWORD",e[e.INVALID_CURRENT_PASSWORD=8]="INVALID_CURRENT_PASSWORD",e[e.PIN_LOCKED=9]="PIN_LOCKED"}(ue||(ue={}));var pe,fe={withCredentials:!0,url:de+"/v2/user/passwords/change",timeout:1e4};!function(e){e[e.USER_DOES_NOT_HAVE_EMAIL=22]="USER_DOES_NOT_HAVE_EMAIL"}(pe||(pe={}));var he,ve={withCredentials:!0,url:de+"/v2/passwords/reset/send-prompted",timeout:1e4};!function(e){e[e.VALID_PASSWORD=0]="VALID_PASSWORD",e[e.WEAK_PASSWORD=1]="WEAK_PASSWORD",e[e.SHORT_PASSWORD=2]="SHORT_PASSWORD",e[e.PASSWORD_SAME_AS_USERNAME=3]="PASSWORD_SAME_AS_USERNAME",e[e.FORBIDDEN_PASSWORD=4]="FORBIDDEN_PASSWORD",e[e.DUMB_STRINGS=5]="DUMB_STRINGS"}(he||(he={}));var ye,me,Ee,ge,be,Ce={withCredentials:!0,url:de+"/v2/passwords/validate",timeout:1e4},_e=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},Ie=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Se=function(e,t){return H(L.httpService.post(fe,{currentPassword:e,newPassword:t}),ue)},Te=function(){return H(L.httpService.post(ve),pe)},Ae=function(e,t){return _e(void 0,void 0,Promise,(function(){return Ie(this,(function(n){return[2,H(L.httpService.post(Ce,{username:e,password:t}),null).then((function(e){return P(e,(function(e){return U(he,e.code)}))}))]}))}))},Ne=(null!==(ye=S.EnvironmentUrls.apiGatewayUrl)&&void 0!==ye?ye:"URL_NOT_FOUND")+"/account-security-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.PROMPT_ASSIGNMENT_WAS_NOT_UPDATED=3]="PROMPT_ASSIGNMENT_WAS_NOT_UPDATED",e[e.UNKNOWN_PROMPT_TYPE=4]="UNKNOWN_PROMPT_TYPE"}(me||(me={})),function(e){e.TEXT_ONLY_BANNER="DISPLAY_TYPE_TEXT_ONLY_BANNER"}(Ee||(Ee={})),function(e){e.GLOBAL="PAGE_RESTRICTION_GLOBAL",e.HOME_PAGE_ONLY="PAGE_RESTRICTION_HOME_PAGE"}(ge||(ge={})),function(e){e.CHANGE_PASSWORD__SUSPECTED_COMPROMISE="PROMPT_TYPE_CHANGE_PASSWORD__SUSPECTED_COMPROMISE",e.CHANGE_PASSWORD__BREACHED_CREDENTIAL="PROMPT_TYPE_CHANGE_PASSWORD__BREACHED_CREDENTIAL",e.AUTHENTICATOR_UPSELL="PROMPT_TYPE_AUTHENTICATOR_UPSELL",e.ACCOUNT_RESTORES_POLICY_UPDATE="PROMPT_TYPE_ACCOUNT_RESTORES_POLICY_UPDATE",e.ACCOUNT_RESTORES_POLICY_UPDATE_V2="PROMPT_TYPE_ACCOUNT_RESTORES_POLICY_UPDATE_V2",e.BROADER_AUTHENTICATOR_UPSELL="PROMPT_TYPE_BROADER_AUTHENTICATOR_UPSELL"}(be||(be={}));var we,Le={withCredentials:!0,url:Ne+"/v1/prompt-assignments",timeout:1e4};!function(e){e.DISMISS_PROMPT="DISMISS_PROMPT",e.DISABLE_PROMPT="DISABLE_PROMPT"}(we||(we={}));var De,Oe,Re,Pe={withCredentials:!0,url:Ne+"/v1/prompt-assignments",timeout:1e4},xe=function(){return(xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Me=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},ke=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ue=function(){return Me(void 0,void 0,Promise,(function(){var e;return ke(this,(function(t){switch(t.label){case 0:return[4,H(L.httpService.get(Le,{shouldReturnMetadata:!0}),me)];case 1:return(e=t.sent()).isError?[2,e]:[2,e=xe(xe({},e),{value:e.value.filter((function(e){return e.isGeneric?Object.values(Ee).includes(e.metadata.displayType):Object.values(be).includes(e.promptType)}))})]}}))}))},He=function(e,t){return H(L.httpService.post(Pe,{action:e,promptType:t}),me)},Ve=(null!==(De=S.EnvironmentUrls.apiGatewayUrl)&&void 0!==De?De:"URL_NOT_FOUND")+"/proof-of-work-service";!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REQUEST_INVALID=1]="REQUEST_INVALID",e[e.SESSION_INACTIVE=2]="SESSION_INACTIVE"}(Oe||(Oe={})),function(e){e[e.TIME_LOCK=0]="TIME_LOCK"}(Re||(Re={}));var Ge,We,Fe={withCredentials:!0,url:Ve+"/v1/pow-puzzle",timeout:1e4},qe={withCredentials:!0,url:Ve+"/v1/pow-puzzle",timeout:1e4},Be=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},je=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},ze=function(e){return H(L.httpService.get(Fe,{sessionID:e}),Oe)},Ke=function(e,t){return Be(void 0,void 0,Promise,(function(){return je(this,(function(n){return[2,H(L.httpService.post(qe,{sessionID:e,solution:t}),Oe)]}))}))},Ze=(null!==(Ge=S.EnvironmentUrls.apiGatewayUrl)&&void 0!==Ge?Ge:"URL_NOT_FOUND")+"/reauthentication-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.PASSWORD_INCORRECT=3]="PASSWORD_INCORRECT"}(We||(We={}));var Ye,Qe,Je,Xe,$e={withCredentials:!0,url:Ze+"/v1/token/generate",timeout:1e4},et=function(e){return H(L.httpService.post($e,{password:e}),We)},tt=(null!==(Ye=S.EnvironmentUrls.apiGatewayUrl)&&void 0!==Ye?Ye:"URL_NOT_FOUND")+"/account-security-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.SECURITY_QUESTIONS_DISABLED=3]="SECURITY_QUESTIONS_DISABLED",e[e.SESSION_INACTIVE=4]="SESSION_INACTIVE",e[e.QUESTION_NOT_FOUND=5]="QUESTION_NOT_FOUND",e[e.ANSWER_WRONG_FORMAT=6]="ANSWER_WRONG_FORMAT"}(Qe||(Qe={})),function(e){e[e.INVALID=0]="INVALID",e[e.MOST_RECENT_GAMES_PLAYED=1]="MOST_RECENT_GAMES_PLAYED"}(Je||(Je={})),function(e){e[e.PICK_ALL_CORRECT_CHOICES=0]="PICK_ALL_CORRECT_CHOICES",e[e.PICK_C_CORRECT_CHOICES=1]="PICK_C_CORRECT_CHOICES"}(Xe||(Xe={}));var nt,rt,at,ot,it={withCredentials:!0,url:tt+"/v1/security-question",timeout:1e4},lt={withCredentials:!0,url:tt+"/v1/security-question",timeout:1e4},ut=function(e,t){return H(L.httpService.get(it,{userId:e,sessionId:t}),Qe)},st=function(e,t,n){return H(L.httpService.post(lt,{userId:e,answer:t,sessionId:n}),Qe)},ct=null!==(nt=S.EnvironmentUrls.thumbnailsApi)&&void 0!==nt?nt:"URL_NOT_FOUND";!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(rt||(rt={})),function(e){e.PNG="Png",e.JPEG="Jpeg"}(at||(at={})),function(e){e.ERROR="Error",e.COMPLETED="Completed",e.IN_REVIEW="InReview",e.PENDING="Pending",e.BLOCKED="Blocked"}(ot||(ot={}));var dt,pt,ft,ht,vt={url:ct+"/v1/games/icons",timeout:1e4},yt=function(e,t,n,r){return H(L.httpService.get(vt,{universeIds:e,size:t,format:n,isCircular:r}),rt)},mt="https://translations."+(null!==(dt=S.EnvironmentUrls.domain)&&void 0!==dt?dt:"URL_NOT_FOUND");!function(e){e.EN_US="en_us"}(pt||(pt={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.INVALID_LOCALE=1]="INVALID_LOCALE",e[e.CONSUMER_TYPE_NOT_SUPPORTED=2]="CONSUMER_TYPE_NOT_SUPPORTED",e[e.TRANSLATIONS_DO_NOT_EXIST=3]="TRANSLATIONS_DO_NOT_EXIST",e[e.FEATURE_DISABLED=4]="FEATURE_DISABLED"}(ft||(ft={})),function(e){e.Web="Web"}(ht||(ht={}));var Et,gt,bt={withCredentials:!0,url:mt+"/v1/translations/language-resources",timeout:1e4},Ct=function(){return(Ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},_t=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},It=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},St=function(e,t,n,r){return _t(void 0,void 0,Promise,(function(){var a;return It(this,(function(o){switch(o.label){case 0:return[4,H(L.httpService.get(bt,{consumerType:e,contentNamespace:t,keys:n,localeCode:r}),ft)];case 1:return!(a=o.sent()).isError||a.error!==ft.INVALID_LOCALE&&a.error!==ft.TRANSLATIONS_DO_NOT_EXIST||r===pt.EN_US?[2,a]:[2,St(e,t,n,pt.EN_US)]}}))}))},Tt=function(e,t,n){return void 0===n&&(n=e),_t(void 0,void 0,Promise,(function(){var r,a;return It(this,(function(o){switch(o.label){case 0:return[4,St(ht.Web,e,t)];case 1:return(r=o.sent()).isError?[2,r]:((a=T()||{}).LangDynamic=a.LangDynamic||{},a.LangDynamic[n]=n!==e?Ct(Ct({},a.LangDynamic[n]),r.value):r.value,[2,O(void 0)])}}))}))},At=null!==(Et=S.EnvironmentUrls.twoStepVerificationApi)&&void 0!==Et?Et:"URL_NOT_FOUND";!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.INVALID_CHALLENGE_ID=1]="INVALID_CHALLENGE_ID",e[e.INVALID_USER_ID=2]="INVALID_USER_ID",e[e.INVALID_EMAIL=3]="INVALID_EMAIL",e[e.INVALID_PASSWORD=4]="INVALID_PASSWORD",e[e.TOO_MANY_REQUESTS=5]="TOO_MANY_REQUESTS",e[e.PIN_LOCKED=6]="PIN_LOCKED",e[e.FEATURE_DISABLED=7]="FEATURE_DISABLED",e[e.NOT_ALLOWED=8]="NOT_ALLOWED",e[e.INVALID_CONFIGURATION=9]="INVALID_CONFIGURATION",e[e.INVALID_CODE=10]="INVALID_CODE",e[e.CONFIGURATION_ALREADY_ENABLED=11]="CONFIGURATION_ALREADY_ENABLED",e[e.INVALID_SETUP_TOKEN=12]="INVALID_SETUP_TOKEN"}(gt||(gt={}));var Nt,wt,Lt,Dt={url:At+"/v1/metadata",withCredentials:!0,timeout:1e4},Ot=function(e){return H(L.httpService.get(Dt,e||{}),gt)},Rt=function(e,t){return H(L.httpService.get(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/configuration",timeout:1e4}}(e),t||{}),gt)},Pt=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/email/send-code",timeout:1e4}}(e),t),gt)},xt=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/email/verify",timeout:1e4}}(e),t),gt)},Mt=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/authenticator/verify",timeout:1e4}}(e),t),gt)},kt=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/recovery-codes/verify",timeout:1e4}}(e),t),gt)},Ut=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/sms/send-code",timeout:1e4}}(e),t),gt)},Ht=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/sms/verify",timeout:1e4}}(e),t),gt)},Vt=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/security-key/verify-start",timeout:1e4}}(e),t),gt)},Gt=function(e,t){return H(L.httpService.post(function(e){return{withCredentials:!0,url:At+"/v1/users/"+e+"/challenges/security-key/verify-finish",timeout:1e5}}(e),t),gt)},Wt=(null!==(Nt=S.EnvironmentUrls.apiGatewayUrl)&&void 0!==Nt?Nt:"URL_NOT_FOUND")+"/account-security-service";!function(e){e[e.UNKNOWN=1]="UNKNOWN",e[e.REQUEST_TYPE_WAS_INVALID=2]="REQUEST_TYPE_WAS_INVALID",e[e.INVAID_METRIC_NAME=3]="INVAID_METRIC_NAME",e[e.INVALID_METRIC_LABELS=4]="INVALID_METRIC_LABELS"}(wt||(wt={})),function(e){e.Event2sv="event_2sv",e.SolveTime2sv="solve_time_2sv"}(Lt||(Lt={}));var Ft,qt={withCredentials:!0,url:Wt+"/v1/metrics/record",timeout:1e4},Bt=function(e){return H(L.httpService.post(qt,e),wt)},jt=function(){this.accountPin=e,this.captcha=t,this.email=r,this.games=a,this.metrics=f,this.password=o,this.promptAssignments=i,this.securityQuestions=s,this.reauthentication=u,this.thumbnails=c,this.translations=d,this.twoStepVerification=p,this.proofOfWork=l},zt=ReactUtilities,Kt="Captcha:",Zt={common:[],feature:"Authentication.Captcha"},Yt=["Action.PleaseTryAgain","Action.Reload","Message.Error.Default"],Qt=["Description.VerifyingYouAreNotBot"],Jt=ReactStyleGuide,Xt=function(e){var t=e.titleText,n=e.children;return N().createElement("div",{className:"inline-challenge"},t&&N().createElement("h4",{className:"inline-challenge-title"},t),N().createElement("div",{className:"inline-challenge-content"},n))},$t=function(e){var t=e.children;return N().createElement("div",{className:"inline-challenge-body"},t)},en=function(e){var t=e.positiveButton,n=e.negativeButton;return N().createElement("div",{className:"inline-challenge-footer"},null!==n&&N().createElement("button",{type:"button",className:"btn-secondary-md inline-challenge-footer-button","aria-label":n.label,disabled:!n.enabled,onClick:n.action},n.content),N().createElement("button",{type:"button",className:"btn-cta-md inline-challenge-footer-button","aria-label":t.label,disabled:!t.enabled,onClick:t.action},t.content))},tn=function(e){var t=e.positiveButton,n=e.negativeButton;return N().createElement(Jt.Modal.Footer,null,null!==n&&N().createElement("button",{type:"button",className:"btn-secondary-md modal-modern-footer-button","aria-label":n.label,disabled:!n.enabled,onClick:n.action},n.content),N().createElement("button",{type:"button",className:"btn-cta-md modal-modern-footer-button","aria-label":t.label,disabled:!t.enabled,onClick:t.action},t.content))};!function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=2]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=3]="SHOW_MODAL_CHALLENGE"}(Ft||(Ft={}));var nn,rn,an=function(){return(an=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},on=function(e,t){var n,r=an({},e);switch(t.type){case Ft.SET_CHALLENGE_COMPLETED:return r.onChallengeCompletedData=t.onChallengeCompletedData,r.isModalVisible=!1,r;case Ft.SET_CHALLENGE_INVALIDATED:return r.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:(n=e.resources,t.errorCode,n.Message.Error.Default)},r.isModalVisible=!1,r;case Ft.HIDE_MODAL_CHALLENGE:return r.isModalVisible=!1,r;case Ft.SHOW_MODAL_CHALLENGE:return r.isModalVisible=!0,r;default:return e}},ln=(0,A.createContext)(null),un=function(e){var t=e.actionType,n=e.appType,r=e.renderInline,a=e.dataExchangeBlob,o=e.unifiedCaptchaId,i=e.requestService,l=e.translate,u=e.onChallengeDisplayed,s=e.onChallengeCompleted,c=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned,p=e.children,f=(0,A.useState)((function(){return function(e){return{Action:{PleaseTryAgain:e("Action.PleaseTryAgain"),Reload:e("Action.Reload")},Description:{VerifyingYouAreNotBot:e("Description.VerifyingYouAreNotBot")},Message:{Error:{Default:e("Message.Error.Default")}}}}(l)}))[0],h=(0,A.useState)((function(){return{actionType:t,appType:n,dataExchangeBlob:a,unifiedCaptchaId:o,renderInline:r,resources:f,requestService:i,onChallengeDisplayed:u,onModalChallengeAbandoned:d,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!1}}))[0],v=(0,A.useReducer)(on,h),y=v[0],m=v[1];return(0,A.useEffect)((function(){null!==y.onChallengeCompletedData&&null===y.onChallengeInvalidatedData&&s(y.onChallengeCompletedData)}),[y.onChallengeCompletedData,y.onChallengeInvalidatedData,s]),(0,A.useEffect)((function(){null!==y.onChallengeInvalidatedData&&null===y.onChallengeCompletedData&&c(y.onChallengeInvalidatedData)}),[y.onChallengeCompletedData,y.onChallengeInvalidatedData,c]),N().createElement(ln.Provider,{value:{state:y,dispatch:m}},p)},sn=function(){var e=(0,A.useContext)(ln);if(null===e)throw new Error("CaptchaContext was not provided in the current scope");return e};!function(e){e.Login="Login",e.AppLogin="AppLogin",e.Signup="Signup",e.AppSignup="AppSignup",e.JoinGroup="JoinGroup",e.GroupWallPost="GroupWallPost",e.ResetPassword="ResetPassword",e.ToyCodeRedeem="ToyCodeRedeem",e.GameCardRedeem="GameCardRedeem",e.FollowUser="FollowUser",e.Generic="Generic",e.SupportRequest="SupportRequest"}(nn||(nn={})),function(e){e[e.UNKNOWN=0]="UNKNOWN"}(rn||(rn={}));var cn,dn,pn=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},fn=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},hn={},vn=((cn=document.createElement("div")).className="challenge-captcha-body",cn.id="challenge-captcha-element",cn),yn=function(){var e=sn(),t=e.state,n=t.actionType,r=t.appType,a=t.dataExchangeBlob,o=t.unifiedCaptchaId,i=t.renderInline,l=t.resources,u=t.requestService,s=t.onChallengeDisplayed,c=t.onModalChallengeAbandoned,d=t.isModalVisible,p=e.dispatch,f=(0,A.useState)(!0),h=f[0],v=f[1],y=(0,A.useState)(null),m=y[0],E=y[1],g=function(){p({type:Ft.HIDE_MODAL_CHALLENGE}),null!==c&&c((function(){return p({type:Ft.SHOW_MODAL_CHALLENGE})}))},b=function(){return pn(void 0,void 0,void 0,(function(){var e,t,i;return fn(this,(function(c){switch(c.label){case 0:return v(!0),E(null),[4,u.captcha.getMetadata()];case 1:return(e=c.sent()).isError?(E(l.Message.Error.Default+" "+l.Action.PleaseTryAgain),v(!1),[2]):(t=e.value.funCaptchaPublicKeys,i=[],Object.keys(S.CaptchaConstants.funCaptchaPublicKeyMap).forEach((function(e){var n=e,r=S.CaptchaConstants.funCaptchaPublicKeyMap[n],a=t[r];void 0!==a&&i.push({Type:n,PublicKey:a})})),S.FunCaptcha.addCaptchaTypes(i,!1),null!==r&&S.FunCaptcha.setPerAppTypeLoggingEnabled(!0,r),Object.assign(hn,{shownCb:function(){v(!1),p({type:Ft.SHOW_MODAL_CHALLENGE}),s({displayed:!0})},errorCb:function(){p({type:Ft.SET_CHALLENGE_INVALIDATED,errorCode:rn.UNKNOWN})},successCb:function(e,t){p({type:Ft.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{captchaToken:e,captchaId:t}})}}),S.FunCaptcha.render(vn.id,{cType:n,inputParams:{dataExchange:a,unifiedCaptchaId:o},returnTokenInSuccessCb:!0,shownCb:function(){return hn.shownCb&&hn.shownCb()},errorCb:function(e){return hn.errorCb&&hn.errorCb(e)},successCb:function(e,t){return hn.successCb&&hn.successCb(e,t)}}),[2])}}))}))};(0,A.useEffect)((function(){b()}),[]);var C,_=(C=vn,N().createElement("div",{ref:function(e){return null==e?void 0:e.insertAdjacentElement("afterend",C)}})),I={content:l.Action.Reload,label:l.Action.Reload,enabled:null!==m,action:b};return i?N().createElement(Xt,{titleText:l.Description.VerifyingYouAreNotBot},N().createElement($t,null,null!==m&&N().createElement("p",{className:"challenge-captcha-body challenge-captcha-error-body"},m),h&&N().createElement("span",{className:"spinner spinner-default spinner-no-margin challenge-captcha-body"}),null===m&&_),null!==m&&N().createElement(en,{positiveButton:I,negativeButton:null})):N().createElement(A.Fragment,null,!d&&N().createElement("div",{style:{display:"none"}},_),N().createElement(Jt.Modal,{className:"modal-modern modal-modern-challenge-captcha",show:d,onHide:g,backdrop:"static"},N().createElement(Jt.Modal.Body,null,N().createElement("button",{type:"button",className:"challenge-captcha-close-button",onClick:g,disabled:!1},N().createElement("span",{className:"icon-close"})),null!==m&&N().createElement("p",{className:"challenge-captcha-body challenge-captcha-error-body"},m),h&&N().createElement("span",{className:"spinner spinner-default spinner-no-margin challenge-captcha-body"}),null===m&&_),null!==m&&N().createElement(tn,{positiveButton:I,negativeButton:null})))},mn=(0,zt.withTranslations)((function(e){var t=e.actionType,n=e.appType,r=e.dataExchangeBlob,a=e.unifiedCaptchaId,o=e.renderInline,i=e.requestService,l=e.translate,u=e.onChallengeDisplayed,s=e.onChallengeCompleted,c=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned;return N().createElement(un,{actionType:t,appType:n,dataExchangeBlob:r,unifiedCaptchaId:a,renderInline:o,requestService:i,translate:l,onChallengeDisplayed:u,onChallengeCompleted:s,onChallengeInvalidated:c,onModalChallengeAbandoned:d},N().createElement(yn,null))}),Zt),En=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},gn=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},bn=new jt,Cn=function(e){var t=e.containerId,n=e.actionType,r=e.appType,a=e.dataExchangeBlob,o=e.unifiedCaptchaId,i=e.renderInline,l=e.shouldDynamicallyLoadTranslationResources,u=e.onChallengeDisplayed,s=e.onChallengeCompleted,c=e.onChallengeInvalidated,d=e.onModalChallengeAbandoned;return En(void 0,void 0,void 0,(function(){var e,p,f,h;return gn(this,(function(v){switch(v.label){case 0:return null===(e=document.getElementById(t))?[3,4]:((0,w.unmountComponentAtNode)(e),l?[4,bn.translations.queryAndOverwriteResourcesForNamespace(Zt.feature,Yt)]:[3,3]);case 1:return(p=v.sent()).isError?(console.error(Kt,"Got error code "+((null===(f=p.error)||void 0===f?void 0:f.toString())||"null")+" loading translations"),[2,!1]):[4,bn.translations.queryAndOverwriteResourcesForNamespace("Feature.ProofOfWorkChallenge",Qt,Zt.feature)];case 2:if((p=v.sent()).isError)return console.error(Kt,"Got error code "+((null===(h=p.error)||void 0===h?void 0:h.toString())||"null")+" loading translations"),[2,!1];v.label=3;case 3:return(0,w.render)(N().createElement(mn,{actionType:n,appType:r,dataExchangeBlob:a,unifiedCaptchaId:o,renderInline:i,requestService:bn,onChallengeDisplayed:u,onChallengeCompleted:s,onChallengeInvalidated:c,onModalChallengeAbandoned:d}),e),[2,!0];case 4:return[2,Promise.resolve(!1)]}}))}))},_n={common:[],feature:"Feature.ForceAuthenticator"},In=["Action.Setup","Description.Reason","Description.SetupAuthenticator","Header.TurnOnAuthenticator"];!function(e){e.BACK="BACK",e.CLOSE="CLOSE",e.HIDDEN="HIDDEN"}(dn||(dn={}));var Sn,Tn=function(e){var t=e.headerText,n=e.buttonType,r=e.buttonAction,a=e.buttonEnabled,o=e.headerInfo;return N().createElement(Jt.Modal.Header,{useBaseBootstrapComponent:!0},function(e,t,n){switch(e){case dn.BACK:return N().createElement("button",{type:"button",className:"modal-modern-header-button",onClick:t,disabled:!n},N().createElement("span",{className:"icon-back"}));case dn.CLOSE:return N().createElement("button",{type:"button",className:"modal-modern-header-button",onClick:t,disabled:!n},N().createElement("span",{className:"icon-close"}));case dn.HIDDEN:default:return N().createElement("div",null)}}(n,r,a),N().createElement(Jt.Modal.Title,null,t),N().createElement("div",{className:"modal-modern-header-info"},o))};!function(e){e[e.HIDE_MODAL_CHALLENGE=0]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=1]="SHOW_MODAL_CHALLENGE"}(Sn||(Sn={}));var An,Nn=function(){return(Nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},wn=function(e,t){var n=Nn({},e);switch(t.type){case Sn.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Sn.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}},Ln=(0,A.createContext)(null),Dn=function(e){var t=e.renderInline,n=e.translate,r=e.onModalChallengeAbandoned,a=e.children,o=(0,A.useState)((function(){return function(e){return{Description:{SetupAuthenticator:e("Description.SetupAuthenticator"),Reason:e("Description.Reason")},Header:{TurnOnAuthenticator:e("Header.TurnOnAuthenticator")},Action:{Setup:e("Action.Setup")}}}(n)}))[0],i=(0,A.useState)((function(){return{renderInline:t,resources:o,onModalChallengeAbandoned:r,isModalVisible:!0}}))[0],l=(0,A.useReducer)(wn,i),u=l[0],s=l[1];return N().createElement(Ln.Provider,{value:{state:u,dispatch:s}},a)},On=function(){var e=(0,A.useContext)(Ln);if(null===e)throw new Error("ForceAuthenticatorContext was not provided in the current scope");return e},Rn=function(){var e=On(),t=e.state,n=t.renderInline,r=t.resources,a=t.onModalChallengeAbandoned,o=t.isModalVisible,i=e.dispatch,l=function(){i({type:Sn.HIDE_MODAL_CHALLENGE}),null!==a&&a((function(){return i({type:Sn.SHOW_MODAL_CHALLENGE})}))},u={content:r.Action.Setup,label:r.Action.Setup,enabled:!0,action:function(){l(),window.open("/my/account#!/security?src=forceauthenticator","_self")}},s=function(){var e=n?$t:Jt.Modal.Body,t=n?en:tn,a=n?"inline-challenge-lock-icon":"modal-lock-icon",o=n?"inline-challenge-margin-bottom-sm":"modal-margin-bottom-sm",i=n?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return N().createElement(N().Fragment,null,N().createElement(e,null,N().createElement("div",{className:a}),N().createElement("p",{className:o},r.Description.SetupAuthenticator),N().createElement("p",{className:i},r.Description.Reason)),N().createElement(t,{positiveButton:u,negativeButton:null}))};return n?N().createElement(Xt,{titleText:r.Header.TurnOnAuthenticator},s()):N().createElement(Jt.Modal,{className:"modal-modern",show:o,onHide:l,backdrop:"static"},N().createElement(Tn,{headerText:r.Header.TurnOnAuthenticator,buttonType:dn.CLOSE,buttonAction:l,buttonEnabled:!0,headerInfo:null}),s())},Pn=(0,zt.withTranslations)((function(e){var t=e.renderInline,n=e.translate,r=e.onModalChallengeAbandoned;return N().createElement(Dn,{renderInline:t,translate:n,onModalChallengeAbandoned:r},N().createElement(Rn,null))}),_n);!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(An||(An={}));var xn,Mn=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},kn=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Un=new jt,Hn=function(e){var t=e.containerId,n=e.renderInline,r=e.shouldDynamicallyLoadTranslationResources,a=e.onModalChallengeAbandoned;return Mn(void 0,void 0,void 0,(function(){var e,o,i;return kn(this,(function(l){switch(l.label){case 0:return null===(e=document.getElementById(t))?[3,3]:((0,w.unmountComponentAtNode)(e),r?[4,Un.translations.queryAndOverwriteResourcesForNamespace(_n.feature,In)]:[3,2]);case 1:if((o=l.sent()).isError)return console.error("ForceAuthenticator:","Got error code "+((null===(i=o.error)||void 0===i?void 0:i.toString())||"null")+" loading translations"),[2,!1];l.label=2;case 2:return(0,w.render)(N().createElement(Pn,{renderInline:n,onModalChallengeAbandoned:a}),e),[2,!0];case 3:return[2,!1]}}))}))},Vn={common:["CommonUI.Messages"],feature:"Feature.ProofOfWorkChallenge"},Gn=["Description.VerificationError","Description.VerificationSuccess","Description.VerifyingYouAreNotBot"],Wn="accountSecurityChallengeProofOfWorkEvent",Fn={challengeInitialized:"challengeInitialized",puzzleInitialized:"puzzleInitialized",puzzleCompleted:"puzzleCompleted",challengeCompleted:"challengeCompleted",challengeInvalidated:"challengeInvalidated",challengeAbandoned:"challengeAbandoned"},qn={challengeInitialized:"ChallengeInitialized",puzzleInitialized:"PuzzleInitialized",puzzleCompleted:"PuzzleCompleted",challengeCompleted:"ChallengeCompleted",challengeInvalidated:"ChallengeInvalidated",challengeAbandoned:"ChallengeAbandoned"},Bn={puzzleWorkingTime:"PuzzleWorkingTime",challengeSolveTime:"ChallengeSolveTime"},jn=n(135),zn=n.n(jn),Kn=function(){function e(e){this.n=zn()(e.N),this.a=zn()(e.A),this.t=e.T,this.curBase=this.a,this.curT=0,this.isCancelled=!1}return e.prototype.run=function(e,t){for(var n=Math.max(1,this.t/1e3);!this.isDone();)this.doRepeatedSquaring(n),e(this.progress());t(this.answer())},e.prototype.runAsync=function(e,t,n){var r=this,a=function(){r.doRepeatedSquaring(n||200),e(r.progress()),r.isCancelled||(r.isDone()?t(r.answer()):setTimeout(a,0))};setTimeout(a,0)},e.prototype.cancelRunAsync=function(){this.isCancelled=!0},e.prototype.doRepeatedSquaring=function(e){for(var t=void 0!==e?Math.min(this.t,this.curT+e):this.t;this.curT<t;this.curT+=1)this.curBase=this.curBase.square().mod(this.n)},e.prototype.answer=function(){return this.isDone()?this.curBase.toString():null},e.prototype.progress=function(){return this.curT/this.t},e.prototype.isDone=function(){return this.curT===this.t},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SESSION_INVALID=1]="SESSION_INVALID",e[e.ANSWER_INVALID=2]="ANSWER_INVALID",e[e.WORKER_LOAD_ERROR=3]="WORKER_LOAD_ERROR"}(xn||(xn={}));var Zn,Yn,Qn=function(e){switch(e){case Oe.SESSION_INACTIVE:return xn.SESSION_INVALID;default:return xn.UNKNOWN}};!function(e){e[e.INITIAL=0]="INITIAL",e[e.READY_TO_COMPUTE=1]="READY_TO_COMPUTE",e[e.COMPUTING=2]="COMPUTING",e[e.COMPUTING_DONE=3]="COMPUTING_DONE",e[e.VERIFIED_CORRECT=4]="VERIFIED_CORRECT",e[e.VERIFIED_INCORRECT=5]="VERIFIED_INCORRECT"}(Zn||(Zn={})),function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=2]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=3]="SHOW_MODAL_CHALLENGE"}(Yn||(Yn={}));var Jn,Xn,$n=function(){return($n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},er=function(e,t){var n=$n({},e);switch(t.type){case Yn.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n.isModalVisible=!1,n;case Yn.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData=t.onChallengeInvalidatedData,n.isModalVisible=!1,n;case Yn.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Yn.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}},tr=(0,A.createContext)(null),nr=function(e){var t=e.sessionId,n=e.renderInline,r=e.eventService,a=e.metricsService,o=e.requestService,i=e.translate,l=e.onChallengeCompleted,u=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned,c=e.children,d=(0,A.useState)((function(){return function(e){return{Description:{VerificationError:e("Description.VerificationError"),VerificationSuccess:e("Description.VerificationSuccess"),VerifyingYouAreNotBot:e("Description.VerifyingYouAreNotBot")}}}(i)}))[0],p=(0,A.useState)((function(){return{sessionId:t,renderInline:n,resources:d,eventService:r,metricsService:a,requestService:o,onModalChallengeAbandoned:s,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!0}}))[0],f=(0,A.useReducer)(er,p),h=f[0],v=f[1];return(0,A.useEffect)((function(){null!==h.onChallengeCompletedData&&null===h.onChallengeInvalidatedData&&(r.sendChallengeCompletedEvent(),a.fireChallengeCompletedEvent(),l(h.onChallengeCompletedData))}),[r,a,h.onChallengeCompletedData,h.onChallengeInvalidatedData,l]),(0,A.useEffect)((function(){null!==h.onChallengeInvalidatedData&&null===h.onChallengeCompletedData&&(r.sendChallengeInvalidatedEvent(),a.fireChallengeInvalidatedEvent(),u(h.onChallengeInvalidatedData))}),[r,a,h.onChallengeCompletedData,h.onChallengeInvalidatedData,u]),N().createElement(tr.Provider,{value:{state:h,dispatch:v}},c)},rr=function(){var e=(0,A.useContext)(tr);if(null===e)throw new Error("ProofOfWorkContext was not provided in the current scope");return e},ar=(null!==(Jn=S.EnvironmentUrls.websiteUrl)&&void 0!==Jn?Jn:"URL_NOT_FOUND")+"/worker-resources/script/?component=ChallengeWebWorkers",or=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},ir=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},lr=function(e){return e.toFixed(0)+"%"},ur=function(){var e=rr(),t=e.state,n=t.sessionId,r=t.renderInline,a=t.resources,o=t.eventService,i=t.metricsService,l=t.requestService,u=t.onModalChallengeAbandoned,s=t.isModalVisible,c=e.dispatch,d=(0,A.useState)(null),p=d[0],f=d[1],h=(0,A.useState)(null),v=h[0],y=h[1],m=(0,A.useState)(Zn.INITIAL),E=m[0],g=m[1],b=(0,A.useState)(0),C=b[0],_=b[1],I=(0,A.useRef)(null),S=(0,A.useRef)(null),T=function(){try{I.current=new Worker(ar)}catch(e){I.current=null}f(null),y(null),g(Zn.INITIAL)},w=function(){return or(void 0,void 0,void 0,(function(){return ir(this,(function(e){switch(e.label){case 0:switch(E){case Zn.READY_TO_COMPUTE:return[3,1];case Zn.COMPUTING_DONE:return[3,2]}return[3,4];case 1:return o.sendPuzzleInitializedEvent(),i.firePuzzleInitializedEvent(),function(){if(null==p||E!==Zn.READY_TO_COMPUTE)return g(Zn.VERIFIED_INCORRECT),void c({type:Yn.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:xn.UNKNOWN,errorMessage:a.Description.VerificationError}});if(null==I.current){var e=JSON.parse(p);return S.current=new Kn(e),g(Zn.COMPUTING),void S.current.runAsync((function(e){_(e)}),(function(e){y(e),g(Zn.COMPUTING_DONE)}))}g(Zn.COMPUTING),I.current.onmessage=function(e){var t="object"==typeof e.data?e.data:JSON.parse(e.data);_(t.progress),t.answer&&(y(t.answer),g(Zn.COMPUTING_DONE))},I.current.postMessage(p)}(),[3,5];case 2:return o.sendPuzzleCompletedEvent(),i.firePuzzleCompletedEvent(),[4,or(void 0,void 0,void 0,(function(){var e;return ir(this,(function(t){switch(t.label){case 0:return null==v?[2]:[4,l.proofOfWork.verifyPuzzle(n,v)];case 1:return(e=t.sent()).isError?(c({type:Yn.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:Qn(e.error),errorMessage:a.Description.VerificationError}}),[2]):(e.value.answerCorrect?(g(Zn.VERIFIED_CORRECT),c({type:Yn.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:e.value.redemptionToken}})):(g(Zn.VERIFIED_INCORRECT),c({type:Yn.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:xn.ANSWER_INVALID,errorMessage:a.Description.VerificationError}})),[2])}}))}))];case 3:return e.sent(),[3,5];case 4:return[3,5];case 5:return[2]}}))}))},L=function(){c({type:Yn.HIDE_MODAL_CHALLENGE}),I.current&&I.current.terminate(),S.current&&S.current.cancelRunAsync(),T(),null!==u&&u((function(){return c({type:Yn.SHOW_MODAL_CHALLENGE})}))};(0,A.useEffect)((function(){return or(void 0,void 0,void 0,(function(){var e;return ir(this,(function(t){switch(t.label){case 0:return T(),[4,l.proofOfWork.getPuzzle(n)];case 1:return(e=t.sent()).isError?(c({type:Yn.SET_CHALLENGE_INVALIDATED,onChallengeInvalidatedData:{errorCode:xn.UNKNOWN,errorMessage:a.Description.VerificationError}}),[2]):(f(e.value.artifacts),g(Zn.READY_TO_COMPUTE),[2])}}))})),function(){I.current&&(I.current.terminate(),I.current=null)}}),[]),(0,A.useEffect)((function(){w()}),[E]);var D=function(){var e=r?$t:Jt.Modal.Body,t=100*(C||0);return N().createElement(N().Fragment,null,N().createElement(e,null,N().createElement("div",{className:"pow-body"},N().createElement(Jt.ProgressBar,{now:t,label:lr(t),striped:!0}))))};return r?N().createElement(Xt,{titleText:a.Description.VerifyingYouAreNotBot},D()):N().createElement(Jt.Modal,{className:"modal-modern modal-modern-challenge-proof-of-work",show:s,onHide:L,backdrop:"static"},N().createElement(Tn,{headerText:a.Description.VerifyingYouAreNotBot,buttonType:dn.CLOSE,buttonAction:L,buttonEnabled:!0,headerInfo:null}),D())},sr=(0,zt.withTranslations)((function(e){var t=e.sessionId,n=e.renderInline,r=e.eventService,a=e.metricsService,o=e.requestService,i=e.translate,l=e.onChallengeCompleted,u=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned;return N().createElement(nr,{sessionId:t,renderInline:n,eventService:r,metricsService:a,requestService:o,translate:i,onChallengeCompleted:l,onChallengeInvalidated:u,onModalChallengeAbandoned:s},N().createElement(ur,null))}),Vn),cr=function(){function e(e){this.sessionId=e}return e.prototype.sendChallengeInitializedEvent=function(){T().EventStream.SendEventWithTarget(Wn,Fn.challengeInitialized,{sessionId:this.sessionId},T().EventStream.TargetTypes.WWW)},e.prototype.sendPuzzleInitializedEvent=function(){T().EventStream.SendEventWithTarget(Wn,Fn.puzzleInitialized,{sessionId:this.sessionId},T().EventStream.TargetTypes.WWW)},e.prototype.sendPuzzleCompletedEvent=function(){T().EventStream.SendEventWithTarget(Wn,Fn.puzzleCompleted,{sessionId:this.sessionId},T().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeCompletedEvent=function(){T().EventStream.SendEventWithTarget(Wn,Fn.challengeCompleted,{sessionId:this.sessionId},T().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(){T().EventStream.SendEventWithTarget(Wn,Fn.challengeInvalidated,{sessionId:this.sessionId},T().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(){T().EventStream.SendEventWithTarget(Wn,Fn.challengeAbandoned,{sessionId:this.sessionId},T().EventStream.TargetTypes.WWW)},e}(),dr=window.EventTracker,pr=function(){function e(e){this.appType=e||"unknown",this.challengeSolveTimeSequenceName="ProofOfWork_"+Bn.challengeSolveTime,this.puzzleWorkingTimeSequenceName="ProofOfWork_"+Bn.puzzleWorkingTime}return e.prototype.fireChallengeInitializedEvent=function(){if(dr){var e="ProofOfWork_"+qn.challengeInitialized;dr.fireEvent(e,e+"_"+this.appType),dr.start(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType)}},e.prototype.firePuzzleInitializedEvent=function(){if(dr){var e="ProofOfWork_"+qn.puzzleInitialized;dr.fireEvent(e,e+"_"+this.appType),dr.start(this.puzzleWorkingTimeSequenceName,this.puzzleWorkingTimeSequenceName+"_"+this.appType)}},e.prototype.firePuzzleCompletedEvent=function(){if(dr){var e="ProofOfWork_"+qn.puzzleCompleted;dr.fireEvent(e,e+"_"+this.appType),dr.endSuccess(this.puzzleWorkingTimeSequenceName,this.puzzleWorkingTimeSequenceName+"_"+this.appType)}},e.prototype.fireChallengeCompletedEvent=function(){if(dr){var e="ProofOfWork_"+qn.challengeCompleted;dr.fireEvent(e,e+"_"+this.appType),dr.endSuccess(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType)}},e.prototype.fireChallengeInvalidatedEvent=function(){if(dr){var e="ProofOfWork_"+qn.challengeInvalidated;dr.fireEvent(e,e+"_"+this.appType),dr.endFailure(this.challengeSolveTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType)}},e.prototype.fireChallengeAbandonedEvent=function(){if(dr){var e="ProofOfWork_"+qn.challengeAbandoned;dr.fireEvent(e,e+"_"+this.appType),dr.endCancel(this.challengeSolveTimeSequenceName,this.puzzleWorkingTimeSequenceName,this.challengeSolveTimeSequenceName+"_"+this.appType,this.puzzleWorkingTimeSequenceName+"_"+this.appType)}},e}(),fr=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},hr=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},vr=new jt,yr=function(e){var t=e.containerId,n=e.sessionId,r=e.appType,a=e.renderInline,o=e.shouldDynamicallyLoadTranslationResources,i=e.onChallengeCompleted,l=e.onChallengeInvalidated,u=e.onModalChallengeAbandoned;return fr(void 0,void 0,void 0,(function(){var e,s,c,d,p;return hr(this,(function(f){switch(f.label){case 0:return null===(e=document.getElementById(t))?[3,3]:((0,w.unmountComponentAtNode)(e),o?[4,vr.translations.queryAndOverwriteResourcesForNamespace(Vn.feature,Gn)]:[3,2]);case 1:if((s=f.sent()).isError)return console.error("Proof-of-Work:","Got error code "+((null===(p=s.error)||void 0===p?void 0:p.toString())||"null")+" loading translations"),[2,!1];f.label=2;case 2:return c=new cr(n),d=new pr(r),(0,w.render)(N().createElement(sr,{sessionId:n,renderInline:a,eventService:c,metricsService:d,requestService:vr,onChallengeCompleted:i,onChallengeInvalidated:l,onModalChallengeAbandoned:u}),e),c.sendChallengeInitializedEvent(),d.fireChallengeInitializedEvent(),[2,!0];case 3:return[2,!1]}}))}))},mr={common:[],feature:"Feature.Reauthentication"},Er=["Action.ForgotYourPassword","Action.PleaseTryAgain","Action.Verify","Description.EnterYourPassword","Header.PasswordVerification","Label.YourPassword","Message.Error.Default","Message.Error.PasswordIncorrect"],gr=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},br=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Cr=function(e,t){return function(n){return gr(void 0,void 0,Promise,(function(){return br(this,(function(r){switch(r.label){case 0:return"Enter"===n.key&&t?(n.preventDefault(),n.stopPropagation(),[4,e()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}},_r=function(){return Promise.resolve(null)},Ir=function(e,t,n,r,a,o){return function(i){return gr(void 0,void 0,Promise,(function(){var l,u;return br(this,(function(s){switch(s.label){case 0:return l=i.currentTarget.value,void 0===t||t.test(l)||(l=e),void 0!==o&&o(l),r(l),u=a,[4,n(l)];case 1:return u.apply(void 0,[s.sent()]),[2]}}))}))}},Sr=function(e){var t=e.id,n=e.inputType,r=e.placeholder,a=e.disabled,o=e.value,i=e.error,l=e.canSubmit,u=e.validate,s=e.setValue,c=e.setError,d=e.handleSubmit,p=e.onChange,f=e.label,h=e.bottomLabel,v=e.autoComplete,y=e.maxLength,m=e.validCharactersRegEx,E=e.hideFeedback,g=e.concealInput,b=""!==o&&null===i,C=""!==o&&null!==i,_=b||C;return N().createElement("div",{className:"input-control-wrapper"},f&&N().createElement("label",{className:"text-label xsmall",htmlFor:t},f),N().createElement(Jt.FormGroup,{controlId:t,className:(_?"form-has-feedback":"")+" "+(b?"form-has-success":"")+" "+(C?"form-has-error":"")},N().createElement(Jt.FormControl,{as:"input",className:"input-field"+(g&&o.length>0?" input-field-concealed":""),type:n,autoComplete:v,maxLength:y,disabled:a,value:o,placeholder:r,onChange:Ir(o,m,u,s,c,p),onKeyDown:Cr(d,l)}),!a&&!E&&b&&N().createElement("span",{className:"icon-checkmark-on"}),!a&&!E&&C&&N().createElement("span",{className:"icon-close"}),N().createElement("div",{className:"form-control-label bottom-label xsmall"},!a&&C?i:h||"")))};!function(e){e[e.UNKNOWN=0]="UNKNOWN"}(Xn||(Xn={}));var Tr;!function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=2]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=3]="SHOW_MODAL_CHALLENGE"}(Tr||(Tr={}));var Ar,Nr=function(){return(Nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},wr=function(e,t){var n,r=Nr({},e);switch(t.type){case Tr.SET_CHALLENGE_COMPLETED:return r.onChallengeCompletedData=t.onChallengeCompletedData,r.isModalVisible=!1,r;case Tr.SET_CHALLENGE_INVALIDATED:return r.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:(n=e.resources,t.errorCode,n.Message.Error.Default)},r.isModalVisible=!1,r;case Tr.HIDE_MODAL_CHALLENGE:return r.isModalVisible=!1,r;case Tr.SHOW_MODAL_CHALLENGE:return r.isModalVisible=!0,r;default:return e}},Lr=(0,A.createContext)(null),Dr=function(e){var t=e.renderInline,n=e.requestService,r=e.translate,a=e.onChallengeCompleted,o=e.onChallengeInvalidated,i=e.onModalChallengeAbandoned,l=e.children,u=(0,A.useState)((function(){return function(e){return{Action:{ForgotYourPassword:function(t,n){return e("Action.ForgotYourPassword",{linkStart:t,linkEnd:n})},PleaseTryAgain:e("Action.PleaseTryAgain"),Verify:e("Action.Verify")},Description:{EnterYourPassword:e("Description.EnterYourPassword")},Header:{PasswordVerification:e("Header.PasswordVerification")},Label:{YourPassword:e("Label.YourPassword")},Message:{Error:{Default:e("Message.Error.Default"),PasswordIncorrect:e("Message.Error.PasswordIncorrect")}}}}(r)}))[0],s=(0,A.useState)((function(){return{renderInline:t,resources:u,requestService:n,onModalChallengeAbandoned:i,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!0}}))[0],c=(0,A.useReducer)(wr,s),d=c[0],p=c[1];return(0,A.useEffect)((function(){null!==d.onChallengeCompletedData&&null===d.onChallengeInvalidatedData&&a(d.onChallengeCompletedData)}),[d.onChallengeCompletedData,d.onChallengeInvalidatedData,a]),(0,A.useEffect)((function(){null!==d.onChallengeInvalidatedData&&null===d.onChallengeCompletedData&&o(d.onChallengeInvalidatedData)}),[d.onChallengeCompletedData,d.onChallengeInvalidatedData,o]),N().createElement(Lr.Provider,{value:{state:d,dispatch:p}},l)},Or=function(){var e=(0,A.useContext)(Lr);if(null===e)throw new Error("ReauthenticationContext was not provided in the current scope");return e},Rr=function(){var e=Or().state.resources.Action.ForgotYourPassword('<a class="text-name text-footer" href="https://en.help.roblox.com/hc/articles/203313070-I-Forgot-My-Password" target="_blank">',"</a>");return N().createElement("span",{dangerouslySetInnerHTML:{__html:e}})},Pr=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},xr=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Mr=function(){var e=Or(),t=e.state,n=t.renderInline,r=t.resources,a=t.requestService,o=t.onModalChallengeAbandoned,i=t.isModalVisible,l=e.dispatch,u=(0,A.useState)(""),s=u[0],c=u[1],d=(0,A.useState)(!1),p=d[0],f=d[1],h=(0,A.useState)(null),v=h[0],y=h[1],m=function(){return y(null)},E=function(){l({type:Tr.HIDE_MODAL_CHALLENGE}),null!==o&&o((function(){return l({type:Tr.SHOW_MODAL_CHALLENGE})}))},g=function(){return Pr(void 0,void 0,void 0,(function(){var e;return xr(this,(function(t){switch(t.label){case 0:return f(!0),[4,a.reauthentication.generateToken(s)];case 1:return(e=t.sent()).isError?(y(function(e,t){switch(t){case We.PASSWORD_INCORRECT:return e.Message.Error.PasswordIncorrect;default:return e.Message.Error.Default}}(r,e.error)+" "+r.Action.PleaseTryAgain),f(!1),[2]):(y(null),l({type:Tr.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{reauthenticationToken:e.value.token}}),[2])}}))}))},b={content:p?N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):r.Action.Verify,label:r.Action.Verify,enabled:!p&&s.length>0,action:g},C=function(){var e=n?$t:Jt.Modal.Body,t=n?en:tn,a=n?"inline-challenge-lock-icon":"modal-lock-icon",o=n?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return N().createElement(N().Fragment,null,N().createElement(e,null,N().createElement("div",{className:a}),N().createElement("p",{className:o},r.Description.EnterYourPassword),N().createElement(Sr,{id:"reauthentication-password-input",inputType:"password",disabled:p,value:s,setValue:c,error:v,setError:y,validate:_r,canSubmit:s.length>0,handleSubmit:g,onChange:m,autoComplete:"off",placeholder:r.Label.YourPassword,hideFeedback:!0}),N().createElement("p",null,N().createElement(Rr,null))),N().createElement(t,{positiveButton:b,negativeButton:null}))};return n?N().createElement(Xt,{titleText:r.Header.PasswordVerification},C()):N().createElement(Jt.Modal,{className:"modal-modern",show:i,onHide:E,backdrop:"static"},N().createElement(Tn,{headerText:r.Header.PasswordVerification,buttonType:dn.CLOSE,buttonAction:E,buttonEnabled:!p,headerInfo:null}),C())},kr=(0,zt.withTranslations)((function(e){var t=e.renderInline,n=e.requestService,r=e.translate,a=e.onChallengeCompleted,o=e.onChallengeInvalidated,i=e.onModalChallengeAbandoned;return N().createElement(Dr,{renderInline:t,requestService:n,translate:r,onChallengeCompleted:a,onChallengeInvalidated:o,onModalChallengeAbandoned:i},N().createElement(Mr,null))}),mr),Ur=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},Hr=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Vr=new jt,Gr=function(e){var t=e.containerId,n=e.renderInline,r=e.shouldDynamicallyLoadTranslationResources,a=e.onChallengeCompleted,o=e.onChallengeInvalidated,i=e.onModalChallengeAbandoned;return Ur(void 0,void 0,void 0,(function(){var e,l,u;return Hr(this,(function(s){switch(s.label){case 0:return null===(e=document.getElementById(t))?[3,3]:((0,w.unmountComponentAtNode)(e),r?[4,Vr.translations.queryAndOverwriteResourcesForNamespace(mr.feature,Er)]:[3,2]);case 1:if((l=s.sent()).isError)return console.error("Re-authentication:","Got error code "+((null===(u=l.error)||void 0===u?void 0:u.toString())||"null")+" loading translations"),[2,!1];s.label=2;case 2:return(0,w.render)(N().createElement(kr,{renderInline:n,requestService:Vr,onChallengeCompleted:a,onChallengeInvalidated:o,onModalChallengeAbandoned:i}),e),[2,!0];case 3:return[2,!1]}}))}))},Wr="Security Questions:",Fr={common:["CommonUI.Messages"],feature:"Feature.SecurityQuestions"},qr="securityQuestionsEvent",Br={answerChoicesFailedToLoad:"answerChoicesFailedToLoad"},jr=["Action.OK"],zr=["Action.Confirm","Action.Continue","Action.PickN","Action.PleaseTryAgain","Action.Reload","Action.SelectAllThatApply","Description.RegainAccess","Description.RegainAccessGeneric","Description.UnknownChoice","Description.VerifyYourIdentity","Description.WhichGames","Description.YourPasswordHasBeenReset","Header.PleaseConfirmYourIdentity","Message.Error.AnswerIncorrect","Message.Error.Default","Message.Error.MustPickN","Message.Error.SecurityQuestions.SessionInactive","Message.Error.SecurityQuestions.UserWasForceReset"],Kr=function(e){return new Promise((function(t){return setTimeout((function(){return t(void 0)}),e)}))};!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SESSION_EXPIRED=1]="SESSION_EXPIRED",e[e.USER_WAS_FORCE_RESET=2]="USER_WAS_FORCE_RESET"}(Ar||(Ar={}));var Zr,Yr=function(e,t){switch(t){case Ar.USER_WAS_FORCE_RESET:return e.Message.Error.SecurityQuestions.UserWasForceReset;case Ar.SESSION_EXPIRED:return e.Message.Error.SecurityQuestions.SessionInactive;default:return e.Message.Error.Default}},Qr=function(e,t){switch(t){case Qe.SESSION_INACTIVE:return e.Message.Error.SecurityQuestions.SessionInactive;default:return e.Message.Error.Default}},Jr=function(e){switch(e){case Qe.SESSION_INACTIVE:return Ar.SESSION_EXPIRED;default:return Ar.UNKNOWN}};!function(e){e[e.SET_CHALLENGE_COMPLETED=0]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=1]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=2]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=3]="SHOW_MODAL_CHALLENGE"}(Zr||(Zr={}));var Xr,$r,ea,ta=function(){return(ta=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},na=function(e,t){var n=ta({},e);switch(t.type){case Zr.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n.isModalVisible=!1,n;case Zr.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:Yr(e.resources,t.errorCode)},n.isModalVisible=!1,n;case Zr.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Zr.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}},ra=(0,A.createContext)(null),aa=function(e){var t=e.userId,n=e.sessionId,r=e.renderInline,a=e.eventService,o=e.requestService,i=e.translate,l=e.onChallengeCompleted,u=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned,c=e.children,d=(0,A.useState)((function(){return function(e){return{Action:{Confirm:e("Action.Confirm"),Continue:e("Action.Continue"),Ok:e("Action.OK"),PickN:function(t){return e("Action.PickN",{count:t})},PleaseTryAgain:e("Action.PleaseTryAgain"),Reload:e("Action.Reload"),SelectAllThatApply:e("Action.SelectAllThatApply")},Description:{RegainAccessGeneric:function(t){return e("Description.RegainAccessGeneric",{styledLinkText:t})},UnknownChoice:e("Description.UnknownChoice"),VerifyYourIdentity:e("Description.VerifyYourIdentity"),WhichGames:e("Description.WhichGames",{days:7}),YourPasswordHasBeenReset:e("Description.YourPasswordHasBeenReset")},Header:{PleaseConfirmYourIdentity:e("Header.PleaseConfirmYourIdentity")},Message:{Error:{AnswerIncorrect:e("Message.Error.AnswerIncorrect"),Default:e("Message.Error.Default"),MustPickN:e("Message.Error.MustPickN"),SecurityQuestions:{SessionInactive:e("Message.Error.SecurityQuestions.SessionInactive"),UserWasForceReset:e("Message.Error.SecurityQuestions.UserWasForceReset")}}}}}(i)}))[0],p=(0,A.useState)((function(){return{userId:t,sessionId:n,renderInline:r,resources:d,eventService:a,requestService:o,onModalChallengeAbandoned:s,onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!0}}))[0],f=(0,A.useReducer)(na,p),h=f[0],v=f[1];return(0,A.useEffect)((function(){null!==h.onChallengeCompletedData&&null===h.onChallengeInvalidatedData&&l(h.onChallengeCompletedData)}),[h.onChallengeCompletedData,h.onChallengeInvalidatedData,l]),(0,A.useEffect)((function(){null!==h.onChallengeInvalidatedData&&null===h.onChallengeCompletedData&&u(h.onChallengeInvalidatedData)}),[h.onChallengeCompletedData,h.onChallengeInvalidatedData,u]),N().createElement(ra.Provider,{value:{state:h,dispatch:v}},c)},oa=function(){var e=(0,A.useContext)(ra);if(null===e)throw new Error("SecurityQuestionsContext was not provided in the current scope");return e},ia=function(e){var t=e.setSelected,n=e.caption,r=e.imageUrl,a=e.selected,o=oa().state.resources,i="answer-choice-image"+(a?" answer-choice-selected":""),l=n||o.Description.UnknownChoice,u=function(){return t(!a)};return N().createElement("div",{className:"answer-choice"},N().createElement("div",{className:i,role:"checkbox","aria-checked":a,onClick:function(e){u(),e.currentTarget.blur()},onKeyDown:function(e){"Enter"===e.key&&u()},tabIndex:0},null!==r?N().createElement("img",{src:r,alt:l}):N().createElement("div",{className:"answer-choice-img-placeholder"},l)),N().createElement("div",{className:"answer-choice-caption xsmall"},l))},la=function(){return(la=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ua=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},sa=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},ca=function(){var e,t=oa(),n=t.state,r=n.userId,a=n.sessionId,o=n.renderInline,i=n.resources,l=n.eventService,u=n.requestService,s=n.onModalChallengeAbandoned,c=n.isModalVisible,d=t.dispatch,p=(0,A.useState)(),f=p[0],h=p[1],v=(0,A.useState)(null),y=v[0],m=v[1],E=(0,A.useState)(null),g=E[0],b=E[1],C=(0,A.useState)(null),_=C[0],I=C[1],S=(0,A.useState)(!1),T=S[0],w=S[1],L=(0,A.useState)(null),D=L[0],O=L[1],R=(0,A.useState)(!1),P=R[0],x=R[1],M=(0,A.useState)(!1),k=M[0],U=M[1],H=function(){d({type:Zr.HIDE_MODAL_CHALLENGE}),null!==s&&s((function(){return d({type:Zr.SHOW_MODAL_CHALLENGE})}))},V=function(e){return function(t){var n;null!==g&&void 0!==g[e]&&b(la(la({},g),((n={})[e]=la(la({},g[e]),{selected:t}),n)))}};e=function(){return ua(void 0,void 0,void 0,(function(){var e,t,n,o,s,c,p,f,v;return sa(this,(function(y){switch(y.label){case 0:return I(null),[4,u.securityQuestions.getQuestion(r,a)];case 1:return(e=y.sent()).isError?(e.error===Qe.SESSION_INACTIVE?d({type:Zr.SET_CHALLENGE_INVALIDATED,errorCode:Jr(e.error)}):I(Qr(i,e.error)+" "+i.Action.PleaseTryAgain),[2]):(h(e.value.questionType),e.value.answerPrompt===Xe.PICK_ALL_CORRECT_CHOICES?m({answerPrompt:Xe.PICK_ALL_CORRECT_CHOICES}):m({answerPrompt:Xe.PICK_C_CORRECT_CHOICES,correctAnswerChoiceCount:e.value.correctAnswerChoiceCount}),t={},n=e.value.answerChoices,o=new Set(n),s=new Set(n),[4,u.games.getDetailsForUniverseIds(n)]);case 2:return(c=y.sent()).isError?(I(function(e,t){return e.Message.Error.Default}(i,c.error)+" "+i.Action.PleaseTryAgain),[2]):(p={},c.value.data.forEach((function(e){p[e.id]=e.name,o.delete(e.id.toString())})),[4,u.thumbnails.getIconsForUniverseIds(n,"256x256",at.PNG,!1)]);case 3:return(f=y.sent()).isError?(I(function(e,t){return e.Message.Error.Default}(i,f.error)+" "+i.Action.PleaseTryAgain),[2]):(v={},f.value.data.forEach((function(e){e.state===ot.COMPLETED&&(v[e.targetId]=e.imageUrl,s.delete(e.targetId.toString()))})),n.forEach((function(e){t[e]={caption:p[e]||null,imageUrl:v[e]||null,selected:!1}})),b(t),(o.size>0||s.size>0)&&l.sendAnswerChoicesFailedToLoadEvent(Array.from(o),Array.from(s)),[2])}}))}))},(0,A.useEffect)((function(){e()}),[]);var G=null!==g?Object.entries(g).filter((function(e){return e[1].selected})).length:0,W=null!==y&&(y.answerPrompt===Xe.PICK_ALL_CORRECT_CHOICES||y.correctAnswerChoiceCount===G),F={content:T?N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):i.Action.Confirm,label:i.Action.Confirm,enabled:!T&&W,action:function(){return ua(void 0,void 0,void 0,(function(){var t,n;return sa(this,(function(o){switch(o.label){case 0:return null===g?[2]:(t=Object.entries(g).filter((function(e){return e[1].selected})).map((function(e){return e[0]})),w(!0),[4,u.securityQuestions.answerQuestion(r,t,a)]);case 1:return(n=o.sent()).isError?n.error===Qe.SESSION_INACTIVE?(d({type:Zr.SET_CHALLENGE_INVALIDATED,errorCode:Jr(n.error)}),[2]):(O(Qr(i,n.error)+" "+i.Action.PleaseTryAgain),w(!1),[2]):(O(null),n.value.answerCorrect?(d({type:Zr.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{redemptionToken:n.value.redemptionToken}}),[3,6]):[3,2]);case 2:return n.value.shouldRequestNewQuestion?(h(null),m(null),b(null),[4,Kr(250)]):[3,5];case 3:return o.sent(),x(!0),[4,e()];case 4:return o.sent(),w(!1),[3,6];case 5:n.value.userWasForceReset?U(!0):d({type:Zr.SET_CHALLENGE_INVALIDATED,errorCode:Ar.UNKNOWN}),o.label=6;case 6:return[2]}}))}))}},q={content:i.Action.Reload,label:i.Action.Reload,enabled:null!==_,action:e},B={content:i.Action.Continue,label:i.Action.Continue,enabled:!0,action:function(){window.location.href="/login/securityNotification"}},j=function(){var e=o?$t:Jt.Modal.Body,t=o?en:tn,n=o?"inline-challenge-lock-icon":"modal-lock-icon",r=o?"inline-challenge-margin-bottom-sm":"modal-margin-bottom-sm",a=o?"inline-challenge-margin-bottom":"modal-margin-bottom",l=o?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";if(k)return N().createElement(N().Fragment,null,N().createElement(e,null,N().createElement("div",{className:n}),N().createElement("p",{className:a+" font-bold"},i.Description.YourPasswordHasBeenReset),N().createElement("p",{dangerouslySetInnerHTML:{__html:i.Description.RegainAccessGeneric('<span class="font-bold">'+i.Action.Continue+"</span>")}})),N().createElement(t,{positiveButton:B,negativeButton:null}));if(null!==_)return N().createElement(N().Fragment,null,N().createElement(e,null,N().createElement("p",null,_)),N().createElement(t,{positiveButton:q,negativeButton:null}));if(null===f||null===y||null===g)return N().createElement(e,null,N().createElement("span",{className:"spinner spinner-default spinner-no-margin modal-margin-bottom-large"}));var u=Object.keys(g).length%3==1;return N().createElement(N().Fragment,null,N().createElement(e,null,N().createElement("div",{className:n}),N().createElement("p",{className:r},i.Description.WhichGames),N().createElement("p",{className:l+" font-bold"},y.answerPrompt===Xe.PICK_ALL_CORRECT_CHOICES?i.Action.SelectAllThatApply:i.Action.PickN(y.correctAnswerChoiceCount)),N().createElement("p",{className:(P?r:l)+" small"},i.Description.VerifyYourIdentity),P&&N().createElement("p",{className:l+" text-error"},i.Message.Error.AnswerIncorrect," ",i.Action.PleaseTryAgain),N().createElement("div",{className:l+" answer-choice-area"},Object.keys(g).map((function(e,t){return N().createElement(N().Fragment,{key:e},N().createElement(ia,la({key:e,setSelected:V(e)},g[e])),u&&t===Object.keys(g).length-3?N().createElement("br",null):null)}))),N().createElement("p",{className:"text-error xsmall"},D)),N().createElement(t,{positiveButton:F,negativeButton:null}))};return o?N().createElement(Xt,{titleText:i.Header.PleaseConfirmYourIdentity},j()):N().createElement(Jt.Modal,{className:"modal-modern",show:c,onHide:H,backdrop:"static"},N().createElement(Tn,{headerText:i.Header.PleaseConfirmYourIdentity,buttonType:k?dn.HIDDEN:dn.CLOSE,buttonAction:H,buttonEnabled:!T,headerInfo:null}),j())},da=(0,zt.withTranslations)((function(e){var t=e.userId,n=e.sessionId,r=e.renderInline,a=e.eventService,o=e.requestService,i=e.translate,l=e.onChallengeCompleted,u=e.onChallengeInvalidated,s=e.onModalChallengeAbandoned;return N().createElement(aa,{userId:t,sessionId:n,renderInline:r,eventService:a,requestService:o,translate:i,onChallengeCompleted:l,onChallengeInvalidated:u,onModalChallengeAbandoned:s},N().createElement(ca,null))}),Fr),pa=function(){function e(e){this.sessionId=e}return e.prototype.sendAnswerChoicesFailedToLoadEvent=function(e,t){T().EventStream.SendEventWithTarget(qr,Br.answerChoicesFailedToLoad,{sessionId:this.sessionId,answerChoicesWithNoCaption:JSON.stringify(e),answerChoicesWithNoIcon:JSON.stringify(t)},T().EventStream.TargetTypes.WWW)},e}(),fa=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},ha=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},va=new jt,ya=function(e){var t=e.containerId,n=e.userId,r=e.sessionId,a=e.renderInline,o=e.shouldDynamicallyLoadTranslationResources,i=e.onChallengeCompleted,l=e.onChallengeInvalidated,u=e.onModalChallengeAbandoned;return fa(void 0,void 0,void 0,(function(){var e,s,c,d,p;return ha(this,(function(f){switch(f.label){case 0:return n=n.toString(),null===(e=document.getElementById(t))?[3,4]:((0,w.unmountComponentAtNode)(e),o?[4,va.translations.queryAndOverwriteResourcesForNamespace(Fr.feature,zr)]:[3,3]);case 1:return(s=f.sent()).isError?(console.error(Wr,"Got error code "+((null===(d=s.error)||void 0===d?void 0:d.toString())||"null")+" loading translations"),[2,!1]):[4,va.translations.queryAndOverwriteResourcesForNamespace(Fr.common[0],jr)];case 2:if((s=f.sent()).isError)return console.error(Wr,"Got error code "+((null===(p=s.error)||void 0===p?void 0:p.toString())||"null")+" loading translations"),[2,!1];f.label=3;case 3:return c=new pa(r),(0,w.render)(N().createElement(da,{userId:n,sessionId:r,renderInline:a,eventService:c,requestService:va,onChallengeCompleted:i,onChallengeInvalidated:l,onModalChallengeAbandoned:u}),e),[2,!0];case 4:return[2,!1]}}))}))},ma=ReactRouterDOM,Ea={common:[],feature:"Authentication.TwoStepVerification"},ga="accountSecurityChallengeTwoStepVerificationEvent",ba={challengeInitialized:"challengeInitialized",userConfigurationLoaded:"userConfigurationLoaded",challengeInvalidated:"challengeInvalidated",challengeAbandoned:"challengeAbandoned",emailResendRequested:"emailResendRequested",smsResendRequested:"smsResendRequested",mediaTypeChanged:"mediaTypeChanged",codeSubmitted:"codeSubmitted",codeVerificationFailed:"codeVerificationFailed",codeVerified:"codeVerified"},Ca={initialized:"Initialized",verified:"Verified",invalidated:"Invalidated",abandoned:"Abandoned"},_a={solveTime:"SolveTime"},Ia=["Action.ChangeMediaType","Action.Reload","Action.Resend","Action.Verify","Label.AuthenticatorMediaType","Label.ChooseAlternateMediaType","Label.CharacterCodeInputPlaceholderText","Label.CodeInputPlaceholderText","Label.EmailMediaType","Label.SecurityKeyDirections","Label.SecurityKeyMediaType","Label.SmsMediaType","Label.EnterAuthenticatorCode","Label.EnterEmailCode","Label.EnterRecoveryCode","Label.EnterTextCode","Label.NeedHelpContactSupport","Label.RecoveryCodeMediaType","Label.RobloxSupport","Label.TrustThisDevice","Label.TwoStepVerification","Label.VerifyWithSecurityKey","Response.CodeSent","Response.DefaultError","Response.FeatureNotAvailable","Response.InvalidCode","Response.SessionExpired","Response.SystemErrorSwitchingToEmail","Response.TooManyAttempts","Response.VerificationError"],Sa=ReactRouter;!function(e){e.Unknown="Unknown",e.Login="Login",e.RobuxSpend="RobuxSpend",e.ItemTrade="ItemTrade",e.Resale="Resale",e.PasswordReset="PasswordReset",e.RevertAccount="RevertAccount",e.Generic="Generic"}(Xr||(Xr={})),function(e){e.Email="Email",e.Authenticator="Authenticator",e.RecoveryCode="RecoveryCode",e.SMS="SMS",e.SecurityKey="SecurityKey"}($r||($r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SESSION_EXPIRED=1]="SESSION_EXPIRED"}(ea||(ea={}));var Ta,Aa=function(e,t){switch(t){case ea.SESSION_EXPIRED:return e.Response.SessionExpired;default:return e.Response.DefaultError}},Na=function(e,t){switch(t){case gt.FEATURE_DISABLED:return e.Response.FeatureNotAvailable;case gt.INVALID_CODE:return e.Response.InvalidCode;case gt.TOO_MANY_REQUESTS:return e.Response.TooManyAttempts;case gt.INVALID_CHALLENGE_ID:return e.Response.SessionExpired;default:return e.Response.DefaultError}},wa=function(e){switch(e){case gt.INVALID_CHALLENGE_ID:return ea.SESSION_EXPIRED;default:return ea.UNKNOWN}},La=function(){var e=(0,Sa.useLocation)(),t=(0,Sa.matchPath)(e.pathname,{path:"/:activeMediaType",exact:!0,strict:!1});return(null==t?void 0:t.params)?null==t?void 0:t.params.activeMediaType:null},Da=function(e){return"/"+(e||"")};!function(e){e[e.SET_METADATA=0]="SET_METADATA",e[e.SET_USER_CONFIGURATION=1]="SET_USER_CONFIGURATION",e[e.SET_CHALLENGE_COMPLETED=2]="SET_CHALLENGE_COMPLETED",e[e.SET_CHALLENGE_INVALIDATED=3]="SET_CHALLENGE_INVALIDATED",e[e.HIDE_MODAL_CHALLENGE=4]="HIDE_MODAL_CHALLENGE",e[e.SHOW_MODAL_CHALLENGE=5]="SHOW_MODAL_CHALLENGE"}(Ta||(Ta={}));var Oa,Ra=function(){return(Ra=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Pa=function(e,t){var n=Ra({},e);switch(t.type){case Ta.SET_METADATA:return n.metadata=t.metadata,n;case Ta.SET_USER_CONFIGURATION:return n.userConfiguration=t.userConfiguration,n.enabledMediaTypes=t.enabledMediaTypes,n;case Ta.SET_CHALLENGE_COMPLETED:return n.onChallengeCompletedData=t.onChallengeCompletedData,n.isModalVisible=!1,n;case Ta.SET_CHALLENGE_INVALIDATED:return n.onChallengeInvalidatedData={errorCode:t.errorCode,errorMessage:Aa(e.resources,t.errorCode)},n.isModalVisible=!1,n;case Ta.HIDE_MODAL_CHALLENGE:return n.isModalVisible=!1,n;case Ta.SHOW_MODAL_CHALLENGE:return n.isModalVisible=!0,n;default:return e}},xa=(0,A.createContext)(null),Ma=function(e){var t=e.userId,n=e.challengeId,r=e.actionType,a=e.renderInline,o=e.shouldShowRememberDeviceCheckbox,i=e.eventService,l=e.metricsService,u=e.requestService,s=e.translate,c=e.onChallengeCompleted,d=e.onChallengeInvalidated,p=e.onModalChallengeAbandoned,f=e.children,h=(0,A.useState)((function(){return function(e){return{Action:{ChangeMediaType:e("Action.ChangeMediaType"),Reload:e("Action.Reload"),Resend:e("Action.Resend"),Verify:e("Action.Verify")},Label:{AuthenticatorMediaType:e("Label.AuthenticatorMediaType"),ChooseAlternateMediaType:e("Label.ChooseAlternateMediaType"),CharacterCodeInputPlaceholderText:function(t){return e("Label.CharacterCodeInputPlaceholderText",{codeLength:t})},CodeInputPlaceholderText:function(t){return e("Label.CodeInputPlaceholderText",{codeLength:t})},EmailMediaType:e("Label.EmailMediaType"),EnterAuthenticatorCode:e("Label.EnterAuthenticatorCode"),EnterEmailCode:e("Label.EnterEmailCode"),EnterRecoveryCode:e("Label.EnterRecoveryCode"),EnterTextCode:e("Label.EnterTextCode"),NeedHelpContactSupport:function(t){return e("Label.NeedHelpContactSupport",{supportLink:t})},RecoveryCodeMediaType:e("Label.RecoveryCodeMediaType"),RobloxSupport:e("Label.RobloxSupport"),SecurityKeyDirections:e("Label.SecurityKeyDirections"),SecurityKeyMediaType:e("Label.SecurityKeyMediaType"),SmsMediaType:e("Label.SmsMediaType"),TrustThisDevice:e("Label.TrustThisDevice"),TwoStepVerification:e("Label.TwoStepVerification"),VerifyWithSecurityKey:e("Label.VerifyWithSecurityKey")},Response:{CodeSent:e("Response.CodeSent"),DefaultError:e("Response.DefaultError"),FeatureNotAvailable:e("Response.FeatureNotAvailable"),InvalidCode:e("Response.InvalidCode"),SessionExpired:e("Response.SessionExpired"),SystemErrorSwitchingToEmail:e("Response.SystemErrorSwitchingToEmail"),TooManyAttempts:e("Response.TooManyAttempts"),VerificationError:e("Response.VerificationError")}}}(s)}))[0],v=(0,A.useState)((function(){return{userId:t,challengeId:n,actionType:r,renderInline:a,shouldShowRememberDeviceCheckbox:o,resources:h,eventService:i,metricsService:l,requestService:u,onModalChallengeAbandoned:p,metadata:null,userConfiguration:null,enabledMediaTypes:[],onChallengeCompletedData:null,onChallengeInvalidatedData:null,isModalVisible:!0}}))[0],y=La(),m=(0,A.useReducer)(Pa,v),E=m[0],g=m[1];return(0,A.useEffect)((function(){if(null!==E.onChallengeCompletedData&&null===E.onChallengeInvalidatedData){var e=E.onChallengeCompletedData;setTimeout((function(){return c(e)}),100)}}),[E.onChallengeCompletedData,E.onChallengeInvalidatedData,c]),(0,A.useEffect)((function(){if(null!==E.onChallengeInvalidatedData&&null===E.onChallengeCompletedData){i.sendChallengeInvalidatedEvent(y),l.fireInvalidatedEvent();var e=E.onChallengeInvalidatedData;setTimeout((function(){return d(e)}),100)}}),[E.onChallengeCompletedData,E.onChallengeInvalidatedData,d,i,l,y]),(0,A.useEffect)((function(){null!==y&&i.sendMediaTypeChangedEvent(y)}),[i,y]),N().createElement(xa.Provider,{value:{state:E,dispatch:g}},f)},ka=function(){var e=(0,A.useContext)(xa);if(null===e)throw new Error("TwoStepVerificationContext was not provided in the current scope");return e},Ua=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},Ha=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Va=function(e){var t=e.hasSentEmailCode,n=e.setHasSentEmailCode,r=e.hasSentSmsCode,a=e.setHasSentSmsCode,o=e.requestInFlight,i=e.setRequestInFlight,l=e.children,u=ka(),s=u.state,c=s.userId,d=s.challengeId,p=s.actionType,f=s.renderInline,h=s.resources,v=s.requestService,y=s.enabledMediaTypes,m=u.dispatch,E=(0,Sa.useHistory)(),g=(0,A.useState)(null),b=g[0],C=g[1],_=function(e){switch(e){case $r.Authenticator:return"icon-menu-mobile";case $r.Email:return"icon-menu-email";case $r.RecoveryCode:return"icon-menu-recover";case $r.SMS:return"icon-menu-mobile";case $r.SecurityKey:return"icon-menu-usb";default:return"icon-brokenpage"}},I=function(e,l){var u=function(e){switch(e){case $r.Authenticator:return h.Label.AuthenticatorMediaType;case $r.Email:return h.Label.EmailMediaType;case $r.RecoveryCode:return h.Label.RecoveryCodeMediaType;case $r.SMS:return h.Label.SmsMediaType;case $r.SecurityKey:return h.Label.SecurityKeyMediaType;default:return null}}(e);return u?N().createElement("tr",{key:l,onClick:o?void 0:function(){return function(e){return Ua(void 0,void 0,void 0,(function(){var l;return Ha(this,(function(u){switch(u.label){case 0:return o?[2]:e!==$r.Email||t?[3,2]:(i(!0),[4,v.twoStepVerification.sendEmailCode(c,{challengeId:d,actionType:p})]);case 1:if(l=u.sent(),i(!1),l.isError)return l.error===gt.INVALID_USER_ID||l.error===gt.INVALID_CHALLENGE_ID?m({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(l.error)}):C(Na(h,l.error)),[2];n(!0),u.label=2;case 2:return e!==$r.SMS||r?[3,4]:(i(!0),[4,v.twoStepVerification.sendSmsCode(c,{challengeId:d,actionType:p})]);case 3:if(l=u.sent(),i(!1),l.isError)return l.error===gt.INVALID_USER_ID||l.error===gt.INVALID_CHALLENGE_ID?m({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(l.error)}):C(Na(h,l.error)),[2];a(!0),u.label=4;case 4:return E.push(Da(e)),[2]}}))}))}(e)},className:o?"media-type-row disabled":"media-type-row"},N().createElement("td",null,N().createElement("span",{className:_(e)})),N().createElement("td",{className:"media-type-label"},u),N().createElement("td",{className:"media-type-selector"},N().createElement("span",{className:"icon-next"}),N().createElement("div",{className:"icon-placeholder"}))):null},S=f?$t:Jt.Modal.Body,T=f?"inline-challenge-lock-icon":"modal-lock-icon",w=f?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge",L=f?"":"modal-margin-bottom-large",D=f?"inline-challenge-margin-top-large":"modal-margin-bottom-large";return N().createElement(S,null,N().createElement("div",{className:T}),N().createElement("p",{className:w},h.Label.ChooseAlternateMediaType),N().createElement("table",{className:"table table-striped media-type-list "+L},N().createElement("tbody",null,y.map((function(e,t){return I(e,t)})))),b?N().createElement("p",{className:"text-error xsmall "+D},b):null,l)},Ga=function(){var e=ka().state.resources,t=e.Label.NeedHelpContactSupport('<a class="text-name text-footer contact" href="https://www.roblox.com/info/2sv" target="_blank">'+e.Label.RobloxSupport+"</a>");return N().createElement("span",{className:"text-footer",dangerouslySetInnerHTML:{__html:t}})},Wa=function(e){var t=e.requestInFlight,n=e.className,r=ka().state,a=r.renderInline,o=r.resources,i=(0,Sa.useHistory)(),l=a?"inline-challenge-body-button-link":"modal-body-button-link";return N().createElement("p",{className:n},N().createElement("button",{type:"button",className:l+" small",onClick:function(){i.push(Da(null))},disabled:t},o.Action.ChangeMediaType))},Fa=function(e){var t=e.disabled,n=e.rememberDevice,r=e.setRememberDevice,a=e.className,o=ka().state.resources;return N().createElement("p",{className:a},N().createElement("input",{id:"remember-device",type:"checkbox",onChange:function(e){r(e.target.checked)},checked:n,disabled:t,tabIndex:0})," ",N().createElement("label",{htmlFor:"remember-device"},o.Label.TrustThisDevice))},qa=/^[0-9]*$/,Ba=/^[A-Za-z0-9]*$/,ja=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},za=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ka=function(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ka(),o=a.state,i=o.userId,l=o.challengeId,u=o.actionType,s=o.renderInline,c=o.shouldShowRememberDeviceCheckbox,d=o.metadata,p=o.resources,f=o.eventService,h=o.metricsService,v=o.requestService,y=a.dispatch,m=La(),E=(0,A.useState)(""),g=E[0],b=E[1],C=(0,A.useState)(null),_=C[0],I=C[1],S=(0,A.useState)(null),T=S[0],w=S[1],L=(0,A.useState)(!1),D=L[0],O=L[1],R=function(){return ja(void 0,void 0,void 0,(function(){var e;return za(this,(function(t){switch(t.label){case 0:return n(!0),w(null),f.sendCodeSubmittedEvent(m),[4,v.twoStepVerification.verifyAuthenticatorCode(i,{challengeId:l,actionType:u,code:g})];case 1:return(e=t.sent()).isError?(f.sendCodeVerificationFailedEvent(m,gt[e.error||gt.UNKNOWN]),e.error===gt.INVALID_USER_ID||e.error===gt.INVALID_CHALLENGE_ID?(y({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(e.error)}),[2]):(n(!1),w(Na(p,e.error)),[2])):(f.sendCodeVerifiedEvent(m),h.fireVerifiedEvent(m),y({type:Ta.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:D}}),[2])}}))}))},P=null===_&&g.length===(null==d?void 0:d.authenticatorCodeLength),x={content:t?N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):p.Action.Verify,label:p.Action.Verify,enabled:!t&&P,action:R},M=s?$t:Jt.Modal.Body,k=s?en:tn,U=s?"inline-challenge-lock-icon":"modal-lock-icon",H=s?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return d&&N().createElement(N().Fragment,null,N().createElement(M,null,N().createElement("div",{className:U}),N().createElement("p",{className:H},p.Label.EnterAuthenticatorCode),N().createElement(Sr,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:g,setValue:b,error:T||_,setError:I,validate:_r,canSubmit:P,handleSubmit:R,onChange:function(){return w(null)},autoComplete:"off",placeholder:p.Label.CodeInputPlaceholderText(d.authenticatorCodeLength),maxLength:d.authenticatorCodeLength,validCharactersRegEx:qa,hideFeedback:!0,concealInput:!0}),c&&N().createElement(Fa,{disabled:t,rememberDevice:D,setRememberDevice:O,className:H}),r),N().createElement(k,{positiveButton:x,negativeButton:null}))},Za=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},Ya=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Qa=function(e){var t=e.disabled,n=e.setCodeError,r=e.mediaType,a=e.className,o=ka(),i=o.state,l=i.userId,u=i.challengeId,s=i.actionType,c=i.renderInline,d=i.resources,p=i.eventService,f=i.requestService,h=o.dispatch,v=(0,A.useState)(!1),y=v[0],m=v[1];if(y)return N().createElement("p",{className:a},N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}));var E=c?"inline-challenge-body-button-link":"modal-body-button-link";return N().createElement("p",{className:a},N().createElement("button",{type:"button",className:E+" small",onClick:function(){return Za(void 0,void 0,void 0,(function(){var e,t,a;return Ya(this,(function(o){switch(o.label){case 0:return e=null,m(!0),r!==$r.Email?[3,2]:(p.sendEmailResendRequestedEvent(),[4,f.twoStepVerification.sendEmailCode(l,{challengeId:u,actionType:s})]);case 1:return(t=o.sent()).isError&&(e=t.error),[3,4];case 2:return r!==$r.SMS?[3,4]:(p.sendSmsResendRequestedEvent(),[4,f.twoStepVerification.sendSmsCode(l,{challengeId:u,actionType:s})]);case 3:(a=o.sent()).isError&&(e=a.error),o.label=4;case 4:return m(!1),null!=e&&(e===gt.INVALID_USER_ID||e===gt.INVALID_CHALLENGE_ID?h({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(e)}):n(Na(d,e))),[2]}}))}))},disabled:t||y},d.Action.Resend))},Ja=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},Xa=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},$a=function(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ka(),o=a.state,i=o.userId,l=o.challengeId,u=o.actionType,s=o.renderInline,c=o.shouldShowRememberDeviceCheckbox,d=o.resources,p=o.metadata,f=o.eventService,h=o.metricsService,v=o.requestService,y=a.dispatch,m=La(),E=(0,A.useState)(""),g=E[0],b=E[1],C=(0,A.useState)(null),_=C[0],I=C[1],S=(0,A.useState)(null),T=S[0],w=S[1],L=(0,A.useState)(!1),D=L[0],O=L[1],R=function(){return Ja(void 0,void 0,void 0,(function(){var e;return Xa(this,(function(t){switch(t.label){case 0:return n(!0),w(null),f.sendCodeSubmittedEvent(m),[4,v.twoStepVerification.verifyEmailCode(i,{challengeId:l,actionType:u,code:g})];case 1:return(e=t.sent()).isError?(f.sendCodeVerificationFailedEvent(m,gt[e.error||gt.UNKNOWN]),e.error===gt.INVALID_USER_ID||e.error===gt.INVALID_CHALLENGE_ID?(y({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(e.error)}),[2]):(n(!1),w(Na(d,e.error)),[2])):(f.sendCodeVerifiedEvent(m),h.fireVerifiedEvent(m),y({type:Ta.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:D}}),[2])}}))}))},P=null===_&&g.length===(null==p?void 0:p.emailCodeLength),x={content:t?N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify,label:d.Action.Verify,enabled:!t&&P,action:R},M=s?$t:Jt.Modal.Body,k=s?en:tn,U=s?"inline-challenge-lock-icon":"modal-lock-icon",H=s?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return p&&N().createElement(N().Fragment,null,N().createElement(M,null,N().createElement("div",{className:U}),N().createElement("p",{className:H},d.Label.EnterEmailCode),N().createElement(Sr,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:g,setValue:b,error:T||_,setError:I,validate:_r,canSubmit:P,handleSubmit:R,onChange:function(){return w(null)},autoComplete:"off",placeholder:d.Label.CodeInputPlaceholderText(p.emailCodeLength),maxLength:p.emailCodeLength,validCharactersRegEx:qa,hideFeedback:!0,concealInput:!0}),c&&N().createElement(Fa,{disabled:t,rememberDevice:D,setRememberDevice:O,className:H}),N().createElement(Qa,{disabled:t,setCodeError:I,mediaType:m}),r),N().createElement(k,{positiveButton:x,negativeButton:null}))},eo=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},to=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},no=function(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ka(),o=a.state,i=o.userId,l=o.challengeId,u=o.actionType,s=o.renderInline,c=o.shouldShowRememberDeviceCheckbox,d=o.resources,p=o.eventService,f=o.metricsService,h=o.requestService,v=a.dispatch,y=La(),m=(0,A.useState)(""),E=m[0],g=m[1],b=(0,A.useState)(null),C=b[0],_=b[1],I=(0,A.useState)(null),S=I[0],T=I[1],w=(0,A.useState)(!1),L=w[0],D=w[1],O=function(){return eo(void 0,void 0,void 0,(function(){var e;return to(this,(function(t){switch(t.label){case 0:return n(!0),T(null),p.sendCodeSubmittedEvent(y),[4,h.twoStepVerification.verifyRecoveryCode(i,{challengeId:l,actionType:u,code:E})];case 1:return(e=t.sent()).isError?(p.sendCodeVerificationFailedEvent(y,gt[e.error||gt.UNKNOWN]),e.error===gt.INVALID_USER_ID||e.error===gt.INVALID_CHALLENGE_ID?(v({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(e.error)}),[2]):(n(!1),T(Na(d,e.error)),[2])):(p.sendCodeVerifiedEvent(y),f.fireVerifiedEvent(y),v({type:Ta.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:L}}),[2])}}))}))},R=null===C&&9===E.length,P={content:t?N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify,label:d.Action.Verify,enabled:!t&&R,action:O},x=s?$t:Jt.Modal.Body,M=s?en:tn,k=s?"inline-challenge-lock-icon":"modal-lock-icon",U=s?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return N().createElement(N().Fragment,null,N().createElement(x,null,N().createElement("div",{className:k}),N().createElement("p",{className:U},d.Label.EnterRecoveryCode),N().createElement(Sr,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:E,setValue:g,error:S||C,setError:_,validate:_r,canSubmit:R,handleSubmit:O,onChange:function(){return T(null)},autoComplete:"off",placeholder:d.Label.CodeInputPlaceholderText(9),maxLength:9,validCharactersRegEx:Ba,hideFeedback:!0,concealInput:!0}),c&&N().createElement(Fa,{disabled:t,rememberDevice:L,setRememberDevice:D,className:U}),r),N().createElement(M,{positiveButton:P,negativeButton:null}))},ro=CoreRobloxUtilities,ao=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},oo=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},io=function(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ka(),o=a.state,i=o.userId,l=o.challengeId,u=o.actionType,s=o.renderInline,c=o.shouldShowRememberDeviceCheckbox,d=o.resources,p=o.metadata,f=o.eventService,h=o.metricsService,v=o.requestService,y=a.dispatch,m=La(),E=(0,A.useState)(null),g=E[0],b=E[1],C=(0,A.useState)(!1),_=C[0],I=C[1],S=function(e,t){t&&f.sendCodeVerificationFailedEvent(m,gt[e||gt.UNKNOWN]),e!==gt.INVALID_USER_ID&&e!==gt.INVALID_CHALLENGE_ID?(n(!1),b(Na(d,e))):y({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(e)})},T=function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},w=s?$t:Jt.Modal.Body,L=s?"inline-challenge-lock-icon":"modal-lock-icon",D=s?"inline-challenge-margin-bottom":"modal-margin-bottom",O=s?"inline-challenge-action-button":"modal-action-button";O=(O=O.concat(" ","btn-cta-md")).concat(" ",D);var R=(s?"inline-margin-bottom-xlarge":"modal-margin-bottom-xlarge").concat(" ","text-error xsmall"),P=s?"inline-challenge-margin-bottom-sm":"modal-margin-bottom-sm";return p&&N().createElement(N().Fragment,null,N().createElement(w,null,N().createElement("div",{className:L}),N().createElement("p",{className:P},d.Label.VerifyWithSecurityKey),N().createElement("p",{className:D},d.Label.SecurityKeyDirections),N().createElement("button",{type:"button",className:O,"aria-label":d.Action.Verify,disabled:t,onClick:function(){return ao(void 0,void 0,void 0,(function(){var e,t,r,a,o,s,c,d,p,E,g,C;return oo(this,(function(I){switch(I.label){case 0:return n(!0),b(null),[4,v.twoStepVerification.getSecurityKeyOptions(i,{challengeId:l,actionType:u})];case 1:if((e=I.sent()).isError)return S(e.error,!0),[2];if(!(t=JSON.parse(e.value.authenticationOptions)).publicKey)return S(gt.UNKNOWN,!1),[2];if(t.publicKey.challenge=ro.cryptoUtil.base64StringToArrayBuffer(t.publicKey.challenge),!t.publicKey.challenge)return S(gt.UNKNOWN,!1),[2];for(r=0;r<t.publicKey.allowCredentials.length;r++)t.publicKey.allowCredentials[r].id=ro.cryptoUtil.base64StringToArrayBuffer(t.publicKey.allowCredentials[r].id);return[4,navigator.credentials.get({publicKey:t.publicKey}).catch((function(){S(gt.UNKNOWN,!1)}))];case 2:return a=I.sent(),o=new Uint8Array(a.response.authenticatorData),s=new Uint8Array(a.response.clientDataJSON),c=new Uint8Array(a.rawId),d=new Uint8Array(a.response.signature),p=new Uint8Array(a.response.userHandle),E={id:a.id,rawId:T(ro.cryptoUtil.arrayBufferToBase64String(c)),type:a.type,response:{authenticatorData:T(ro.cryptoUtil.arrayBufferToBase64String(o)),clientDataJSON:T(ro.cryptoUtil.arrayBufferToBase64String(s)),signature:T(ro.cryptoUtil.arrayBufferToBase64String(d)),userHandle:T(ro.cryptoUtil.arrayBufferToBase64String(p))}},g=JSON.stringify(E),[4,v.twoStepVerification.verifySecurityKeyCredential(i,{challengeId:l,actionType:u,code:g})];case 3:return(C=I.sent()).isError?(S(C.error,!0),[2]):(f.sendCodeVerifiedEvent(m),h.fireVerifiedEvent(m),y({type:Ta.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:C.value.verificationToken,rememberDevice:_}}),[2])}}))}))}},t?N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify),c&&N().createElement(Fa,{disabled:t,rememberDevice:_,setRememberDevice:I,className:D}),r,N().createElement("p",{className:R},g)))},lo=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},uo=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},so=function(e){var t=e.requestInFlight,n=e.setRequestInFlight,r=e.children,a=ka(),o=a.state,i=o.userId,l=o.challengeId,u=o.actionType,s=o.renderInline,c=o.shouldShowRememberDeviceCheckbox,d=o.resources,p=o.metadata,f=o.eventService,h=o.metricsService,v=o.requestService,y=a.dispatch,m=La(),E=(0,A.useState)(""),g=E[0],b=E[1],C=(0,A.useState)(null),_=C[0],I=C[1],S=(0,A.useState)(null),T=S[0],w=S[1],L=(0,A.useState)(!1),D=L[0],O=L[1],R=function(){return lo(void 0,void 0,void 0,(function(){var e;return uo(this,(function(t){switch(t.label){case 0:return n(!0),w(null),f.sendCodeSubmittedEvent(m),[4,v.twoStepVerification.verifySmsCode(i,{challengeId:l,actionType:u,code:g})];case 1:return(e=t.sent()).isError?(f.sendCodeVerificationFailedEvent(m,gt[e.error||gt.UNKNOWN]),e.error===gt.INVALID_USER_ID||e.error===gt.INVALID_CHALLENGE_ID?(y({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(e.error)}),[2]):(n(!1),w(Na(d,e.error)),[2])):(f.sendCodeVerifiedEvent(m),h.fireVerifiedEvent(m),y({type:Ta.SET_CHALLENGE_COMPLETED,onChallengeCompletedData:{verificationToken:e.value.verificationToken,rememberDevice:D}}),[2])}}))}))},P=null===_&&g.length===(null==p?void 0:p.emailCodeLength),x={content:t?N().createElement("span",{className:"spinner spinner-xs spinner-no-margin"}):d.Action.Verify,label:d.Action.Verify,enabled:!t&&P,action:R},M=s?$t:Jt.Modal.Body,k=s?en:tn,U=s?"inline-challenge-lock-icon":"modal-lock-icon",H=s?"inline-challenge-margin-bottom-xlarge":"modal-margin-bottom-xlarge";return p&&N().createElement(N().Fragment,null,N().createElement(M,null,N().createElement("div",{className:U}),N().createElement("p",{className:H},d.Label.EnterTextCode),N().createElement(Sr,{id:"two-step-verification-code-input",inputType:"text",disabled:t,value:g,setValue:b,error:T||_,setError:I,validate:_r,canSubmit:P,handleSubmit:R,onChange:function(){return w(null)},autoComplete:"off",placeholder:d.Label.CodeInputPlaceholderText(p.emailCodeLength),maxLength:p.emailCodeLength,validCharactersRegEx:qa,hideFeedback:!0,concealInput:!0}),c&&N().createElement(Fa,{disabled:t,rememberDevice:D,setRememberDevice:O,className:H}),N().createElement(Qa,{disabled:t,setCodeError:I,mediaType:m}),r),N().createElement(k,{positiveButton:x,negativeButton:null}))},co=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},po=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},fo=function(){var e=ka(),t=e.state,n=t.userId,r=t.challengeId,a=t.actionType,o=t.renderInline,i=t.metadata,l=t.enabledMediaTypes,u=t.resources,s=t.eventService,c=t.metricsService,d=t.requestService,p=t.onModalChallengeAbandoned,f=t.isModalVisible,h=e.dispatch,v=La(),y=(0,Sa.useHistory)(),m=(0,A.useState)(!1),E=m[0],g=m[1],b=(0,A.useState)(!1),C=b[0],_=b[1],I=(0,A.useState)(null),T=I[0],w=I[1],L=(0,A.useState)(!1),D=L[0],O=L[1],R=function(){h({type:Ta.HIDE_MODAL_CHALLENGE}),s.sendChallengeAbandonedEvent(v),c.fireAbandonedEvent(),null!==p&&setTimeout((function(){return p((function(){return h({type:Ta.SHOW_MODAL_CHALLENGE})}))}),100)},P=function(){return co(void 0,void 0,void 0,(function(){var e,t,o,l,c;return po(this,(function(p){switch(p.label){case 0:return w(null),null!==i?[2]:[4,d.twoStepVerification.getMetadata({userId:n,challengeId:r,actionType:a})];case 1:return(e=p.sent()).isError?(e.error===gt.INVALID_USER_ID||e.error===gt.INVALID_CHALLENGE_ID?h({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(e.error)}):w(Na(u,e.error)),[2]):[4,d.twoStepVerification.getUserConfiguration(n,{challengeId:r,actionType:a})];case 2:if((t=p.sent()).isError)return t.error===gt.INVALID_USER_ID||t.error===gt.INVALID_CHALLENGE_ID?h({type:Ta.SET_CHALLENGE_INVALIDATED,errorCode:wa(t.error)}):w(Na(u,t.error)),[2];h({type:Ta.SET_METADATA,metadata:e.value}),o=$r[t.value.primaryMediaType]||null,l=!0;try{(S.DeviceMeta&&(0,S.DeviceMeta)().isInApp||void 0===PublicKeyCredential)&&(l=!1)}catch(e){l=!1}return o!==$r.SecurityKey||l||(o=$r.Authenticator),y.replace(Da(o)),o===$r.Email&&g(!0),(c=t.value.methods.filter((function(e){return e.enabled})).map((function(e){var t=e.mediaType;return $r[t]||null}))).includes($r.SecurityKey)&&!l&&c.splice(c.indexOf($r.SecurityKey),1),c.length>0&&a===Xr.Login&&!c.includes($r.RecoveryCode)&&c.push($r.RecoveryCode),h({type:Ta.SET_USER_CONFIGURATION,userConfiguration:t.value,enabledMediaTypes:c}),s.sendUserConfigurationLoadedEvent(o),[2]}}))}))};(0,A.useEffect)((function(){P()}),[]);var x={content:u.Action.Reload,label:u.Action.Reload,enabled:null!==T,action:P},M=function(){var e,t=o?$t:Jt.Modal.Body,n=o?en:tn;return T?N().createElement(N().Fragment,null,N().createElement(t,null,N().createElement("p",null,T)),N().createElement(n,{positiveButton:x,negativeButton:null})):i?(e=N().createElement(N().Fragment,null,v&&l.length>1&&N().createElement(Wa,{requestInFlight:D}),v&&N().createElement("p",null,N().createElement(Ga,null))),N().createElement(Sa.Switch,null,N().createElement(Sa.Route,{path:Da($r.Authenticator)},N().createElement(Ka,{requestInFlight:D,setRequestInFlight:O},e)),N().createElement(Sa.Route,{path:Da($r.Email)},N().createElement($a,{requestInFlight:D,setRequestInFlight:O},e)),N().createElement(Sa.Route,{path:Da($r.RecoveryCode)},N().createElement(no,{requestInFlight:D,setRequestInFlight:O},e)),N().createElement(Sa.Route,{path:Da($r.SMS)},N().createElement(so,{requestInFlight:D,setRequestInFlight:O},e)),N().createElement(Sa.Route,{path:Da($r.SecurityKey)},N().createElement(io,{requestInFlight:D,setRequestInFlight:O},e)),N().createElement(Sa.Route,null,N().createElement(Va,{hasSentEmailCode:E,setHasSentEmailCode:g,hasSentSmsCode:C,setHasSentSmsCode:_,requestInFlight:D,setRequestInFlight:O},e)))):N().createElement(t,null,N().createElement("span",{className:"spinner spinner-default spinner-no-margin modal-margin-bottom-large"}))};return o?N().createElement(Xt,{titleText:u.Label.TwoStepVerification},M()):N().createElement(Jt.Modal,{className:"modal-modern",show:f,onHide:R,backdrop:"static"},N().createElement(Tn,{headerText:u.Label.TwoStepVerification,buttonType:dn.CLOSE,buttonAction:R,buttonEnabled:!D,headerInfo:null}),M())},ho=(0,zt.withTranslations)((function(e){var t=e.userId,n=e.challengeId,r=e.actionType,a=e.renderInline,o=e.shouldModifyBrowserHistory,i=e.shouldShowRememberDeviceCheckbox,l=e.eventService,u=e.metricsService,s=e.requestService,c=e.translate,d=e.onChallengeCompleted,p=e.onChallengeInvalidated,f=e.onModalChallengeAbandoned,h=N().createElement(Ma,{userId:t,challengeId:n,actionType:r,renderInline:a,shouldShowRememberDeviceCheckbox:i,eventService:l,metricsService:u,requestService:s,translate:c,onChallengeCompleted:d,onChallengeInvalidated:p,onModalChallengeAbandoned:f},N().createElement(fo,null));return o?N().createElement(ma.HashRouter,{hashType:"noslash"},h):N().createElement(ma.MemoryRouter,null,h)}),Ea),vo=function(){function e(e,t){this.challengeId=e,this.targetUserId=t}return e.prototype.sendChallengeInitializedEvent=function(){T().EventStream.SendEventWithTarget(ga,ba.challengeInitialized,{challengeId:this.challengeId,targetUserId:this.targetUserId},T().EventStream.TargetTypes.WWW)},e.prototype.sendUserConfigurationLoadedEvent=function(e){T().EventStream.SendEventWithTarget(ga,ba.userConfigurationLoaded,{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},T().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeInvalidatedEvent=function(e){T().EventStream.SendEventWithTarget(ga,ba.challengeInvalidated,{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},T().EventStream.TargetTypes.WWW)},e.prototype.sendChallengeAbandonedEvent=function(e){T().EventStream.SendEventWithTarget(ga,ba.challengeAbandoned,{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},T().EventStream.TargetTypes.WWW)},e.prototype.sendEmailResendRequestedEvent=function(){T().EventStream.SendEventWithTarget(ga,ba.emailResendRequested,{challengeId:this.challengeId,targetUserId:this.targetUserId},T().EventStream.TargetTypes.WWW)},e.prototype.sendSmsResendRequestedEvent=function(){T().EventStream.SendEventWithTarget(ga,ba.smsResendRequested,{challengeId:this.challengeId,targetUserId:this.targetUserId},T().EventStream.TargetTypes.WWW)},e.prototype.sendMediaTypeChangedEvent=function(e){T().EventStream.SendEventWithTarget(ga,ba.mediaTypeChanged,{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},T().EventStream.TargetTypes.WWW)},e.prototype.sendCodeSubmittedEvent=function(e){T().EventStream.SendEventWithTarget(ga,ba.codeSubmitted,{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},T().EventStream.TargetTypes.WWW)},e.prototype.sendCodeVerificationFailedEvent=function(e,t){T().EventStream.SendEventWithTarget(ga,ba.codeVerificationFailed,{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||"",reason:t},T().EventStream.TargetTypes.WWW)},e.prototype.sendCodeVerifiedEvent=function(e){T().EventStream.SendEventWithTarget(ga,ba.codeVerified,{challengeId:this.challengeId,targetUserId:this.targetUserId,mediaType:e||""},T().EventStream.TargetTypes.WWW)},e}(),yo=function(){function e(){this.timeStore={}}return e.prototype.start=function(e){this.timeStore[e]=Date.now()},e.prototype.end=function(e){var t=this.timeStore[e];return t?(delete this.timeStore[e],(new Date).valueOf()-t):null},e}(),mo=function(){function e(e,t,n){this.appType=t||"unknown",this.actionType=e,this.solveTimeSequenceName=this.actionType+"_"+"TwoStepVerification_"+_a.solveTime,this.eventTimer=new yo,this.requestServiceDefault=n}return e.prototype.fireInitializedEvent=function(){if(dr){var e=this.actionType+"_"+"TwoStepVerification_"+Ca.initialized;dr.fireEvent(e,e+"_"+this.appType),dr.start(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Lt.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:Ca.initialized,application_type:this.appType}}).catch((function(){})),this.eventTimer.start(this.solveTimeSequenceName)},e.prototype.fireVerifiedEvent=function(e){if(null!==e){if(dr){var t=this.actionType+"_"+"TwoStepVerification_"+Ca.verified+e;dr.fireEvent(t,t+"_"+this.appType),dr.endSuccess(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Lt.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:""+Ca.verified+e,application_type:this.appType}}).catch((function(){}));var n=this.eventTimer.end(this.solveTimeSequenceName);null!==n&&this.requestServiceDefault.metrics.recordMetric({name:Lt.SolveTime2sv,value:n,labelValues:{action_type:this.actionType,event_type:""+Ca.verified+e,application_type:this.appType}}).catch((function(){}))}},e.prototype.fireInvalidatedEvent=function(){if(dr){var e=this.actionType+"_"+"TwoStepVerification_"+Ca.invalidated;dr.fireEvent(e,e+"_"+this.appType),dr.endFailure(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Lt.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:Ca.invalidated,application_type:this.appType}}).catch((function(){}));var t=this.eventTimer.end(this.solveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Lt.SolveTime2sv,value:t,labelValues:{action_type:this.actionType,event_type:Ca.invalidated,application_type:this.appType}}).catch((function(){}))},e.prototype.fireAbandonedEvent=function(){if(dr){var e=this.actionType+"_"+"TwoStepVerification_"+Ca.abandoned;dr.fireEvent(e,e+"_"+this.appType),dr.endCancel(this.solveTimeSequenceName,this.solveTimeSequenceName+"_"+this.appType)}this.requestServiceDefault.metrics.recordMetric({name:Lt.Event2sv,value:1,labelValues:{action_type:this.actionType,event_type:Ca.abandoned,application_type:this.appType}}).catch((function(){}));var t=this.eventTimer.end(this.solveTimeSequenceName);null!==t&&this.requestServiceDefault.metrics.recordMetric({name:Lt.SolveTime2sv,value:t,labelValues:{action_type:this.actionType,event_type:Ca.abandoned,application_type:this.appType}}).catch((function(){}))},e}(),Eo=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},go=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},bo=new jt,Co=function(e){var t=e.containerId,n=e.userId,r=e.challengeId,a=e.appType,o=e.actionType,i=e.renderInline,l=e.shouldModifyBrowserHistory,u=e.shouldShowRememberDeviceCheckbox,s=e.shouldDynamicallyLoadTranslationResources,c=e.onChallengeCompleted,d=e.onChallengeInvalidated,p=e.onModalChallengeAbandoned;return Eo(void 0,void 0,void 0,(function(){var e,f,h,v,y;return go(this,(function(m){switch(m.label){case 0:return null===(e=document.getElementById(t))?[3,3]:((0,w.unmountComponentAtNode)(e),s?[4,bo.translations.queryAndOverwriteResourcesForNamespace(Ea.feature,Ia)]:[3,2]);case 1:if((f=m.sent()).isError)return console.error("Two-Step Verification:","Got error code "+((null===(y=f.error)||void 0===y?void 0:y.toString())||"null")+" loading translations"),[2,!1];m.label=2;case 2:return h=new vo(r,n),v=new mo(o,a,bo),(0,w.render)(N().createElement(ho,{userId:n,challengeId:r,actionType:o,renderInline:i,shouldModifyBrowserHistory:l||!1,shouldShowRememberDeviceCheckbox:u,eventService:h,metricsService:v,requestService:bo,onChallengeCompleted:c,onChallengeInvalidated:d,onModalChallengeAbandoned:p}),e),h.sendChallengeInitializedEvent(),v.fireInitializedEvent(),[2,!0];case 3:return[2,!1]}}))}))},_o="Generic Challenge:";!function(e){e.CAPTCHA="captcha",e.FORCE_AUTHENTICATOR="forceauthenticator",e.TWO_STEP_VERIFICATION="twostepverification",e.SECURITY_QUESTIONS="securityquestions",e.REAUTHENTICATION="reauthentication",e.PROOF_OF_WORK="proofofwork"}(Oa||(Oa={}));var Io,So=Oa;!function(e){e.UNKNOWN="unknown",e.ABANDONED="abandoned",e.INVALIDATED="invalidated"}(Io||(Io={}));var To=function(e,t){return(To=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Ao(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}To(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var No,wo=function(){return(wo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Lo(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))}function Do(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function Oo(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ro(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function Po(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ro(arguments[t]));return e}!function(e){e.assertNever=function(e){throw new Error},e.arrayToEnum=function(e){var t,n,r={};try{for(var a=Oo(e),o=a.next();!o.done;o=a.next()){var i=o.value;r[i]=i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},e.getValidEnumValues=function(t){var n,r,a=e.objectKeys(t).filter((function(e){return"number"!=typeof t[t[e]]})),o={};try{for(var i=Oo(a),l=i.next();!l.done;l=i.next()){var u=l.value;o[u]=t[u]}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e.objectValues(o)},e.objectValues=function(t){return e.objectKeys(t).map((function(e){return t[e]}))},e.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=function(e,t){var n,r;try{for(var a=Oo(e),o=a.next();!o.done;o=a.next()){var i=o.value;if(t(i))return i}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.joinValues=function(e,t){return void 0===t&&(t=" | "),e.map((function(e){return"string"==typeof e?"'"+e+"'":e})).join(t)}}(No||(No={}));var xo=No.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Mo=function(e){switch(typeof e){case"undefined":return xo.undefined;case"string":return xo.string;case"number":return isNaN(e)?xo.nan:xo.number;case"boolean":return xo.boolean;case"function":return xo.function;case"bigint":return xo.bigint;case"object":return Array.isArray(e)?xo.array:null===e?xo.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?xo.promise:"undefined"!=typeof Map&&e instanceof Map?xo.map:"undefined"!=typeof Set&&e instanceof Set?xo.set:"undefined"!=typeof Date&&e instanceof Date?xo.date:xo.object;default:return xo.unknown}},ko=No.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),Uo=function(e){function t(t){var n=this.constructor,r=e.call(this)||this;r.issues=[],r.addIssue=function(e){r.issues=Po(r.issues,[e])},r.addIssues=function(e){void 0===e&&(e=[]),r.issues=Po(r.issues,e)};var a=n.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(r,a):r.__proto__=a,r.name="ZodError",r.issues=t,r}return Ao(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.format=function(e){var t=e||function(e){return e.message},n={_errors:[]},r=function(e){var a,o;try{for(var i=Oo(e.issues),l=i.next();!l.done;l=i.next()){var u=l.value;if("invalid_union"===u.code)u.unionErrors.map(r);else if("invalid_return_type"===u.code)r(u.returnTypeError);else if("invalid_arguments"===u.code)r(u.argumentsError);else if(0===u.path.length)n._errors.push(t(u));else for(var s=n,c=0;c<u.path.length;){var d=u.path[c];c===u.path.length-1?(s[d]=s[d]||{_errors:[]},s[d]._errors.push(t(u))):s[d]=s[d]||{_errors:[]},s=s[d],c++}}}catch(e){a={error:e}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(a)throw a.error}}};return r(this),n},t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),t.prototype.flatten=function(e){var t,n;void 0===e&&(e=function(e){return e.message});var r={},a=[];try{for(var o=Oo(this.issues),i=o.next();!i.done;i=o.next()){var l=i.value;l.path.length>0?(r[l.path[0]]=r[l.path[0]]||[],r[l.path[0]].push(e(l))):a.push(e(l))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{formErrors:a,fieldErrors:r}},Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error),Ho=function(e,t){var n;switch(e.code){case ko.invalid_type:n=e.received===xo.undefined?"Required":"Expected "+e.expected+", received "+e.received;break;case ko.invalid_literal:n="Invalid literal value, expected "+JSON.stringify(e.expected);break;case ko.unrecognized_keys:n="Unrecognized key(s) in object: "+No.joinValues(e.keys,", ");break;case ko.invalid_union:n="Invalid input";break;case ko.invalid_union_discriminator:n="Invalid discriminator value. Expected "+No.joinValues(e.options);break;case ko.invalid_enum_value:n="Invalid enum value. Expected "+No.joinValues(e.options)+", received '"+e.received+"'";break;case ko.invalid_arguments:n="Invalid function arguments";break;case ko.invalid_return_type:n="Invalid function return type";break;case ko.invalid_date:n="Invalid date";break;case ko.invalid_string:n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case ko.too_small:n="array"===e.type?"Array must contain "+(e.inclusive?"at least":"more than")+" "+e.minimum+" element(s)":"string"===e.type?"String must contain "+(e.inclusive?"at least":"over")+" "+e.minimum+" character(s)":"number"===e.type?"Number must be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case ko.too_big:n="array"===e.type?"Array must contain "+(e.inclusive?"at most":"less than")+" "+e.maximum+" element(s)":"string"===e.type?"String must contain "+(e.inclusive?"at most":"under")+" "+e.maximum+" character(s)":"number"===e.type?"Number must be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case ko.custom:n="Invalid input";break;case ko.invalid_intersection_types:n="Intersection results could not be merged";break;case ko.not_multiple_of:n="Number must be a multiple of "+e.multipleOf;break;default:n=t.defaultError,No.assertNever(e)}return{message:n}},Vo=Ho,Go=function(e){var t,n,r=e.data,a=e.path,o=e.errorMaps,i=e.issueData,l=Po(a,i.path||[]),u=wo(wo({},i),{path:l}),s="",c=o.filter((function(e){return!!e})).slice().reverse();try{for(var d=Oo(c),p=d.next();!p.done;p=d.next()){s=(0,p.value)(u,{data:r,defaultError:s}).message}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return wo(wo({},i),{path:l,message:i.message||s})};function Wo(e,t){var n=Go({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Vo,Ho].filter((function(e){return!!e}))});e.common.issues.push(n)}var Fo,qo=function(){function e(){this.value="valid"}return e.prototype.dirty=function(){"valid"===this.value&&(this.value="dirty")},e.prototype.abort=function(){"aborted"!==this.value&&(this.value="aborted")},e.mergeArray=function(e,t){var n,r,a=[];try{for(var o=Oo(t),i=o.next();!i.done;i=o.next()){var l=i.value;if("aborted"===l.status)return Bo;"dirty"===l.status&&e.dirty(),a.push(l.value)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return{status:e.value,value:a}},e.mergeObjectAsync=function(t,n){return Lo(this,void 0,void 0,(function(){var r,a,o,i,l,u,s,c,d,p;return Do(this,(function(f){switch(f.label){case 0:r=[],f.label=1;case 1:f.trys.push([1,7,8,9]),a=Oo(n),o=a.next(),f.label=2;case 2:return o.done?[3,6]:(i=o.value,u=(l=r).push,p={},[4,i.key]);case 3:return p.key=f.sent(),[4,i.value];case 4:u.apply(l,[(p.value=f.sent(),p)]),f.label=5;case 5:return o=a.next(),[3,2];case 6:return[3,9];case 7:return s=f.sent(),c={error:s},[3,9];case 8:try{o&&!o.done&&(d=a.return)&&d.call(a)}finally{if(c)throw c.error}return[7];case 9:return[2,e.mergeObjectSync(t,r)]}}))}))},e.mergeObjectSync=function(e,t){var n,r,a={};try{for(var o=Oo(t),i=o.next();!i.done;i=o.next()){var l=i.value,u=l.key,s=l.value;if("aborted"===u.status)return Bo;if("aborted"===s.status)return Bo;"dirty"===u.status&&e.dirty(),"dirty"===s.status&&e.dirty(),(void 0!==s.value||l.alwaysSet)&&(a[u.value]=s.value)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return{status:e.value,value:a}},e}(),Bo=Object.freeze({status:"aborted"}),jo=function(e){return{status:"valid",value:e}},zo=function(e){return"aborted"===e.status},Ko=function(e){return"dirty"===e.status},Zo=function(e){return"valid"===e.status},Yo=function(e){return void 0!==typeof Promise&&e instanceof Promise};!function(e){e.errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},e.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message}}(Fo||(Fo={}));var Qo=function(){function e(e,t,n,r){this.parent=e,this.data=t,this._path=n,this._key=r}return Object.defineProperty(e.prototype,"path",{get:function(){return this._path.concat(this._key)},enumerable:!1,configurable:!0}),e}(),Jo=function(e,t){if(Zo(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new Uo(e.common.issues)}};function Xo(e){if(!e)return{};var t=e.errorMap,n=e.invalid_type_error,r=e.required_error,a=e.description;if(t&&(n||r))throw new Error('Can\'t use "invalid" or "required" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:function(t,n){return"invalid_type"!==t.code?{message:n.defaultError}:void 0===n.data&&r?{message:r}:e.invalid_type_error?{message:e.invalid_type_error}:{message:n.defaultError}},description:a}}var $o=function(){function e(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}return Object.defineProperty(e.prototype,"description",{get:function(){return this._def.description},enumerable:!1,configurable:!0}),e.prototype._getType=function(e){return Mo(e.data)},e.prototype._getOrReturnCtx=function(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}},e.prototype._processInputParams=function(e){return{status:new qo,ctx:{common:e.parent.common,data:e.data,parsedType:Mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}},e.prototype._parseSync=function(e){var t=this._parse(e);if(Yo(t))throw new Error("Synchronous parse encountered promise.");return t},e.prototype._parseAsync=function(e){var t=this._parse(e);return Promise.resolve(t)},e.prototype.parse=function(e,t){var n=this.safeParse(e,t);if(n.success)return n.data;throw n.error},e.prototype.safeParse=function(e,t){var n,r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mo(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Jo(r,a)},e.prototype.parseAsync=function(e,t){return Lo(this,void 0,void 0,(function(){var n;return Do(this,(function(r){switch(r.label){case 0:return[4,this.safeParseAsync(e,t)];case 1:if((n=r.sent()).success)return[2,n.data];throw n.error}}))}))},e.prototype.safeParseAsync=function(e,t){return Lo(this,void 0,void 0,(function(){var n,r,a;return Do(this,(function(o){switch(o.label){case 0:return n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mo(e)},r=this._parse({data:e,path:[],parent:n}),[4,Yo(r)?r:Promise.resolve(r)];case 1:return a=o.sent(),[2,Jo(n,a)]}}))}))},e.prototype.refine=function(e,t){return this._refinement((function(n,r){var a=e(n),o=function(){return r.addIssue(wo({code:ko.custom},function(e){return"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t}(n)))};return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return!!e||(o(),!1)})):!!a||(o(),!1)}))},e.prototype.refinement=function(e,t){return this._refinement((function(n,r){return!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)}))},e.prototype._refinement=function(e){return new Mi({schema:this,typeName:Oi.ZodEffects,effect:{type:"refinement",refinement:e}})},e.prototype.optional=function(){return ki.create(this)},e.prototype.nullable=function(){return Ui.create(this)},e.prototype.nullish=function(){return this.optional().nullable()},e.prototype.array=function(){return vi.create(this)},e.prototype.promise=function(){return xi.create(this)},e.prototype.or=function(e){return gi.create([this,e])},e.prototype.and=function(e){return _i.create(this,e)},e.prototype.transform=function(e){return new Mi({schema:this,typeName:Oi.ZodEffects,effect:{type:"transform",transform:e}})},e.prototype.default=function(e){return new Hi({innerType:this,defaultValue:"function"==typeof e?e:function(){return e},typeName:Oi.ZodDefault})},e.prototype.describe=function(e){return new(0,this.constructor)(wo(wo({},this._def),{description:e}))},e.prototype.isOptional=function(){return this.safeParse(void 0).success},e.prototype.isNullable=function(){return this.safeParse(null).success},e}(),ei=/^c[^\s-]{8,}$/i,ti=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,ni=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,ri=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._regex=function(e,t,r){return n.refinement((function(t){return e.test(t)}),wo({validation:t,code:ko.invalid_string},Fo.errToObj(r)))},n.nonempty=function(e){return n.min(1,Fo.errToObj(e))},n.trim=function(){return new t(wo(wo({},n._def),{checks:Po(n._def.checks,[{kind:"trim"}])}))},n}return Ao(t,e),t.prototype._parse=function(e){var t,n;if(this._getType(e)!==xo.string){var r=this._getOrReturnCtx(e);return Wo(r,{code:ko.invalid_type,expected:xo.string,received:r.parsedType}),Bo}var a=new qo,o=void 0;try{for(var i=Oo(this._def.checks),l=i.next();!l.done;l=i.next()){var u=l.value;if("min"===u.kind)e.data.length<u.value&&(Wo(o=this._getOrReturnCtx(e,o),{code:ko.too_small,minimum:u.value,type:"string",inclusive:!0,message:u.message}),a.dirty());else if("max"===u.kind)e.data.length>u.value&&(Wo(o=this._getOrReturnCtx(e,o),{code:ko.too_big,maximum:u.value,type:"string",inclusive:!0,message:u.message}),a.dirty());else if("email"===u.kind)ni.test(e.data)||(Wo(o=this._getOrReturnCtx(e,o),{validation:"email",code:ko.invalid_string,message:u.message}),a.dirty());else if("uuid"===u.kind)ti.test(e.data)||(Wo(o=this._getOrReturnCtx(e,o),{validation:"uuid",code:ko.invalid_string,message:u.message}),a.dirty());else if("cuid"===u.kind)ei.test(e.data)||(Wo(o=this._getOrReturnCtx(e,o),{validation:"cuid",code:ko.invalid_string,message:u.message}),a.dirty());else if("url"===u.kind)try{new URL(e.data)}catch(t){Wo(o=this._getOrReturnCtx(e,o),{validation:"url",code:ko.invalid_string,message:u.message}),a.dirty()}else if("regex"===u.kind){u.regex.lastIndex=0,u.regex.test(e.data)||(Wo(o=this._getOrReturnCtx(e,o),{validation:"regex",code:ko.invalid_string,message:u.message}),a.dirty())}else"trim"===u.kind?e.data=e.data.trim():No.assertNever(u)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{status:a.value,value:e.data}},t.prototype._addCheck=function(e){return new t(wo(wo({},this._def),{checks:Po(this._def.checks,[e])}))},t.prototype.email=function(e){return this._addCheck(wo({kind:"email"},Fo.errToObj(e)))},t.prototype.url=function(e){return this._addCheck(wo({kind:"url"},Fo.errToObj(e)))},t.prototype.uuid=function(e){return this._addCheck(wo({kind:"uuid"},Fo.errToObj(e)))},t.prototype.cuid=function(e){return this._addCheck(wo({kind:"cuid"},Fo.errToObj(e)))},t.prototype.regex=function(e,t){return this._addCheck(wo({kind:"regex",regex:e},Fo.errToObj(t)))},t.prototype.min=function(e,t){return this._addCheck(wo({kind:"min",value:e},Fo.errToObj(t)))},t.prototype.max=function(e,t){return this._addCheck(wo({kind:"max",value:e},Fo.errToObj(t)))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCUID",{get:function(){return!!this._def.checks.find((function(e){return"cuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(e){return new t(wo({checks:[],typeName:Oi.ZodString},Xo(e)))},t}($o);var ai,oi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=t.gte,t.max=t.lte,t.step=t.multipleOf,t}return Ao(t,e),t.prototype._parse=function(e){var t,n;if(this._getType(e)!==xo.number){var r=this._getOrReturnCtx(e);return Wo(r,{code:ko.invalid_type,expected:xo.number,received:r.parsedType}),Bo}var a,o,i,l,u,s=void 0,c=new qo;try{for(var d=Oo(this._def.checks),p=d.next();!p.done;p=d.next()){var f=p.value;if("int"===f.kind)No.isInteger(e.data)||(Wo(s=this._getOrReturnCtx(e,s),{code:ko.invalid_type,expected:"integer",received:"float",message:f.message}),c.dirty());else if("min"===f.kind){(f.inclusive?e.data<f.value:e.data<=f.value)&&(Wo(s=this._getOrReturnCtx(e,s),{code:ko.too_small,minimum:f.value,type:"number",inclusive:f.inclusive,message:f.message}),c.dirty())}else if("max"===f.kind){(f.inclusive?e.data>f.value:e.data>=f.value)&&(Wo(s=this._getOrReturnCtx(e,s),{code:ko.too_big,maximum:f.value,type:"number",inclusive:f.inclusive,message:f.message}),c.dirty())}else"multipleOf"===f.kind?0!=(a=e.data,o=f.value,i=void 0,l=void 0,u=void 0,i=(a.toString().split(".")[1]||"").length,l=(o.toString().split(".")[1]||"").length,u=i>l?i:l,parseInt(a.toFixed(u).replace(".",""))%parseInt(o.toFixed(u).replace(".",""))/Math.pow(10,u))&&(Wo(s=this._getOrReturnCtx(e,s),{code:ko.not_multiple_of,multipleOf:f.value,message:f.message}),c.dirty()):No.assertNever(f)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return{status:c.value,value:e.data}},t.prototype.gte=function(e,t){return this.setLimit("min",e,!0,Fo.toString(t))},t.prototype.gt=function(e,t){return this.setLimit("min",e,!1,Fo.toString(t))},t.prototype.lte=function(e,t){return this.setLimit("max",e,!0,Fo.toString(t))},t.prototype.lt=function(e,t){return this.setLimit("max",e,!1,Fo.toString(t))},t.prototype.setLimit=function(e,n,r,a){return new t(wo(wo({},this._def),{checks:Po(this._def.checks,[{kind:e,value:n,inclusive:r,message:Fo.toString(a)}])}))},t.prototype._addCheck=function(e){return new t(wo(wo({},this._def),{checks:Po(this._def.checks,[e])}))},t.prototype.int=function(e){return this._addCheck({kind:"int",message:Fo.toString(e)})},t.prototype.positive=function(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Fo.toString(e)})},t.prototype.negative=function(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Fo.toString(e)})},t.prototype.nonpositive=function(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Fo.toString(e)})},t.prototype.nonnegative=function(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Fo.toString(e)})},t.prototype.multipleOf=function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Fo.toString(t)})},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,n=null;try{for(var r=Oo(this._def.checks),a=r.next();!a.done;a=r.next()){var o=a.value;"min"===o.kind&&(null===n||o.value>n)&&(n=o.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,n=null;try{for(var r=Oo(this._def.checks),a=r.next();!a.done;a=r.next()){var o=a.value;"max"===o.kind&&(null===n||o.value<n)&&(n=o.value)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(e){return new t(wo({checks:[],typeName:Oi.ZodNumber},Xo(e)))},t}($o),ii=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){if(this._getType(e)!==xo.bigint){var t=this._getOrReturnCtx(e);return Wo(t,{code:ko.invalid_type,expected:xo.bigint,received:t.parsedType}),Bo}return jo(e.data)},t.create=function(e){return new t(wo({typeName:Oi.ZodBigInt},Xo(e)))},t}($o),li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){if(this._getType(e)!==xo.boolean){var t=this._getOrReturnCtx(e);return Wo(t,{code:ko.invalid_type,expected:xo.boolean,received:t.parsedType}),Bo}return jo(e.data)},t.create=function(e){return new t(wo({typeName:Oi.ZodBoolean},Xo(e)))},t}($o),ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t;return this._getType(e)!==xo.date?(Wo(t=this._getOrReturnCtx(e),{code:ko.invalid_type,expected:xo.date,received:t.parsedType}),Bo):isNaN(e.data.getTime())?(Wo(t=this._getOrReturnCtx(e),{code:ko.invalid_date}),Bo):{status:"valid",value:new Date(e.data.getTime())}},t.create=function(e){return new t(wo({typeName:Oi.ZodDate},Xo(e)))},t}($o),si=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){if(this._getType(e)!==xo.undefined){var t=this._getOrReturnCtx(e);return Wo(t,{code:ko.invalid_type,expected:xo.undefined,received:t.parsedType}),Bo}return jo(e.data)},t.create=function(e){return new t(wo({typeName:Oi.ZodUndefined},Xo(e)))},t}($o),ci=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){if(this._getType(e)!==xo.null){var t=this._getOrReturnCtx(e);return Wo(t,{code:ko.invalid_type,expected:xo.null,received:t.parsedType}),Bo}return jo(e.data)},t.create=function(e){return new t(wo({typeName:Oi.ZodNull},Xo(e)))},t}($o),di=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return Ao(t,e),t.prototype._parse=function(e){return jo(e.data)},t.create=function(e){return new t(wo({typeName:Oi.ZodAny},Xo(e)))},t}($o),pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return Ao(t,e),t.prototype._parse=function(e){return jo(e.data)},t.create=function(e){return new t(wo({typeName:Oi.ZodUnknown},Xo(e)))},t}($o),fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this._getOrReturnCtx(e);return Wo(t,{code:ko.invalid_type,expected:xo.never,received:t.parsedType}),Bo},t.create=function(e){return new t(wo({typeName:Oi.ZodNever},Xo(e)))},t}($o),hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){if(this._getType(e)!==xo.undefined){var t=this._getOrReturnCtx(e);return Wo(t,{code:ko.invalid_type,expected:xo.void,received:t.parsedType}),Bo}return jo(e.data)},t.create=function(e){return new t(wo({typeName:Oi.ZodVoid},Xo(e)))},t}($o),vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.ctx,r=t.status,a=this._def;if(n.parsedType!==xo.array)return Wo(n,{code:ko.invalid_type,expected:xo.array,received:n.parsedType}),Bo;if(null!==a.minLength&&n.data.length<a.minLength.value&&(Wo(n,{code:ko.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&n.data.length>a.maxLength.value&&(Wo(n,{code:ko.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all(n.data.map((function(e,t){return a.type._parseAsync(new Qo(n,e,n.path,t))}))).then((function(e){return qo.mergeArray(r,e)}));var o=n.data.map((function(e,t){return a.type._parseSync(new Qo(n,e,n.path,t))}));return qo.mergeArray(r,o)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.prototype.min=function(e,n){return new t(wo(wo({},this._def),{minLength:{value:e,message:Fo.toString(n)}}))},t.prototype.max=function(e,n){return new t(wo(wo({},this._def),{maxLength:{value:e,message:Fo.toString(n)}}))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},t.prototype.nonempty=function(e){return this.min(1,e)},t.create=function(e,n){return new t(wo({type:e,minLength:null,maxLength:null,typeName:Oi.ZodArray},Xo(n)))},t}($o);!function(e){e.mergeShapes=function(e,t){return wo(wo({},e),t)}}(ai||(ai={}));var yi=function(e){return function(t){return new Ei(wo(wo({},e),{shape:function(){return wo(wo({},e.shape()),t)}}))}};function mi(e){if(e instanceof Ei){var t={};for(var n in e.shape){var r=e.shape[n];t[n]=ki.create(mi(r))}return new Ei(wo(wo({},e._def),{shape:function(){return t}}))}return e instanceof vi?vi.create(mi(e.element)):e instanceof ki?ki.create(mi(e.unwrap())):e instanceof Ui?Ui.create(mi(e.unwrap())):e instanceof Ii?Ii.create(e.items.map((function(e){return mi(e)}))):e}var Ei=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cached=null,t.nonstrict=t.passthrough,t.augment=yi(t._def),t.extend=yi(t._def),t}return Ao(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=No.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e){var t,n,r,a,o,i,l=this;if(this._getType(e)!==xo.object){var u=this._getOrReturnCtx(e);return Wo(u,{code:ko.invalid_type,expected:xo.object,received:u.parsedType}),Bo}var s=this._processInputParams(e),c=s.status,d=s.ctx,p=this._getCached(),f=p.shape,h=p.keys,v=[];for(var y in d.data)h.includes(y)||v.push(y);var m=[];try{for(var E=Oo(h),g=E.next();!g.done;g=E.next()){var b=f[y=g.value],C=d.data[y];m.push({key:{status:"valid",value:y},value:b._parse(new Qo(d,C,d.path,y)),alwaysSet:y in d.data})}}catch(e){t={error:e}}finally{try{g&&!g.done&&(n=E.return)&&n.call(E)}finally{if(t)throw t.error}}if(this._def.catchall instanceof fi){var _=this._def.unknownKeys;if("passthrough"===_)try{for(var I=Oo(v),S=I.next();!S.done;S=I.next()){y=S.value;m.push({key:{status:"valid",value:y},value:{status:"valid",value:d.data[y]}})}}catch(e){r={error:e}}finally{try{S&&!S.done&&(a=I.return)&&a.call(I)}finally{if(r)throw r.error}}else if("strict"===_)v.length>0&&(Wo(d,{code:ko.unrecognized_keys,keys:v}),c.dirty());else if("strip"!==_)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var T=this._def.catchall;try{for(var A=Oo(v),N=A.next();!N.done;N=A.next()){y=N.value,C=d.data[y];m.push({key:{status:"valid",value:y},value:T._parse(new Qo(d,C,d.path,y)),alwaysSet:y in d.data})}}catch(e){o={error:e}}finally{try{N&&!N.done&&(i=A.return)&&i.call(A)}finally{if(o)throw o.error}}}return d.common.async?Promise.resolve().then((function(){return Lo(l,void 0,void 0,(function(){var e,t,n,r,a,o,i,l,u,s,c;return Do(this,(function(d){switch(d.label){case 0:e=[],d.label=1;case 1:d.trys.push([1,7,8,9]),t=Oo(m),n=t.next(),d.label=2;case 2:return n.done?[3,6]:[4,(r=n.value).key];case 3:return a=d.sent(),i=(o=e).push,c={key:a},[4,r.value];case 4:i.apply(o,[(c.value=d.sent(),c.alwaysSet=r.alwaysSet,c)]),d.label=5;case 5:return n=t.next(),[3,2];case 6:return[3,9];case 7:return l=d.sent(),u={error:l},[3,9];case 8:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(u)throw u.error}return[7];case 9:return[2,e]}}))}))})).then((function(e){return qo.mergeObjectSync(c,e)})):qo.mergeObjectSync(c,m)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.prototype.strict=function(e){var n=this;return Fo.errToObj,new t(wo(wo(wo({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:function(t,r){var a,o,i,l,u=null!==(i=null===(o=(a=n._def).errorMap)||void 0===o?void 0:o.call(a,t,r).message)&&void 0!==i?i:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(l=Fo.errToObj(e).message)&&void 0!==l?l:u}:{message:u}}}:{}))},t.prototype.strip=function(){return new t(wo(wo({},this._def),{unknownKeys:"strip"}))},t.prototype.passthrough=function(){return new t(wo(wo({},this._def),{unknownKeys:"passthrough"}))},t.prototype.setKey=function(e,t){var n;return this.augment(((n={})[e]=t,n))},t.prototype.merge=function(e){var n=this;return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return ai.mergeShapes(n._def.shape(),e._def.shape())},typeName:Oi.ZodObject})},t.prototype.catchall=function(e){return new t(wo(wo({},this._def),{catchall:e}))},t.prototype.pick=function(e){var n=this,r={};return No.objectKeys(e).map((function(e){n.shape[e]&&(r[e]=n.shape[e])})),new t(wo(wo({},this._def),{shape:function(){return r}}))},t.prototype.omit=function(e){var n=this,r={};return No.objectKeys(this.shape).map((function(t){-1===No.objectKeys(e).indexOf(t)&&(r[t]=n.shape[t])})),new t(wo(wo({},this._def),{shape:function(){return r}}))},t.prototype.deepPartial=function(){return mi(this)},t.prototype.partial=function(e){var n=this,r={};if(e)return No.objectKeys(this.shape).map((function(t){-1===No.objectKeys(e).indexOf(t)?r[t]=n.shape[t]:r[t]=n.shape[t].optional()})),new t(wo(wo({},this._def),{shape:function(){return r}}));for(var a in this.shape){var o=this.shape[a];r[a]=o.optional()}return new t(wo(wo({},this._def),{shape:function(){return r}}))},t.prototype.required=function(){var e={};for(var n in this.shape){for(var r=this.shape[n];r instanceof ki;)r=r._def.innerType;e[n]=r}return new t(wo(wo({},this._def),{shape:function(){return e}}))},t.create=function(e,n){return new t(wo({shape:function(){return e},unknownKeys:"strip",catchall:fi.create(),typeName:Oi.ZodObject},Xo(n)))},t.strictCreate=function(e,n){return new t(wo({shape:function(){return e},unknownKeys:"strict",catchall:fi.create(),typeName:Oi.ZodObject},Xo(n)))},t.lazycreate=function(e,n){return new t(wo({shape:e,unknownKeys:"strip",catchall:fi.create(),typeName:Oi.ZodObject},Xo(n)))},t}($o),gi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t,n,r,a=this,o=this._processInputParams(e).ctx,i=this._def.options;if(o.common.async)return Promise.all(i.map((function(e){return Lo(a,void 0,void 0,(function(){var t,n;return Do(this,(function(r){switch(r.label){case 0:return t=wo(wo({},o),{common:wo(wo({},o.common),{issues:[]}),parent:null}),n={},[4,e._parseAsync({data:o.data,path:o.path,parent:t})];case 1:return[2,(n.result=r.sent(),n.ctx=t,n)]}}))}))}))).then((function(e){var t,n,r,a,i;try{for(var l=Oo(e),u=l.next();!u.done;u=l.next())if("valid"===(d=u.value).result.status)return d.result}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}try{for(var s=Oo(e),c=s.next();!c.done;c=s.next()){var d;if("dirty"===(d=c.value).result.status)return(i=o.common.issues).push.apply(i,Po(d.ctx.common.issues)),d.result}}catch(e){r={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}var p=e.map((function(e){return new Uo(e.ctx.common.issues)}));return Wo(o,{code:ko.invalid_union,unionErrors:p}),Bo}));var l=void 0,u=[];try{for(var s=Oo(i),c=s.next();!c.done;c=s.next()){var d=c.value,p=wo(wo({},o),{common:wo(wo({},o.common),{issues:[]}),parent:null}),f=d._parseSync({data:o.data,path:o.path,parent:p});if("valid"===f.status)return f;"dirty"!==f.status||l||(l={result:f,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}if(l)return(r=o.common.issues).push.apply(r,Po(l.ctx.common.issues)),l.result;var h=u.map((function(e){return new Uo(e)}));return Wo(o,{code:ko.invalid_union,unionErrors:h}),Bo},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(wo({options:e,typeName:Oi.ZodUnion},Xo(n)))},t}($o),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;if(t.parsedType!==xo.object)return Wo(t,{code:ko.invalid_type,expected:xo.object,received:t.parsedType}),Bo;var n=this.discriminator,r=t.data[n],a=this.options.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(Wo(t,{code:ko.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[n]}),Bo)},Object.defineProperty(t.prototype,"discriminator",{get:function(){return this._def.discriminator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validDiscriminatorValues",{get:function(){return Array.from(this.options.keys())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e,n,r){var a=new Map;try{n.forEach((function(t){var n=t.shape[e].value;a.set(n,t)}))}catch(e){throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(a.size!==n.length)throw new Error("Some of the discriminator values are not unique");return new t(wo({typeName:Oi.ZodDiscriminatedUnion,discriminator:e,options:a},Xo(r)))},t}($o);function Ci(e,t){var n,r,a=Mo(e),o=Mo(t);if(e===t)return{valid:!0,data:e};if(a===xo.object&&o===xo.object){var i=No.objectKeys(t),l=No.objectKeys(e).filter((function(e){return-1!==i.indexOf(e)})),u=wo(wo({},e),t);try{for(var s=Oo(l),c=s.next();!c.done;c=s.next()){var d=c.value;if(!(h=Ci(e[d],t[d])).valid)return{valid:!1};u[d]=h.data}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return{valid:!0,data:u}}if(a===xo.array&&o===xo.array){if(e.length!==t.length)return{valid:!1};for(var p=[],f=0;f<e.length;f++){var h;if(!(h=Ci(e[f],t[f])).valid)return{valid:!1};p.push(h.data)}return{valid:!0,data:p}}return a===xo.date&&o===xo.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var _i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.status,r=t.ctx,a=function(e,t){if(zo(e)||zo(t))return Bo;var a=Ci(e.value,t.value);return a.valid?((Ko(e)||Ko(t))&&n.dirty(),{status:n.value,value:a.data}):(Wo(r,{code:ko.invalid_intersection_types}),Bo)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((function(e){var t=Ro(e,2),n=t[0],r=t[1];return a(n,r)})):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))},t.create=function(e,n,r){return new t(wo({left:e,right:n,typeName:Oi.ZodIntersection},Xo(r)))},t}($o),Ii=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e),r=n.status,a=n.ctx;if(a.parsedType!==xo.array)return Wo(a,{code:ko.invalid_type,expected:xo.array,received:a.parsedType}),Bo;if(a.data.length<this._def.items.length)return Wo(a,{code:ko.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),Bo;!this._def.rest&&a.data.length>this._def.items.length&&(Wo(a,{code:ko.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),r.dirty());var o=a.data.map((function(e,n){var r=t._def.items[n]||t._def.rest;return r?r._parse(new Qo(a,e,a.path,n)):null})).filter((function(e){return!!e}));return a.common.async?Promise.all(o).then((function(e){return qo.mergeArray(r,e)})):qo.mergeArray(r,o)},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.prototype.rest=function(e){return new t(wo(wo({},this._def),{rest:e}))},t.create=function(e,n){return new t(wo({items:e,typeName:Oi.ZodTuple,rest:null},Xo(n)))},t}($o),Si=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),Object.defineProperty(t.prototype,"keySchema",{get:function(){return this._def.keyType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueSchema",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.status,r=t.ctx;if(r.parsedType!==xo.object)return Wo(r,{code:ko.invalid_type,expected:xo.object,received:r.parsedType}),Bo;var a=[],o=this._def.keyType,i=this._def.valueType;for(var l in r.data)a.push({key:o._parse(new Qo(r,l,r.path,l)),value:i._parse(new Qo(r,r.data[l],r.path,l))});return r.common.async?qo.mergeObjectAsync(n,a):qo.mergeObjectSync(n,a)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.create=function(e,n,r){return new t(n instanceof $o?wo({keyType:e,valueType:n,typeName:Oi.ZodRecord},Xo(r)):wo({keyType:ri.create(),valueType:e,typeName:Oi.ZodRecord},Xo(n)))},t}($o),Ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t,n,r=this,a=this._processInputParams(e),o=a.status,i=a.ctx;if(i.parsedType!==xo.map)return Wo(i,{code:ko.invalid_type,expected:xo.map,received:i.parsedType}),Bo;var l=this._def.keyType,u=this._def.valueType,s=Po(i.data.entries()).map((function(e,t){var n=Ro(e,2),r=n[0],a=n[1];return{key:l._parse(new Qo(i,r,i.path,[t,"key"])),value:u._parse(new Qo(i,a,i.path,[t,"value"]))}}));if(i.common.async){var c=new Map;return Promise.resolve().then((function(){return Lo(r,void 0,void 0,(function(){var e,t,n,r,a,i,l,u;return Do(this,(function(d){switch(d.label){case 0:d.trys.push([0,6,7,8]),e=Oo(s),t=e.next(),d.label=1;case 1:return t.done?[3,5]:[4,(n=t.value).key];case 2:return r=d.sent(),[4,n.value];case 3:if(a=d.sent(),"aborted"===r.status||"aborted"===a.status)return[2,Bo];"dirty"!==r.status&&"dirty"!==a.status||o.dirty(),c.set(r.value,a.value),d.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return i=d.sent(),l={error:i},[3,8];case 7:try{t&&!t.done&&(u=e.return)&&u.call(e)}finally{if(l)throw l.error}return[7];case 8:return[2,{status:o.value,value:c}]}}))}))}))}var d=new Map;try{for(var p=Oo(s),f=p.next();!f.done;f=p.next()){var h=f.value,v=h.key,y=h.value;if("aborted"===v.status||"aborted"===y.status)return Bo;"dirty"!==v.status&&"dirty"!==y.status||o.dirty(),d.set(v.value,y.value)}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}return{status:o.value,value:d}},t.create=function(e,n,r){return new t(wo({valueType:n,keyType:e,typeName:Oi.ZodMap},Xo(r)))},t}($o),Ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),n=t.status,r=t.ctx;if(r.parsedType!==xo.set)return Wo(r,{code:ko.invalid_type,expected:xo.set,received:r.parsedType}),Bo;var a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(Wo(r,{code:ko.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,message:a.minSize.message}),n.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(Wo(r,{code:ko.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,message:a.maxSize.message}),n.dirty());var o=this._def.valueType;function i(e){var t,r,a=new Set;try{for(var o=Oo(e),i=o.next();!i.done;i=o.next()){var l=i.value;if("aborted"===l.status)return Bo;"dirty"===l.status&&n.dirty(),a.add(l.value)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return{status:n.value,value:a}}var l=Po(r.data.values()).map((function(e,t){return o._parse(new Qo(r,e,r.path,t))}));return r.common.async?Promise.all(l).then((function(e){return i(e)})):i(l)},t.prototype.min=function(e,n){return new t(wo(wo({},this._def),{minSize:{value:e,message:Fo.toString(n)}}))},t.prototype.max=function(e,n){return new t(wo(wo({},this._def),{maxSize:{value:e,message:Fo.toString(n)}}))},t.prototype.size=function(e,t){return this.min(e,t).max(e,t)},t.prototype.nonempty=function(e){return this.min(1,e)},t.create=function(e,n){return new t(wo({valueType:e,minSize:null,maxSize:null,typeName:Oi.ZodSet},Xo(n)))},t}($o),Ni=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validate=t.implement,t}return Ao(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e).ctx;if(n.parsedType!==xo.function)return Wo(n,{code:ko.invalid_type,expected:xo.function,received:n.parsedType}),Bo;function r(e,t){return Go({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Vo,Ho].filter((function(e){return!!e})),issueData:{code:ko.invalid_arguments,argumentsError:t}})}function a(e,t){return Go({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Vo,Ho].filter((function(e){return!!e})),issueData:{code:ko.invalid_return_type,returnTypeError:t}})}var o={errorMap:n.common.contextualErrorMap},i=n.data;return this._def.returns instanceof xi?jo((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Lo(t,void 0,void 0,(function(){var t,n,l;return Do(this,(function(u){switch(u.label){case 0:return t=new Uo([]),[4,this._def.args.parseAsync(e,o).catch((function(n){throw t.addIssue(r(e,n)),t}))];case 1:return n=u.sent(),[4,i.apply(void 0,Po(n))];case 2:return l=u.sent(),[4,this._def.returns._def.type.parseAsync(l,o).catch((function(e){throw t.addIssue(a(l,e)),t}))];case 3:return[2,u.sent()]}}))}))})):jo((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var l=t._def.args.safeParse(e,o);if(!l.success)throw new Uo([r(e,l.error)]);var u=i.apply(void 0,Po(l.data)),s=t._def.returns.safeParse(u,o);if(!s.success)throw new Uo([a(u,s.error)]);return s.data}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.prototype.args=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(wo(wo({},this._def),{args:Ii.create(e).rest(pi.create())}))},t.prototype.returns=function(e){return new t(wo(wo({},this._def),{returns:e}))},t.prototype.implement=function(e){return this.parse(e)},t.prototype.strictImplement=function(e){return this.parse(e)},t.create=function(e,n,r){return new t(wo({args:e?e.rest(pi.create()):Ii.create([]).rest(pi.create()),returns:n||pi.create(),typeName:Oi.ZodFunction},Xo(r)))},t}($o),wi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return this._def.getter()._parse({data:t.data,path:t.path,parent:t})},t.create=function(e,n){return new t(wo({getter:e,typeName:Oi.ZodLazy},Xo(n)))},t}($o),Li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){return e.data!==this._def.value?(Wo(this._getOrReturnCtx(e),{code:ko.invalid_literal,expected:this._def.value}),Bo):{status:"valid",value:e.data}},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(wo({value:e,typeName:Oi.ZodLiteral},Xo(n)))},t}($o);function Di(e,t){return new Ri(wo({values:e,typeName:Oi.ZodEnum},Xo(t)))}var Oi,Ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){if("string"!=typeof e.data){var t=this._getOrReturnCtx(e),n=this._def.values;return Wo(t,{expected:No.joinValues(n),received:t.parsedType,code:ko.invalid_type}),Bo}if(-1===this._def.values.indexOf(e.data)){t=this._getOrReturnCtx(e),n=this._def.values;return Wo(t,{received:t.data,code:ko.invalid_enum_value,options:n}),Bo}return jo(e.data)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,n={};try{for(var r=Oo(this._def.values),a=r.next();!a.done;a=r.next()){var o=a.value;n[o]=o}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,n={};try{for(var r=Oo(this._def.values),a=r.next();!a.done;a=r.next()){var o=a.value;n[o]=o}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,n={};try{for(var r=Oo(this._def.values),a=r.next();!a.done;a=r.next()){var o=a.value;n[o]=o}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),t.create=Di,t}($o),Pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=No.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==xo.string&&n.parsedType!==xo.number){var r=No.objectValues(t);return Wo(n,{expected:No.joinValues(r),received:n.parsedType,code:ko.invalid_type}),Bo}if(-1===t.indexOf(e.data)){r=No.objectValues(t);return Wo(n,{received:n.data,code:ko.invalid_enum_value,options:r}),Bo}return jo(e.data)},Object.defineProperty(t.prototype,"enum",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),t.create=function(e,n){return new t(wo({values:e,typeName:Oi.ZodNativeEnum},Xo(n)))},t}($o),xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this,n=this._processInputParams(e).ctx;if(n.parsedType!==xo.promise&&!1===n.common.async)return Wo(n,{code:ko.invalid_type,expected:xo.promise,received:n.parsedType}),Bo;var r=n.parsedType===xo.promise?n.data:Promise.resolve(n.data);return jo(r.then((function(e){return t._def.type.parseAsync(e,{path:n.path,errorMap:n.common.contextualErrorMap})})))},t.create=function(e,n){return new t(wo({type:e,typeName:Oi.ZodPromise},Xo(n)))},t}($o),Mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e){var t=this,n=this._processInputParams(e),r=n.status,a=n.ctx,o=this._def.effect||null;if("preprocess"===o.type){var i=o.transform(a.data);return a.common.async?Promise.resolve(i).then((function(e){return t._def.schema._parseAsync({data:e,path:a.path,parent:a})})):this._def.schema._parseSync({data:i,path:a.path,parent:a})}var l={addIssue:function(e){Wo(a,e),e.fatal?r.abort():r.dirty()},get path(){return a.path}};if(l.addIssue=l.addIssue.bind(l),"refinement"===o.type){var u=function(e){var t=o.refinement(e,l);if(a.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===a.common.async){var s=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===s.status?Bo:("dirty"===s.status&&r.dirty(),u(s.value),{status:r.value,value:s.value})}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((function(e){return"aborted"===e.status?Bo:("dirty"===e.status&&r.dirty(),u(e.value).then((function(){return{status:r.value,value:e.value}})))}))}if("transform"===o.type){if(!1===a.common.async){var c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Zo(c))return c;var d=o.transform(c.value,l);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:d}}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((function(e){return Zo(e)?Promise.resolve(o.transform(e.value,l)).then((function(e){return{status:r.value,value:e}})):e}))}No.assertNever(o)},t.create=function(e,n,r){return new t(wo({schema:e,typeName:Oi.ZodEffects,effect:n},Xo(r)))},t.createWithPreprocess=function(e,n,r){return new t(wo({schema:n,effect:{type:"preprocess",transform:e},typeName:Oi.ZodEffects},Xo(r)))},t}($o),ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){return this._getType(e)===xo.undefined?jo(void 0):this._def.innerType._parse(e)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,n){return new t(wo({innerType:e,typeName:Oi.ZodOptional},Xo(n)))},t}($o),Ui=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){return this._getType(e)===xo.null?jo(null):this._def.innerType._parse(e)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,n){return new t(wo({innerType:e,typeName:Oi.ZodNullable},Xo(n)))},t}($o),Hi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx,n=t.data;return t.parsedType===xo.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e,t){return new ki(wo({innerType:e,typeName:Oi.ZodOptional},Xo(t)))},t}($o),Vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ao(t,e),t.prototype._parse=function(e){if(this._getType(e)!==xo.nan){var t=this._getOrReturnCtx(e);return Wo(t,{code:ko.invalid_type,expected:xo.nan,received:t.parsedType}),Bo}return{status:"valid",value:e.data}},t.create=function(e){return new t(wo({typeName:Oi.ZodNaN},Xo(e)))},t}($o);Ei.lazycreate;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(Oi||(Oi={}));var Gi,Wi,Fi=ri.create,qi=(oi.create,Vi.create,ii.create,li.create),Bi=(ui.create,si.create,ci.create,di.create,pi.create,fi.create,hi.create,vi.create,Ei.create),ji=(Ei.strictCreate,gi.create),zi=(bi.create,_i.create,Ii.create,Si.create,Ti.create,Ai.create,Ni.create,wi.create,Li.create),Ki=(Ri.create,Pi.create),Zi=(xi.create,Mi.create,ki.create,Ui.create,Mi.createWithPreprocess),Yi=Bi({userId:Fi(),challengeId:Fi(),shouldShowRememberDeviceCheckbox:qi()}),Qi=Bi({actionType:Ki(nn),dataExchangeBlob:Fi(),unifiedCaptchaId:Fi()}),Ji=Bi({userId:Fi(),sessionId:Fi()}),Xi=Bi({}),$i=Bi({}),el=Bi({sessionId:Fi()}),tl=((Gi={})[So.TWO_STEP_VERIFICATION]=Yi,Gi[So.CAPTCHA]=Qi,Gi[So.FORCE_AUTHENTICATOR]=$i,Gi[So.SECURITY_QUESTIONS]=Ji,Gi[So.REAUTHENTICATION]=Xi,Gi[So.PROOF_OF_WORK]=el,Gi),nl=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rl=function(){return(rl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},al=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},ol=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},il=function(e,t){var n,r=Object.values(So).includes(e)?e:null;if(null===r)return null;try{n=JSON.parse(t)}catch(e){return null}var a=tl[r].safeParse(n);return a.success?{challengeType:r,challengeMetadata:n}:(console.error(_o,a.error),null)},ll=function(e){var t=e.challengeBaseProperties,n=e.challengeSpecificProperties;return al(void 0,void 0,Promise,(function(){var e,r,a,o,i,l,u,s,c,d;return ol(this,(function(p){switch(p.label){case 0:switch(n.challengeType){case So.CAPTCHA:return[3,1];case So.FORCE_AUTHENTICATOR:return[3,2];case So.TWO_STEP_VERIFICATION:return[3,4];case So.SECURITY_QUESTIONS:return[3,6];case So.REAUTHENTICATION:return[3,8];case So.PROOF_OF_WORK:return[3,10]}return[3,12];case 1:return e=n.challengeType,r=n.challengeMetadata,c=rl(rl(rl({onChallengeDisplayed:function(){},appType:null},t),r),{onChallengeInvalidated:function(n){return t.onChallengeInvalidated(rl({challengeType:e},n))},onChallengeCompleted:function(n){return t.onChallengeCompleted({challengeType:e,metadata:{unifiedCaptchaId:n.captchaId,captchaToken:n.captchaToken,actionType:r.actionType}})}}),[2,Cn(c)];case 2:return s=n.challengeMetadata,c=rl(rl({},t),s),[4,Hn(c)];case 3:return(d=p.sent())&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,d];case 4:return a=n.challengeType,o=n.challengeMetadata,c=rl(rl(rl({},t),o),{actionType:Xr.Generic,onChallengeInvalidated:function(e){return t.onChallengeInvalidated(rl({challengeType:a},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:a,metadata:rl(rl({},e),{challengeId:o.challengeId})})}}),[4,Co(c)];case 5:return(d=p.sent())&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,d];case 6:return i=n.challengeType,s=n.challengeMetadata,c=rl(rl(rl({},t),s),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(rl({challengeType:i},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:i,metadata:e})}}),[4,ya(c)];case 7:return(d=p.sent())&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,d];case 8:return l=n.challengeType,s=n.challengeMetadata,c=rl(rl(rl({},t),s),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(rl({challengeType:l},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:l,metadata:e})}}),[4,Gr(c)];case 9:return(d=p.sent())&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,d];case 10:return u=n.challengeType,s=n.challengeMetadata,c=rl(rl(rl({},t),s),{onChallengeInvalidated:function(e){return t.onChallengeInvalidated(rl({challengeType:u},e))},onChallengeCompleted:function(e){return t.onChallengeCompleted({challengeType:u,metadata:e})}}),[4,yr(c)];case 11:return(d=p.sent())&&void 0!==t.onChallengeDisplayed&&t.onChallengeDisplayed({displayed:!0}),[2,d];case 12:return n,[2,!1];case 13:return[2]}}))}))},ul=function(e){function t(n){var r=e.call(this,t.getMessage(n))||this;return Object.setPrototypeOf(r,t.prototype),r.name=t.name,r._parameters=n,r}return nl(t,e),t.match=function(e){return e instanceof t},t.matchAbandoned=function(e){return t.match(e)&&e.parameters.kind===Io.ABANDONED},t.getMessage=function(e){return"Got ("+["Kind: "+e.kind,"Type: "+(e.data.challengeType||"unknown"),"Code: "+(e.kind===Io.INVALIDATED?e.data.errorCode:"null")].join("; ")+")"},Object.defineProperty(t.prototype,"parameters",{get:function(){return this._parameters},enumerable:!1,configurable:!0}),t}(Error),sl=function(e){return new Promise((function(t,n){var r,a=e.retryRequest,o=e.containerId,i=e.challengeId,l=e.challengeTypeRaw,u=e.challengeMetadataJsonBase64;try{r=atob(u)}catch(e){if(e instanceof DOMException&&e.code===DOMException.INVALID_CHARACTER_ERR)return console.error(_o,"Base-64 decoding failed",e),void n(new ul({kind:Io.UNKNOWN,data:{}}));throw e}var s=il(l,r);if(null===s)return console.error(_o,"Challenge headers failed to be parsed"),void n(new ul({kind:Io.UNKNOWN,data:{}}));if(null===document.getElementById(o)){var c=document.createElement("div");c.id=o,document.body.appendChild(c)}ll({challengeBaseProperties:{containerId:o,shouldDynamicallyLoadTranslationResources:!1,renderInline:!1,onChallengeCompleted:function(e){try{t(a(i,btoa(JSON.stringify(e.metadata))))}catch(e){if(!(e instanceof DOMException&&e.code===DOMException.INVALID_CHARACTER_ERR))throw e;console.error(_o,"Base-64 encoding failed",e),n(new ul({kind:Io.UNKNOWN,data:{challengeType:s.challengeType}}))}},onChallengeInvalidated:function(e){return n(new ul({kind:Io.INVALIDATED,data:e}))},onModalChallengeAbandoned:function(){return n(new ul({kind:Io.ABANDONED,data:{challengeType:s.challengeType}}))}},challengeSpecificProperties:s}).then((function(e){e||(console.error(_o,"Challenge component failed to initialize"),n(new ul({kind:Io.UNKNOWN,data:{challengeType:s.challengeType}})))}))}))},cl="Hybrid Wrapper:";!function(e){e.CHALLENGE_COMPLETED="challengeCompleted",e.CHALLENGE_DISPLAYED="challengeDisplayed",e.CHALLENGE_INITIALIZED="challengeInitialized",e.CHALLENGE_INVALIDATED="challengeInvalidated",e.CHALLENGE_PAGE_LOADED="challengePageLoaded",e.CHALLENGE_PARSED="challengeParsed"}(Wi||(Wi={}));var dl;!function(e){e.ACTION_TYPE="action-type",e.ALLOW_REMEMBER_DEVICE="allow-remember-device",e.APP_TYPE="app-type",e.CAPTCHA_ID="captcha-id",e.CHALLENGE_ID="challenge-id",e.CHALLENGE_METADATA_JSON="challenge-metadata-json",e.CHALLENGE_TYPE="challenge-type",e.DARK_MODE="dark-mode",e.DATA_EXCHANGE_BLOB="data-exchange-blob",e.GENERIC_CHALLENGE_TYPE="generic-challenge-type",e.SESSION_ID="session-id",e.USER_ID="user-id"}(dl||(dl={}));var pl=Bi({challengeType:Zi((function(e){return"string"==typeof e?e.replace(/-/g,""):e}),ji([Ki(So),zi("generic")])),darkMode:ji([zi("false"),zi("true")]).transform((function(e){return"true"===e})),appType:Fi().default("unknown")}),fl=Bi({actionType:Ki(nn),dataExchangeBlob:Fi(),unifiedCaptchaId:Fi()}),hl=Bi({userId:Fi(),challengeId:Fi(),actionType:Ki(Xr),allowRememberDevice:ji([zi("false"),zi("true")]).transform((function(e){return"true"===e}))}),vl=Bi({userId:Fi(),sessionId:Fi()}),yl=Bi({sessionId:Fi()}),ml=Bi({challengeType:Ki(So),challengeMetadataJson:Fi()}),El=function(){var e=S.UrlParser.getParametersAsObject(),t={challengeType:e[dl.GENERIC_CHALLENGE_TYPE],challengeMetadataJson:e[dl.CHALLENGE_METADATA_JSON]},n=ml.safeParse(t);if(!n.success)return console.error(cl,n.error),null;var r=n.data,a=r.challengeType,o=function(e){var t=e.replace(/[^A-Za-z0-9-_]/g,""),n=(4-t.length%4)%4,r=(t+Array(n+1).join("=")).replace(/-/g,"+").replace(/_/g,"/");try{return atob(r)}catch(e){if(e instanceof DOMException&&e.code===DOMException.INVALID_CHARACTER_ERR)return console.error(cl,"Base-64 decoding failed",e),null;throw e}}(r.challengeMetadataJson);return null===o?null:il(a,o)},gl=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},bl=function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Cl="light-theme",_l="dark-theme",Il=function(e,t,n){var r,a;console.log(cl,"Sending hybrid call:",t),null===(a=S.Hybrid.Navigation)||void 0===a||a.navigateToFeature(((r={}).feature=t,r.data=n,r),(function(){return console.log(cl,"Sent hybrid call:",t)}));var o=e[t],i=document.getElementById(o);if(null!==i&&"INPUT"===i.tagName){i.value=JSON.stringify(n);var l=document.createEvent("HTMLEvents");l.initEvent("callbackInputChanged",!1,!1),i.dispatchEvent(l)}},Sl=function(e,t,n){return gl(void 0,void 0,Promise,(function(){var r,a,o,i;return bl(this,(function(l){switch(l.label){case 0:return null===(r=function(){var e=S.UrlParser.getParametersAsObject(),t={actionType:e[dl.ACTION_TYPE],dataExchangeBlob:e[dl.DATA_EXCHANGE_BLOB],unifiedCaptchaId:e[dl.CAPTCHA_ID]},n=fl.safeParse(t);return n.success?n.data:(console.error(cl,n.error),null)}())?(Il(t,Wi.CHALLENGE_PARSED,{parsed:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_PARSED,{parsed:!0}),a=r.actionType,o=r.dataExchangeBlob,i=r.unifiedCaptchaId,[4,Cn({containerId:e,actionType:a,appType:n,dataExchangeBlob:o,unifiedCaptchaId:i,renderInline:!0,shouldDynamicallyLoadTranslationResources:!0,onChallengeDisplayed:function(e){return Il(t,Wi.CHALLENGE_DISPLAYED,e)},onChallengeCompleted:function(e){return Il(t,Wi.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Il(t,Wi.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})]);case 1:return!1===l.sent()?(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!0}),[2,!0])}}))}))},Tl=function(e,t,n){return gl(void 0,void 0,Promise,(function(){var r,a,o,i,l;return bl(this,(function(u){switch(u.label){case 0:return null===(r=function(){var e=S.UrlParser.getParametersAsObject(),t={userId:e[dl.USER_ID],challengeId:e[dl.CHALLENGE_ID],actionType:e[dl.ACTION_TYPE],allowRememberDevice:e[dl.ALLOW_REMEMBER_DEVICE]},n=hl.safeParse(t);return n.success?n.data:(console.error(cl,n.error),null)}())?(Il(t,Wi.CHALLENGE_PARSED,{parsed:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_PARSED,{parsed:!0}),a=r.userId,o=r.challengeId,i=r.actionType,l=r.allowRememberDevice,[4,Co({containerId:e,userId:a,challengeId:o,actionType:i,appType:n,renderInline:!0,shouldModifyBrowserHistory:!0,shouldShowRememberDeviceCheckbox:l,shouldDynamicallyLoadTranslationResources:!0,onChallengeCompleted:function(e){return Il(t,Wi.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Il(t,Wi.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})]);case 1:return!1===u.sent()?(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!0}),Il(t,Wi.CHALLENGE_DISPLAYED,{displayed:!0}),[2,!0])}}))}))},Al=function(e,t,n){return gl(void 0,void 0,Promise,(function(){var n,r,a;return bl(this,(function(o){switch(o.label){case 0:return null===(n=function(){var e=S.UrlParser.getParametersAsObject(),t={userId:e[dl.USER_ID],sessionId:e[dl.SESSION_ID]},n=vl.safeParse(t);return n.success?n.data:(console.error(cl,n.error),null)}())?(Il(t,Wi.CHALLENGE_PARSED,{parsed:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_PARSED,{parsed:!0}),r=n.userId,a=n.sessionId,[4,ya({containerId:e,userId:r,sessionId:a,renderInline:!0,shouldDynamicallyLoadTranslationResources:!0,onChallengeCompleted:function(e){return Il(t,Wi.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Il(t,Wi.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})]);case 1:return!1===o.sent()?(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!0}),Il(t,Wi.CHALLENGE_DISPLAYED,{displayed:!0}),[2,!0])}}))}))},Nl=function(e,t,n){return gl(void 0,void 0,Promise,(function(){return bl(this,(function(n){switch(n.label){case 0:return Il(t,Wi.CHALLENGE_PARSED,{parsed:!0}),[4,Gr({containerId:e,renderInline:!0,shouldDynamicallyLoadTranslationResources:!0,onChallengeCompleted:function(e){return Il(t,Wi.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Il(t,Wi.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})];case 1:return!1===n.sent()?(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!0}),Il(t,Wi.CHALLENGE_DISPLAYED,{displayed:!0}),[2,!0])}}))}))},wl=function(e,t,n){return gl(void 0,void 0,Promise,(function(){var n,r;return bl(this,(function(a){switch(a.label){case 0:return null===(n=function(){var e={sessionId:S.UrlParser.getParametersAsObject()[dl.SESSION_ID]},t=yl.safeParse(e);return t.success?t.data:(console.error(cl,t.error),null)}())?(Il(t,Wi.CHALLENGE_PARSED,{parsed:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_PARSED,{parsed:!0}),r=n.sessionId,[4,yr({containerId:e,sessionId:r,renderInline:!0,shouldDynamicallyLoadTranslationResources:!0,onChallengeCompleted:function(e){return Il(t,Wi.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Il(t,Wi.CHALLENGE_INVALIDATED,e)},onModalChallengeAbandoned:null})]);case 1:return!1===a.sent()?(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!0}),Il(t,Wi.CHALLENGE_DISPLAYED,{displayed:!0}),[2,!0])}}))}))},Ll=function(e,t,n){return gl(void 0,void 0,Promise,(function(){var r;return bl(this,(function(a){switch(a.label){case 0:return null===(r=El())?(Il(t,Wi.CHALLENGE_PARSED,{parsed:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_PARSED,{parsed:!0}),[4,ll({challengeBaseProperties:{containerId:e,renderInline:!0,shouldDynamicallyLoadTranslationResources:!0,appType:n,shouldModifyBrowserHistory:!0,onChallengeCompleted:function(e){return Il(t,Wi.CHALLENGE_COMPLETED,e)},onChallengeInvalidated:function(e){return Il(t,Wi.CHALLENGE_INVALIDATED,e)},onChallengeDisplayed:function(e){return Il(t,Wi.CHALLENGE_DISPLAYED,e)},onModalChallengeAbandoned:null},challengeSpecificProperties:r})]);case 1:return!1===a.sent()?(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!0}),[2,!0])}}))}))},Dl=function(e,t,n){return gl(void 0,void 0,Promise,(function(){return bl(this,(function(n){switch(n.label){case 0:return Il(t,Wi.CHALLENGE_PARSED,{parsed:!0}),[4,Hn({containerId:e,renderInline:!0,shouldDynamicallyLoadTranslationResources:!0,onModalChallengeAbandoned:null})];case 1:return!1===n.sent()?(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!1}),[2,!1]):(Il(t,Wi.CHALLENGE_INITIALIZED,{initialized:!0}),Il(t,Wi.CHALLENGE_DISPLAYED,{displayed:!0}),[2,!0])}}))}))},Ol=function(e){var t=e.containerId,n=e.hybridTargetToCallbackInputId;return gl(void 0,void 0,void 0,(function(){var e;return bl(this,(function(r){var a,o,i;if(Il(n,Wi.CHALLENGE_PAGE_LOADED,{pageLoaded:!0}),a=S.UrlParser.getParametersAsObject(),o={challengeType:a[dl.CHALLENGE_TYPE],darkMode:a[dl.DARK_MODE],appType:a[dl.APP_TYPE]},i=pl.safeParse(o),null===(e=i.success?i.data:(console.error(cl,i.error),null)))return Il(n,Wi.CHALLENGE_PARSED,{parsed:!1}),[2,!1];switch(e.darkMode?(document.body.classList.remove(Cl),document.body.classList.add(_l)):(document.body.classList.remove(_l),document.body.classList.add(Cl)),e.challengeType){case So.CAPTCHA:return[2,Sl(t,n,e.appType)];case So.FORCE_AUTHENTICATOR:return[2,Dl(t,n,e.appType)];case So.TWO_STEP_VERIFICATION:return[2,Tl(t,n,e.appType)];case So.SECURITY_QUESTIONS:return[2,Al(t,n,e.appType)];case So.REAUTHENTICATION:return[2,Nl(t,n,e.appType)];case So.PROOF_OF_WORK:return[2,wl(t,n,e.appType)];case"generic":return[2,Ll(t,n,e.appType)];default:return e.challengeType,[2,!1]}return[2]}))}))},Rl={Captcha:h,ForceAuthenticator:v,Generic:b,HybridWrapper:C,ProofOfWork:y,Reauthentication:m,SecurityQuestions:E,TwoStepVerification:g};Object.assign(T(),{AccountIntegrityChallengeService:Rl})}()}();
//# sourceMappingURL=https://js.rbxcdn.com/5dd82bb7e527dba7e095-challenge.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("Challenge");