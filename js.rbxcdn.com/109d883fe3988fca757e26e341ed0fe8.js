;// bundle: Pages___Catalog___6826c0356aa7768d3e3e79e71f30f332_m
;// files: modules/Pages/Catalog.js

;// modules/Pages/Catalog.js
Roblox.define("Pages.Catalog",["Widgets.ItemImage","Widgets.HierarchicalDropdown","Pages.CatalogShared"],function(n){function l(t,f,l){o=l,n.populate(),$(".roblox-item-image[data-retry-url]").loadRobloxThumbnails(),i=t,i.TotalNumberOfPages=f,i.EmptyStringSearchEnabled=$("#catalog").data("empty-search-enabled"),i.HideNonRelevantFiltersEnabled=$("#catalog").data("hide-non-relevant-filter-enabled"),y(),$(".Paging_Input").keypress(function(n){n.which=="13"&&p()}),$("#keywordTextbox").keypress(function(n){if(n.which=="13")return e(),!1}),$("#creatorTextbox").keypress(function(n){if(n.which=="13")return s(),!1}),$(".pxInput").keypress(function(n){if(n.which=="13")return h(),!1}),$("select#categoriesForKeyword").change(function(){i.EmptyStringSearchEnabled&&e(!1,"")});var a=$("#legendcontent").css("display")!="none";$("#legendheader").click(function(){a?($("#legendcontent").hide(),$(this).removeClass("expanded")):($("#legendcontent").show(),$(this).addClass("expanded")),a=!a});$(".assetTypeFilter").on("click",function(){var t=$(this).data("category"),f=$(this).data("keepfilters"),n;return t!==undefined&&(f!==undefined?u({types:!0,category:!0}):c(),i.Category=t),n=$(this).data("types"),n!==undefined&&(i.Subcategory=n),r(!1,!0),!1});$(".gearFilter").click(function(){var n=$(this).data("types"),t=$(this).data("category");t!==undefined?(c(),i.Category=t,n!="All"&&(i.Gears=n)):i.Gears=n=="All"?null:n,r(!1,!0)}),$(".genreFilter").click(function(){return i.Genres=$("input.genreFilter:checked").map(function(){return $(this).data("genreid")}).get().toString().split(","),i.Genres==""&&(i.Genres=null),r(!1,!0),!0}),$(".creatorFilter").click(function(){var n=$(this).data("creatorid");i.CreatorID=n,r(!1,!0)}),$(".breadCrumbFilter").click(function(){var n=$(this).data("filter");switch(n){case"category":u({types:!0,gears:!0,genres:!0,creator:!0,prices:!0,keyword:!0});break;case"subcategory":u({gears:!0,genres:!0,creator:!0,prices:!0,keyword:!0});break;case"gears":u({genres:!0,creator:!0,prices:!0,keyword:!0});break;case"genres":u({creator:!0,prices:!0,keyword:!0});break;case"creator":u({prices:!0,keyword:!0});break;case"px":u({keyword:!0})}r(!1,!0)}),$(".priceFilter").click(function(){i.CurrencyType=$(this).data("currencytype"),r(!1,!0)}),$("#submitCreatorButton").click(s),$("#creatorTextbox").focus(function(){$(this).val()=="Name"&&$(this).val(""),$(this).removeClass("Watermark")}),$("#creatorTextbox").blur(function(){$(this).val()==""&&($(this).val("Name"),$(this).addClass("Watermark"))}),$(".pxInput").focus(function(){($(this).val()=="Min"||$(this).val()=="Max")&&$(this).val(""),$(this).removeClass("Watermark")}),$(".pxInput").blur(function(){var n=$(this).data("watermarktext");$(this).val()==""&&($(this).val(n),$(this).addClass("Watermark"))}),$("#submitPxButton").click(h),$("a#submitSearchButton").click(e),i.HideNonRelevantFiltersEnabled||$("select#SortMain").change(function(){i.SortType=document.getElementById("SortMain").value,r(!1,!0)}),$("select#SortAggregation").change(function(){i.SortAggregation=document.getElementById("SortAggregation").value,i.SortCurrency=null,r(!1,!0)}),$("select#SortCurrency").change(function(){i.SortCurrency=document.getElementById("SortCurrency").value,i.SortAggregation=null,r(!1,!0)}),$("#pagingprevious").click(function(){$(this).hasClass("disabled")||(i.PageNumber--,i.PageNumber>=1&&r(!0,!1))}),$("#pagingnext").click(function(){$(this).hasClass("disabled")||(i.PageNumber++,r(!0,!1))}),Roblox.AdsHelper!=undefined&&Roblox.AdsHelper.AdRefresher!=undefined&&Roblox.AdsHelper.AdRefresher.registerAd("AdvertisingLeaderboard")}function s(){f=document.getElementById("creatorTextbox").value,f!=""&&(i.CreatorID=null,r(!1,!0))}function h(){i.CurrencyType=$("#submitPxButton").data("currencytype");var t=document.getElementById("pxMinInput").value,n=document.getElementById("pxMaxInput").value,u=isNaN(n);i.PxMin=t!=""&&parseInt(t)>0?t:null,i.PxMax=n==""||n=="0"||u?null:n,r(!1,!0)}function e(n,t){if(n=typeof n=="undefined"?o:n,i.Keyword=encodeURIComponent(document.getElementById("keywordTextbox").value),i.Keyword==""&&!i.EmptyStringSearchEnabled)return!1;var f=$("#categoriesForKeyword").val();return n?f=="Custom"?u({sorts:!0}):(u({category:!0,types:!0,gears:!0}),i.Category=f):f=="Custom"?u({genres:!0,creator:!0,prices:!0,sorts:!0}):(u({category:!0,types:!0,gears:!0,genres:!0,creator:!0,prices:!0}),i.Category=f),r(!1,!0,t),!1}function a(){u({genres:!0}),r(!1,!0)}function v(){i.CreatorID=null,f=null,r(!1,!0)}function c(){u({category:!0,types:!0,gears:!0,genres:!0,creator:!0,prices:!0,keyword:!0})}function u(n){n.category&&(i.Category=""),n.types&&(i.Subcategory=""),n.gears&&(i.Gears=null),n.genres&&(i.Genres=null),n.creator&&(i.CreatorID=null),n.prices&&(i.CurrencyType=null,i.PxMin=null,i.PxMax=null,i.IncludeNotForSale=null),n.keyword&&(i.Keyword=null),n.sorts&&(i.SortType=null,i.SortAggregation=null,i.SortCurrency=null)}function y(){i.PageNumber==1?$("#pagingprevious").addClass("disabled"):i.PageNumber==i.TotalNumberOfPages&&$("#pagingnext").addClass("disabled")}function p(){i.PageNumber=Math.round($("input.Paging_Input").val()),i.PageNumber>=1&&(i.PageNumber>i.TotalNumberOfPages&&(i.PageNumber=i.TotalNumberOfPages),r(!0,!1))}function r(n,t,r){var u="/catalog/browse.aspx?",o,c=!1,e,s,h;if(Roblox.CatalogValues&&(Roblox.CatalogValues.CatalogContentsUrl&&Roblox.CatalogValues.ContainerID&&(o=$("#"+Roblox.CatalogValues.ContainerID),o.length!==0&&(u=Roblox.CatalogValues.CatalogContentsUrl+"?",c=!0)),Roblox.CatalogValues.CatalogContext!==undefined&&(u+="CatalogContext="+Roblox.CatalogValues.CatalogContext+"&")),i.Subcategory!=null&&i.Subcategory!=""&&(u+="Subcategory="+i.Subcategory+"&"),i.Gears!=null&&(u+="Gears="+i.Gears+"&"),i.Genres!=null)for(e=0;e<i.Genres.length;e++)u+="Genres="+i.Genres[e]+"&";i.CreatorID!=null&&i.CreatorID!=0?u+="CreatorID="+i.CreatorID+"&":f!=null&&(u+="CreatorName="+f+"&"),i.Keyword!=null&&i.Keyword!=""&&(u+="Keyword="+i.Keyword+"&"),i.CurrencyType!=null&&i.CurrencyType!==0&&i.CurrencyType!=="0"&&(u+="CurrencyType="+i.CurrencyType+"&"),i.PxMin!=null&&i.PxMin!==0&&i.PxMin!=="0"&&(u+="pxMin="+i.PxMin+"&"),i.PxMax!=null&&i.PxMax!==0&&i.PxMax!=="0"&&(u+="pxMax="+i.PxMax+"&"),i.HideNonRelevantFiltersEnabled||i.SortType==null||i.SortType===0||i.SortType==="0"||(u+="SortType="+i.SortType+"&"),i.SortAggregation!=null&&(u+="SortAggregation="+i.SortAggregation+"&"),i.SortCurrency!=null&&i.SortCurrency!==0&&i.SortCurrency!=="0"&&(u+="SortCurrency="+i.SortCurrency+"&"),n&&i.PageNumber>=0&&(u+="PageNumber="+i.PageNumber+"&"),s=($("#legendcontent").css("display")!="none").toString(),s!="false"&&(u+="LegendExpanded="+s+"&"),u+="Category="+i.Category,c?(h=null,Roblox.LibraryMetrics&&(h=Roblox.LibraryMetrics.getAutocompleteMetrics(r),Roblox.LibraryMetrics.clearAutocompleteUsage()),Roblox.CatalogShared.LoadCatalogAjax(u,null,o,!1,!1,t,h)):window.location=u}var i,f,o=!1;return{ClearGenres:a,ClearCreator:v,pagestate:i,init:l,SearchOnKeyword:e}});

;//Bundle detector
Roblox && Roblox.BundleDetector && Roblox.BundleDetector.bundleDetected('Pages___Catalog');